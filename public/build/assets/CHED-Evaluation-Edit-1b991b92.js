import{k as oe,l as se,m as l,A as _,o as d,f as r,a as i,b as e,w as g,d as p,t as m,n as k,i as x,p as ne,F as $,O as ae,C as T,g as le,B as E,D as ie}from"./app-f4d80686.js";import de from"./Layout-713aa5ab.js";const re={class:"mt-5 md:mx-8 mx-3 flex flex-col md:flex-row justify-between sticky top-0 z-80 p-3 items-center"},ce=e("button",{class:"w-fit h-10 hover:bg-gray-300 bg-white px-3 border-2 border-gray-500 rounded"},[e("i",{class:"fas fa-arrow-left mr-2"}),p("Back ")],-1),ue={class:"flex"},he={class:"flex flex-row justify-between"},pe={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},fe={key:0,class:"text-red-500"},me={key:1},_e=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),ge={key:2},ve=["disabled"],xe=["href"],we=e("button",{class:"w-auto text-sm select-none px-2 h-10 bg-white hover:text-blue-500 border-2 border-gray-500 active:text-white active:bg-blue-600 rounded mr-1"},[e("i",{class:"fas fa-download mr-1"}),p("Deficiency Report ")],-1),be=[we],ye={class:"flex flex-col lg:flex-row justify-between bg-white rounded p-2"},ke={class:"flex flex-col w-auto rounded"},Ee={class:"w-auto flex flex-col md:flex-row"},Ie=e("div",{class:"mr-2 font-bold"}," HEI Name: ",-1),Se={class:"w-auto flex flex-col md:flex-row mt-2 md:mt-1"},Ce={class:"w-auto flex flex-col md:flex-row"},Fe=e("div",{class:"mr-2 font-bold"}," Program: ",-1),He={class:"w-auto flex flex-col md:flex-row mt-2 md:mt-1"},Me={class:"w-auto flex flex-col md:flex-row"},$e=e("div",{class:"mr-2 font-bold"}," Effectivity: ",-1),Ve=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Area /"),e("br"),p("Minimum Requirement")],-1),Ue=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Self-Evaluation Status /"),e("br"),p("Actual Situation ")],-1),Le=e("th",{class:"p-3 align-bottom"},"Evidence",-1),Ne=e("th",{class:"p-3 align-bottom"},"Findings",-1),Re=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Comments /"),e("br"),p("Recommendations")],-1),Be=e("th",{class:"p-3 align-bottom whitespace-normal"},"Evaluation Status",-1),je={class:"p-3 max-w-8 whitespace-normal text-justify"},De={class:"flex flex-col"},Oe={class:"font-bold"},ze={class:"p-3 max-w-8 align-top whitespace-normal text-justify"},Ae={class:"h-auto p-3 flex flex-col justify-center"},Ke=["href"],Te={key:0},qe={key:1},Pe={class:"h-32 min-w-sm p-3 relative group"},We=["onUpdate:modelValue","name","id","onInput"],Ye=["onClick"],Ge=e("i",{class:"fas fa-pen"},null,-1),Je=[Ge],Qe=["onUpdate:modelValue","name","id","onFocus","onInput"],Xe={class:"h-32 max-w-sm p-3 relative group"},Ze=["onUpdate:modelValue","name","id","onInput"],et=["onClick"],tt=e("i",{class:"fas fa-pen"},null,-1),ot=[tt],st=["onUpdate:modelValue","name","id","onFocus","onInput"],nt={class:"h-32 p-3 max-w-xs"},at={class:"w-full h-full"},lt=["onUpdate:modelValue","id","name","onChange"],it=e("option",{value:"Complied"},"Complied",-1),dt=e("option",{value:"Not complied"},"Not complied",-1),rt=e("option",{value:"Not applicable"},"Not applicable",-1),ct=[it,dt,rt],ut={layout:de,data(){return{itemsLayout:"list"}},methods:{listLayout(){this.itemsLayout="list"},gridLayout(){this.itemsLayout="grid"}}},mt=Object.assign(ut,{__name:"CHED-Evaluation-Edit",props:["evaluation","items"],setup(v){const V=v,U=t=>{c.value&&(t.returnValue=!0)};oe(()=>{window.addEventListener("keydown",A),window.addEventListener("beforeunload",U)}),se(()=>{window.removeEventListener("keydown",A),window.removeEventListener("beforeunload",U)});const I=l(!1),S=l(!1),L=l([]),N=l([]),y=l("");l(!1);const C=l([]),R=l([]),B=l([]),q=l([]),j=l([]),c=l(!1),F=l(!1);l(null);const D=l(null),H=l([]),M={findingsInput:C,evaluationStatus:B,actionButtons:q,evidenceFiles:j,saveBtn:D,findingstexteditor:L,recommendationstexteditor:N};function P(t,f){let a=C.value[t];a.style.height="128px";let u=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(u)))+"px",c.value=!0,w(f)}function W(t,f){let a=R.value[t];a.style.height="128px";let u=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(u)))+"px",c.value=!0,w(f)}function O(t,f){let a=M.findingstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(u)))+"px",c.value=!0,w(f)}function z(t,f){let a=M.recommendationstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(u)))+"px",c.value=!0,w(f)}function w(t){H.value.includes(t)||H.value.push(t)}function Y(t){c.value=!0,w(t)}function G(t){I.value=!0,y.value=t}function J(){I.value=!1}function Q(t){S.value=!0,y.value=t}function X(){S.value=!1}const A=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),M.saveBtn.value.click())};function Z(){ae.post("/ched/evaluation/update",{id:V.evaluation.id,items:V.items,rows:H.value},{onStart:()=>{F.value=!0},onFinish:()=>{F.value=!1},preserveState:!1,preserveScroll:!0})}return(t,f)=>{const a=_("Head"),u=_("page-title"),h=_("Link"),K=_("text-editor"),ee=_("content-table"),te=_("content-container"),b=_("Notification");return d(),r($,null,[i(a,{title:"Evaluation Form"}),i(u,{title:"Program Evaluation"}),e("div",re,[e("div",null,[i(h,{href:"/ched/evaluation"},{default:g(()=>[ce]),_:1})]),e("div",ue,[e("div",he,[e("div",pe,[c.value?(d(),r("div",fe," *Changes unsaved. ")):t.$page.props.flash.updated?(d(),r("div",me,[_e,p(" "+m(t.$page.props.flash.updated),1)])):(d(),r("div",ge))])]),e("button",{onClick:Z,ref_key:"saveBtn",ref:D,class:k(["select-none cursor-pointer bg-blue-500 text-white px-2 w-fit h-10 rounded",{"text-gray-300 bg-gray-700":!c.value}]),disabled:!c.value},"Save Changes ",10,ve)])]),i(te,{hasTopButton:"true"},{"top-button":g(()=>[e("a",{href:"/report/deficiency/"+v.evaluation.id+"/download",target:"_blank"},be,8,xe)]),"main-content":g(()=>[e("div",ye,[e("div",ke,[e("div",Ee,[Ie,e("div",null,m(v.evaluation.institution_program.institution.name),1)]),e("div",Se,[e("div",Ce,[Fe,e("div",null,m(v.evaluation.institution_program.program.program),1)])]),e("div",He,[e("div",Me,[$e,e("div",null," A.Y. "+m(v.evaluation.effectivity),1)])])])]),i(ee,null,{"table-head":g(()=>[Ve,Ue,Le,Ne,Re,Be]),"table-body":g(()=>[(d(!0),r($,null,T(v.items,(o,n)=>(d(),r("tr",{key:o.id,class:k(["align-top text-base",{"bg-slate-200":n%2==0}])},[e("td",je,[e("div",De,[e("div",Oe,m(o.area),1),e("div",null,m(o.minimumRequirement),1)])]),e("td",ze,[e("div",{class:k(["bg-gray-600 text-white w-fit rounded px-2 mb-2",[{"bg-green-600":o.selfEvaluationStatus=="Complied"}]])},m(o.selfEvaluationStatus),3),e("div",null,m(o.actualSituation),1)]),e("td",Ae,[e("div",{class:k(["flex flex-col",{hidden:o.selfEvaluationStatus=="Not applicable"}]),ref_for:!0,ref_key:"evidenceFiles",ref:j},[(d(!0),r($,null,T(o.evidence,(s,ht)=>(d(),r("div",{key:s.id,class:"w-full"},[e("a",{class:"px-1 text-gray-600 hover:text-blue-500 m-1 rounded",href:s.url,target:"_blank"},[s.type=="file"?(d(),r("span",Te," File ")):s.type=="link"?(d(),r("span",qe," Link ")):le("",!0)],8,Ke)]))),128))],2)]),e("td",Pe,[x(e("textarea",{ref_for:!0,ref_key:"findingsInput",ref:C,"onUpdate:modelValue":s=>o.findings=s,name:"findings"+n,id:"findings"+n,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input findings here",onInput:s=>P(n,o.id)},`\r
                                            `,40,We),[[E,o.findings]]),e("button",{onClick:s=>G(n),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Je,8,Ye),i(K,{title:"Findings",showModal:I.value&&y.value==n,onClose:J},{default:g(()=>[x(e("textarea",{ref_for:!0,ref_key:"findingstexteditor",ref:L,"onUpdate:modelValue":s=>o.findings=s,name:"findingsEditor"+n,id:"findingsEditor"+n,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:s=>O(n),onInput:s=>O(n,o.id)},`\r
                                                `,40,Qe),[[E,o.findings]])]),_:2},1032,["showModal"])]),e("td",Xe,[x(e("textarea",{ref_for:!0,ref_key:"recommendationsInput",ref:R,"onUpdate:modelValue":s=>o.recommendations=s,name:"recommendations"+n,id:"recommendations"+n,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input comments here",onInput:s=>W(n,o.id)},`\r
                                            `,40,Ze),[[E,o.recommendations]]),e("button",{onClick:s=>Q(n),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},ot,8,et),i(K,{title:"Comments/Recommendations",showModal:S.value&&y.value==n,onClose:X},{default:g(()=>[x(e("textarea",{ref_for:!0,ref_key:"recommendationstexteditor",ref:N,"onUpdate:modelValue":s=>o.findings=s,name:"recommendationsEditor"+n,id:"recommendationsEditor"+n,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:s=>z(n),onInput:s=>z(n,o.id)},`\r
                                                `,40,st),[[E,o.findings]])]),_:2},1032,["showModal"])]),e("td",nt,[e("div",at,[x(e("select",{ref_for:!0,ref_key:"evaluationStatus",ref:B,"onUpdate:modelValue":s=>o.evaluationStatus=s,id:"evaluationStatus"+n,name:"evaluationStatus"+n,onChange:s=>Y(o.id),class:"p-1 rounded w-36 border-gray-400"},ct,40,lt),[[ie,o.evaluationStatus]])])])],2))),128))]),_:1})]),_:1}),i(b,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.flash.updated,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.flash.deleted,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.errors.link,type:"failed"},null,8,["message"]),x(i(b,{message:"Saving...",type:"processing"},null,512),[[ne,F.value]])],64)}}});export{mt as default};
