import{k as se,l as ae,m as i,A as w,o as r,f as d,a as l,b as e,w as g,t as h,d as p,g as T,i as x,p as q,F as M,C as G,n as H,B as k,D as ie,O as le}from"./app-fe511cab.js";import re from"./Layout-4e2e1be8.js";const de={class:"md:mx-8 mx-3 mt-8 flex flex-row justify-between rounded relative"},ce=e("button",{class:"select-none w-24 h-10 border border-gray-500 rounded bg-white hover:bg-gray-700 hover:text-white"},[e("i",{class:"fas fa-arrow-left mr-2"}),p(" Back ")],-1),ue={class:"flex flex-row"},he=e("button",{class:"select-none px-2 rounded text-white bg-gray-700 hover:bg-gray-800 hover:text-white h-10 text-sm"},"Generate Report",-1),pe={class:"flex flex-col xl:flex-row items-center justify-between w-auto rounded border border-gray-400 bg-white mx-3 md:mx-8 mt-5 p-3"},me={class:"w-full text-left"},fe={class:"w-auto flex flex-row items-center"},ge=e("i",{class:"fas fa-institution mr-3 text-blue-500"},null,-1),_e={class:"w-auto flex flex-row items-center"},ve=e("i",{class:"fas fa-book mr-3 text-blue-500"},null,-1),we={key:0},xe={class:"w-auto flex flex-row items-center"},be=e("i",{class:"fas fa-calendar-check mr-3 text-blue-500"},null,-1),ye={class:"flex"},ke={class:"flex flex-row justify-between ml-2"},Ee={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},Ie={key:0,class:"text-red-500"},Se={key:1},Ce=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),Fe={key:2},$e=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Area/"),e("br"),p("Minimum Requirement")],-1),Me=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Self-Evaluation Status/"),e("br"),p("Actual Situation ")],-1),He=e("th",{class:"p-3 align-bottom"},"Evidence",-1),Ve=e("th",{class:"p-3 align-bottom whitespace-normal"},"Findings",-1),Be=e("th",{class:"p-3 align-bottom whitespace-normal"},[p("Comments/"),e("br"),p("Recommendations")],-1),Ue=e("th",{class:"p-3 align-bottom whitespace-normal"},"Evaluation Status",-1),Re={class:"p-3 min-w-12 whitespace-normal text-justify"},Ne={class:"flex flex-col"},je={class:"font-bold"},Le={class:"p-3 min-w-12 align-top whitespace-normal text-justify"},Ae={class:"h-auto min-w-8 p-3 flex flex-col justify-center"},De=["href"],Oe={key:0},ze={key:1},Ke={class:"h-32 min-w-16 p-3 relative group"},Te=["onUpdate:modelValue","name","id","onInput"],qe=["onClick"],Ge=e("i",{class:"fas fa-pen"},null,-1),Pe=[Ge],We=["onUpdate:modelValue","name","id","onFocus","onInput"],Ye={class:"h-32 min-w-16 p-3 relative group"},Je=["onUpdate:modelValue","name","id","onInput"],Qe=["onClick"],Xe=e("i",{class:"fas fa-pen"},null,-1),Ze=[Xe],et=["onUpdate:modelValue","name","id","onFocus","onInput"],tt={class:"h-32 p-3 min-w-8"},ot={class:"w-full h-full"},nt=["onUpdate:modelValue","id","name","onChange"],st=e("option",{value:null},"Select status",-1),at=e("option",{value:"Complied"},"Complied",-1),it=e("option",{value:"Not complied"},"Not complied",-1),lt=e("option",{value:"Not applicable"},"Not applicable",-1),rt=[st,at,it,lt],dt={layout:re},ht=Object.assign(dt,{__name:"CHED-Evaluation-Edit",props:["evaluation","items","deficiencyReport","evaluationDate","evaluatedBy","reviewedBy","notedBy","auth"],setup(m){const V=m,B=t=>{_.value&&(t.returnValue=!0)};se(()=>{window.addEventListener("keydown",z),window.addEventListener("beforeunload",B)}),ae(()=>{window.removeEventListener("keydown",z),window.removeEventListener("beforeunload",B)});const E=i(!1),I=i(!1),U=i([]),R=i([]),y=i("");i(!1);const S=i([]),N=i([]),j=i([]),P=i([]),L=i([]),_=i(!1),C=i(!1),A=i(null),F=i([]),$={findingsInput:S,evaluationStatus:j,actionButtons:P,evidenceFiles:L,saveBtn:A,findingstexteditor:U,recommendationstexteditor:R};function W(t,f){let a=S.value[t];a.style.height="128px";let u=a.scrollHeight+"px",c=384;a.style.height=Math.min(c,Math.max(128,parseInt(u)))+"px",_.value=!0,b(f)}function Y(t,f){let a=N.value[t];a.style.height="128px";let u=a.scrollHeight+"px",c=384;a.style.height=Math.min(c,Math.max(128,parseInt(u)))+"px",_.value=!0,b(f)}function D(t,f){let a=$.findingstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",c=384;a.style.height=Math.min(c,Math.max(128,parseInt(u)))+"px",_.value=!0,b(f)}function O(t,f){let a=$.recommendationstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",c=384;a.style.height=Math.min(c,Math.max(128,parseInt(u)))+"px",_.value=!0,b(f)}function b(t){F.value.includes(t)||F.value.push(t)}function J(t){_.value=!0,b(t)}function Q(t){E.value=!0,y.value=t}function X(){E.value=!1}function Z(t){I.value=!0,y.value=t}function ee(){I.value=!1}const z=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),$.saveBtn.value.click())};function te(){le.post("/ched/evaluation/update",{id:V.evaluation.id,items:V.items,rows:F.value},{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}return(t,f)=>{const a=w("Head"),u=w("page-title"),c=w("Link"),K=w("text-editor"),oe=w("content-table"),ne=w("content-container"),v=w("Notification");return r(),d(M,null,[l(a,{title:"Evaluation Form"}),l(u,{title:"Program Evaluation"}),e("div",de,[e("div",null,[l(c,{href:"/evaluation"},{default:g(()=>[ce]),_:1})]),e("div",ue,[l(c,{href:"/ched/evaluation/"+m.evaluation.id+"/report"},{default:g(()=>[he]),_:1},8,["href"])])]),e("div",pe,[e("div",me,[e("div",fe,[ge,e("div",null,h(m.evaluation.institution_program.institution.name),1)]),e("div",_e,[ve,e("div",null,[p(h(m.evaluation.institution_program.program.program)+" ",1),m.evaluation.institution_program.program.major?(r(),d("span",we," - "+h(m.evaluation.institution_program.program.major),1)):T("",!0)])]),e("div",xe,[be,e("div",null,"A.Y. "+h(m.evaluation.effectivity),1)])])]),l(ne,{hasTopButton:!0},{"top-button":g(()=>[e("div",ye,[e("button",{onClick:te,ref_key:"saveBtn",ref:A,class:"select-none cursor-pointer bg-blue-500 text-white px-2 w-fit h-10 rounded"},"Save Changes ",512),e("div",ke,[e("div",Ee,[_.value?(r(),d("div",Ie," *Changes unsaved. ")):t.$page.props.flash.updated?(r(),d("div",Se,[Ce,p(" "+h(t.$page.props.flash.updated),1)])):(r(),d("div",Fe))])])])]),"main-content":g(()=>[l(oe,null,{"table-head":g(()=>[$e,Me,He,Ve,Be,Ue]),"table-body":g(()=>[(r(!0),d(M,null,G(m.items,(o,s)=>(r(),d("tr",{key:o.id,class:H(["align-top text-base",{"bg-slate-200":s%2==0}])},[e("td",Re,[e("div",Ne,[e("div",je,h(o.area),1),e("div",null,h(o.minimumRequirement),1)])]),e("td",Le,[e("div",{class:H(["bg-gray-600 text-white w-fit rounded px-2 mb-2",[{"bg-green-600":o.selfEvaluationStatus=="Complied"}]])},h(o.selfEvaluationStatus),3),e("div",null,h(o.actualSituation),1)]),e("td",Ae,[e("div",{class:H(["flex flex-col",{hidden:o.selfEvaluationStatus=="Not applicable"}]),ref_for:!0,ref_key:"evidenceFiles",ref:L},[(r(!0),d(M,null,G(o.evidence,n=>(r(),d("div",{key:n.id,class:"w-full"},[e("a",{class:"px-1 text-gray-600 hover:text-blue-500 m-1 rounded",href:n.url,target:"_blank"},[n.type=="file"?(r(),d("span",Oe," File ")):n.type=="link"?(r(),d("span",ze," Link ")):T("",!0)],8,De)]))),128))],2)]),e("td",Ke,[x(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"findingsInput",ref:S,"onUpdate:modelValue":n=>o.findings=n,name:"findings"+s,id:"findings"+s,class:"w-full min-w-md h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input findings here",onInput:n=>W(s,o.id)},`\r
                                            `,40,Te),[[k,o.findings]]),e("button",{onClick:n=>Q(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Pe,8,qe),l(K,{title:"Findings",showModal:E.value&&y.value==s,onClose:X},{default:g(()=>[x(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"findingstexteditor",ref:U,"onUpdate:modelValue":n=>o.findings=n,name:"findingsEditor"+s,id:"findingsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>D(s),onInput:n=>D(s,o.id)},`\r
                                                `,40,We),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",Ye,[x(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"recommendationsInput",ref:N,"onUpdate:modelValue":n=>o.recommendations=n,name:"recommendations"+s,id:"recommendations"+s,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input comments here",onInput:n=>Y(s,o.id)},`\r
                                            `,40,Je),[[k,o.recommendations]]),e("button",{onClick:n=>Z(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Ze,8,Qe),l(K,{title:"Comments/Recommendations",showModal:I.value&&y.value==s,onClose:ee},{default:g(()=>[x(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"recommendationstexteditor",ref:R,"onUpdate:modelValue":n=>o.findings=n,name:"recommendationsEditor"+s,id:"recommendationsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>O(s),onInput:n=>O(s,o.id)},`\r
                                                `,40,et),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",tt,[e("div",ot,[x(e("select",{ref_for:!0,ref_key:"evaluationStatus",ref:j,"onUpdate:modelValue":n=>o.evaluationStatus=n,id:"evaluationStatus"+s,name:"evaluationStatus"+s,onChange:n=>J(o.id),class:"p-1 rounded w-36 border-gray-400"},rt,40,nt),[[ie,o.evaluationStatus]])])])],2))),128))]),_:1})]),_:1}),l(v,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),l(v,{message:t.$page.props.flash.failed,type:"failed"},null,8,["message"]),l(v,{message:t.$page.props.flash.updated,type:"success"},null,8,["message"]),l(v,{message:t.$page.props.flash.deleted,type:"success"},null,8,["message"]),l(v,{message:t.$page.props.errors.link,type:"failed"},null,8,["message"]),x(l(v,{message:"Saving...",type:"processing"},null,512),[[q,C.value]]),x(l(v,{message:"Archiving...",type:"processing"},null,512),[[q,t.archiving]])],64)}}});export{ht as default};
