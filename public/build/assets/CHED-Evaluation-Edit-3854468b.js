import{k as fe,l as pe,m as l,T as _e,A as x,o as i,f as d,a as r,w as u,i as f,p as R,F as j,b as e,d as g,t as m,g as X,B as F,u as k,z as ve,C as Z,n as L,D,O as me}from"./app-eaf9df37.js";import ge from"./Layout-8d14705d.js";const we={class:"w-full flex flex-col md:flex-row justify-between items-center"},ye={class:"w-full flex flex-row items-center"},xe={class:"w-full flex flex-row items-center"},be=e("button",{class:"w-8 h-8 rounded-full hover:bg-gray-200 tooltipForActions","data-tooltip":"Back"},[e("i",{class:"fas fa-arrow-left"})],-1),ke=e("div",{class:"ml-3 font-bold"},"Evaluate",-1),Se={class:"w-full flex flex-row justify-between ml-2"},Ee={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},Ce={key:0,class:"text-red-500"},Fe={key:1},Ie=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),Me={key:2},Ne={class:"w-full md:w-fit md:mt-0 mt-3 flex flex-row justify-center"},$e={class:"w-full mr-2"},Ve=e("button",{class:"w-full select-none whitespace-nowrap rounded text-white bg-gray-700 hover:bg-gray-800 hover:text-white h-10 px-2"},"Generate Report",-1),He={class:"w-full"},Ue=["disabled"],Ae={class:"flex flex-col xl:flex-row items-center justify-between w-auto rounded border border-gray-300 bg-white my-3"},Be={class:"w-full text-left p-3 md:p-5"},Re={class:"w-auto flex flex-row items-center"},je=e("i",{class:"fas fa-institution mr-3 text-blue-500"},null,-1),Le={class:"w-auto flex flex-row items-center"},De=e("i",{class:"fas fa-book mr-3 text-blue-500"},null,-1),Oe={key:0},Te={class:"w-auto flex flex-row items-center"},ze=e("i",{class:"fas fa-calendar-check mr-3 text-blue-500"},null,-1),Ke={class:"w-full flex items-end px-3 md:px-5 py-2"},qe={class:"w-full flex flex-row justify-between ml-2"},Ge={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},Pe={key:0,class:"text-red-500"},We=e("div",null," *Changes unsaved. ",-1),Ye=[We],Je={key:1},Qe=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),Xe={key:2},Ze={class:"flex flex-row"},et=["disabled"],tt={class:"w-full flex flex-row relative items-center"},ot=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),st={class:"mr-1"},nt=e("i",{class:"fas fa-filter"},null,-1),at=[nt],lt=e("button",{class:"w-10 h-10 hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),it=e("th",{class:"p-2"},[g("Area/"),e("br"),g("Minimum Requirement")],-1),dt=e("th",{class:"p-2"},[g("Self-Evaluation Status/"),e("br"),g("Actual Situation ")],-1),rt=e("th",{class:"p-2"},"Evidence",-1),ut=e("th",{class:"p-2"},"Findings",-1),ct=e("th",{class:"p-2"},[g("Comments/"),e("br"),g("Recommendations")],-1),ht=e("th",{class:"p-2"},"Evaluation Status",-1),ft={key:0},pt=e("td",{colspan:"6",class:"p-2 py-10 items-center text-center"}," No data ",-1),_t=[pt],vt={class:"p-2 text-justify"},mt={class:"flex flex-col"},gt={class:"font-bold"},wt=["innerHTML"],yt={class:"p-2 text-justify"},xt={class:"h-auto p-2 flex flex-col justify-center"},bt=["href"],kt={key:0},St={key:1},Et={class:"h-32 min-w-16 p-2 relative group"},Ct=["onUpdate:modelValue","name","id","onInput"],Ft=["onClick"],It=e("i",{class:"fas fa-pen"},null,-1),Mt=[It],Nt=["onUpdate:modelValue","name","id","onFocus","onInput"],$t={class:"h-32 min-w-16 p-2 relative group"},Vt=["onUpdate:modelValue","name","id","onInput"],Ht=["onClick"],Ut=e("i",{class:"fas fa-pen"},null,-1),At=[Ut],Bt=["onUpdate:modelValue","name","id","onFocus","onInput"],Rt={class:"h-32 p-3 min-w-8"},jt={class:"w-full h-full"},Lt=["onUpdate:modelValue","id","name","onChange"],Dt=e("option",{value:null},"Select status",-1),Ot=e("option",{value:"Complied"},"Complied",-1),Tt=e("option",{value:"Not complied"},"Not complied",-1),zt=e("option",{value:"Not applicable"},"Not applicable",-1),Kt=[Dt,Ot,Tt,zt],qt={class:"flex flex-col"},Gt=e("label",{for:"selfEvalStatus"},"Self-Evaluation Status",-1),Pt=e("option",{value:null},"All",-1),Wt=e("option",{value:"Complied"},"Complied",-1),Yt=e("option",{value:"Not complied"},"Not Complied",-1),Jt=e("option",{value:"Not applicable"},"Not Applicable",-1),Qt=e("option",{value:"No Status"},"No Status",-1),Xt=[Pt,Wt,Yt,Jt,Qt],Zt={class:"mt-3 flex flex-col"},eo=e("label",{for:"evalStatus"},"Evaluation Status",-1),to=e("option",{value:null},"All",-1),oo=e("option",{value:"Complied"},"Complied",-1),so=e("option",{value:"Not complied"},"Not Complied",-1),no=e("option",{value:"Not applicable"},"Not Applicable",-1),ao=[to,oo,so,no],lo={key:0},io=e("i",{class:"fas fa-spinner animate-spin"},null,-1),ro=[io],uo={key:1},co={layout:ge},po=Object.assign(co,{__name:"CHED-Evaluation-Edit",props:["evaluation","items","deficiencyReport","evaluationDate","evaluatedBy","reviewedBy","notedBy","auth","filters"],setup(p){const _=p,O=t=>{w.value&&(t.returnValue=!0)};fe(()=>{window.addEventListener("keydown",Y),window.addEventListener("beforeunload",O)}),pe(()=>{window.removeEventListener("keydown",Y),window.removeEventListener("beforeunload",O)});const M=l(!1),N=l(!1),T=l([]),z=l([]),I=l("");l(!1);const $=l([]),K=l([]),q=l([]),ee=l([]),G=l([]),w=l(!1),S=l(!1),V=l(null),H=l([]),U={findingsInput:$,evaluationStatus:q,actionButtons:ee,evidenceFiles:G,saveBtn:V,findingstexteditor:T,recommendationstexteditor:z};function te(t,c){let a=$.value[t];a.style.height="128px";let v=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(v)))+"px",w.value=!0,E(c)}function oe(t,c){let a=K.value[t];a.style.height="128px";let v=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(v)))+"px",w.value=!0,E(c)}function P(t,c){let a=U.findingstexteditor.value[t];a.style.height="128px";let v=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(v)))+"px",w.value=!0,E(c)}function W(t,c){let a=U.recommendationstexteditor.value[t];a.style.height="128px";let v=a.scrollHeight+"px",h=384;a.style.height=Math.min(h,Math.max(128,parseInt(v)))+"px",w.value=!0,E(c)}function E(t){H.value.includes(t)||H.value.push(t)}function se(t){w.value=!0,E(t)}function ne(t){M.value=!0,I.value=t}function ae(){M.value=!1}function le(t){N.value=!0,I.value=t}function ie(){N.value=!1}const Y=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),U.saveBtn.value.click())};function J(){me.post("/ched/evaluation/update",{id:_.evaluation.id,items:_.items,rows:H.value},{onStart:()=>{S.value=!0},onFinish:()=>{S.value=!1},preserveState:!1,preserveScroll:!0})}const C=l(!1),A=l(!1),y=_e({search:_.filters.search,selfEvaluationStatus:_.filters.selfEvaluationStatus!=null?_.filters.selfEvaluationStatus:null,evaluationStatus:_.filters.evaluationStatus!=null?_.filters.evaluationStatus:null});function B(){A.value=!A.value}function de(){y.get("/ched/evaluation/"+_.evaluation.id+"/evaluate",{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}function re(){y.get("/ched/evaluation/"+_.evaluation.id+"/evaluate",{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1,B()},preserveState:!0,preserveScroll:!0})}return(t,c)=>{const a=x("Head"),v=x("page-title"),h=x("Link"),Q=x("text-editor"),ue=x("content-table"),ce=x("content-container"),he=x("modal"),b=x("Notification");return i(),d(j,null,[r(a,{title:"Evaluation Compliance Tool"}),r(v,{title:"Program Evaluation"}),r(ce,{hasStickyDiv:!0,hasTopMainContent:!0,hasSearch:!0,hasFilters:!0},{"content-title":u(()=>[e("div",we,[e("div",ye,[e("div",xe,[r(h,{href:"/evaluation"},{default:u(()=>[be]),_:1}),ke]),e("div",Se,[e("div",Ee,[w.value?(i(),d("div",Ce," *Changes unsaved. ")):t.$page.props.flash.updated?(i(),d("div",Fe,[Ie,g(" "+m(t.$page.props.flash.updated),1)])):(i(),d("div",Me))])])]),e("div",Ne,[e("div",$e,[r(h,{href:"/ched/evaluation/"+p.evaluation.id+"/report"},{default:u(()=>[Ve]),_:1},8,["href"])]),e("div",He,[e("button",{onClick:J,ref_key:"saveBtn",ref:V,disabled:S.value,class:"w-full select-none whitespace-nowrap cursor-pointer bg-blue-500 text-white h-10 rounded px-2"},"Save Changes ",8,Ue)])])])]),"top-main-content":u(()=>[e("div",Ae,[e("div",Be,[e("div",Re,[je,e("div",null,m(p.evaluation.institution_program.institution.name),1)]),e("div",Le,[De,e("div",null,[g(m(p.evaluation.institution_program.program.program)+" ",1),p.evaluation.institution_program.program.major?(i(),d("span",Oe," - "+m(p.evaluation.institution_program.program.major),1)):X("",!0)])]),e("div",Te,[ze,e("div",null,"A.Y. "+m(p.evaluation.effectivity),1)])])])]),"sticky-div":u(()=>[e("div",Ke,[e("div",qe,[e("div",Ge,[w.value?(i(),d("div",Pe,Ye)):t.$page.props.flash.updated?(i(),d("div",Je,[Qe,g(" "+m(t.$page.props.flash.updated),1)])):(i(),d("div",Xe))])]),e("div",Ze,[e("button",{onClick:J,ref_key:"saveBtn",ref:V,disabled:S.value,class:"select-none whitespace-nowrap cursor-pointer bg-blue-500 text-white px-2 w-fit h-10 rounded"},"Save Changes ",8,et)])])]),search:u(()=>[e("div",tt,[ot,f(e("input",{onKeydown:ve(de,["enter"]),"onUpdate:modelValue":c[0]||(c[0]=o=>k(y).search=o),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[F,k(y).search]])])]),options:u(()=>[e("div",st,[e("button",{onClick:B,class:"w-10 h-10 hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},at),r(h,{href:"/ched/evaluation/"+_.evaluation.id+"/evaluate"},{default:u(()=>[lt]),_:1},8,["href"])])]),"main-content":u(()=>[r(ue,null,{"table-head":u(()=>[it,dt,rt,ut,ct,ht]),"table-body":u(()=>[p.items.data.length==0?(i(),d("tr",ft,_t)):(i(!0),d(j,{key:1},Z(p.items.data,(o,n)=>(i(),d("tr",{key:o.id,class:L(["hover:bg-gray-200 align-top text-base",{"bg-gray-100":n%2==1}])},[e("td",vt,[e("div",mt,[e("div",gt,m(o.criteria.area),1),e("div",{innerHTML:o.criteria.minimumRequirement},null,8,wt)])]),e("td",yt,[e("div",{class:L(["bg-gray-600 text-white w-fit rounded px-2 mb-2",[{"bg-green-600":o.selfEvaluationStatus=="Complied"}]])},m(o.selfEvaluationStatus),3),e("div",null,m(o.actualSituation),1)]),e("td",xt,[e("div",{class:L(["flex flex-col",{hidden:o.selfEvaluationStatus=="Not applicable"}]),ref_for:!0,ref_key:"evidenceFiles",ref:G},[(i(!0),d(j,null,Z(o.evidence,s=>(i(),d("div",{key:s.id,class:"w-full"},[e("a",{class:"px-1 text-gray-600 hover:text-blue-500 m-1 rounded",href:s.url,target:"_blank"},[s.type=="file"?(i(),d("span",kt," File ")):s.type=="link"?(i(),d("span",St," Link ")):X("",!0)],8,bt)]))),128))],2)]),e("td",Et,[f(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"findingsInput",ref:$,"onUpdate:modelValue":s=>o.findings=s,name:"findings"+n,id:"findings"+n,class:"w-full min-w-md h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input findings here",onInput:s=>te(n,o.id)},`\r
                                            `,40,Ct),[[F,o.findings]]),e("button",{onClick:s=>ne(n),class:"absolute bottom-10 left-52 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Mt,8,Ft),r(Q,{title:"Findings",showModal:M.value&&I.value==n,onClose:ae},{default:u(()=>[f(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"findingstexteditor",ref:T,"onUpdate:modelValue":s=>o.findings=s,name:"findingsEditor"+n,id:"findingsEditor"+n,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:s=>P(n),onInput:s=>P(n,o.id)},`\r
                                                `,40,Nt),[[F,o.findings]])]),_:2},1032,["showModal"])]),e("td",$t,[f(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"recommendationsInput",ref:K,"onUpdate:modelValue":s=>o.recommendations=s,name:"recommendations"+n,id:"recommendations"+n,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input comments here",onInput:s=>oe(n,o.id)},`\r
                                            `,40,Vt),[[F,o.recommendations]]),e("button",{onClick:s=>le(n),class:"absolute bottom-10 left-52 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},At,8,Ht),r(Q,{title:"Comments/Recommendations",showModal:N.value&&I.value==n,onClose:ie},{default:u(()=>[f(e("textarea",{maxlength:"5000",ref_for:!0,ref_key:"recommendationstexteditor",ref:z,"onUpdate:modelValue":s=>o.findings=s,name:"recommendationsEditor"+n,id:"recommendationsEditor"+n,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:s=>W(n),onInput:s=>W(n,o.id)},`\r
                                                `,40,Bt),[[F,o.findings]])]),_:2},1032,["showModal"])]),e("td",Rt,[e("div",jt,[f(e("select",{ref_for:!0,ref_key:"evaluationStatus",ref:q,"onUpdate:modelValue":s=>o.evaluationStatus=s,id:"evaluationStatus"+n,name:"evaluationStatus"+n,onChange:s=>se(o.id),class:"p-1 rounded w-36 border-gray-400"},Kt,40,Lt),[[D,o.evaluationStatus]])])])],2))),128))]),_:1})]),_:1}),r(he,{showModal:A.value,onClose:B,width:"sm",height:"long",title:"Filters"},{"custom-button":u(()=>[e("button",{onClick:re,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[C.value?(i(),d("span",lo,ro)):(i(),d("span",uo,"Apply"))])]),default:u(()=>[e("div",null,[e("div",qt,[Gt,f(e("select",{"onUpdate:modelValue":c[1]||(c[1]=o=>k(y).selfEvaluationStatus=o),id:"selfEvalStatus",class:"rounded border-gray-400"},Xt,512),[[D,k(y).selfEvaluationStatus]])]),f(e("div",Zt,[eo,f(e("select",{"onUpdate:modelValue":c[2]||(c[2]=o=>k(y).evaluationStatus=o),id:"evalStatus",class:"rounded border-gray-400"},ao,512),[[D,k(y).evaluationStatus]])],512),[[R,p.evaluation.evaluationDate!=null]])])]),_:1},8,["showModal"]),r(b,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),r(b,{message:t.$page.props.flash.failed,type:"failed"},null,8,["message"]),r(b,{message:t.$page.props.flash.updated,type:"success"},null,8,["message"]),r(b,{message:t.$page.props.flash.deleted,type:"success"},null,8,["message"]),r(b,{message:t.$page.props.errors.link,type:"failed"},null,8,["message"]),f(r(b,{message:"Saving...",type:"processing"},null,512),[[R,S.value]]),f(r(b,{message:"Archiving...",type:"processing"},null,512),[[R,t.archiving]])],64)}}});export{po as default};
