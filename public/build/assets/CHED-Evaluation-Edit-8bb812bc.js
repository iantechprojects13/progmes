import{k as oe,l as ne,m as l,A as _,o as d,f as r,a as i,b as e,w as g,t as p,i as x,p as se,F as M,d as h,C as T,n as $,g as ae,B as k,D as le,O as ie}from"./app-612f8f79.js";import de from"./Layout-688c6e41.js";const re={class:"mt-8 md:mx-8 mx-3 flex flex-col md:flex-row justify-between sticky top-0 z-80"},ce=e("button",{class:"h-10 w-20 hover:bg-gray-300 bg-white border border-gray-500 rounded"},[e("i",{class:"fas fa-arrow-left mr-2"}),h("Back ")],-1),ue=["href"],he=e("button",{class:"md:mt-0 mt-3 w-auto text-sm select-none px-3 h-10 bg-white hover:text-blue-500 border border-gray-500 active:text-white active:bg-blue-600 rounded mr-1"},[e("i",{class:"fas fa-download mr-1"}),h("Deficiency Report ")],-1),me=[he],pe={class:"mx-3 md:mx-8 mt-5 flex flex-col w-auto rounded bg-white p-3 border border-gray-400"},fe={class:"w-auto flex flex-col md:flex-row"},_e=e("div",{class:"mr-2 font-bold"}," HEI Name: ",-1),ge={class:"w-auto flex flex-col md:flex-row mt-2 md:mt-1"},ve={class:"w-auto flex flex-col md:flex-row"},xe=e("div",{class:"mr-2 font-bold"}," Program: ",-1),we={class:"w-auto flex flex-col md:flex-row mt-2 md:mt-1"},be={class:"w-auto flex flex-col md:flex-row"},ye=e("div",{class:"mr-2 font-bold"}," Effectivity: ",-1),ke={class:"flex"},Ee={class:"flex flex-row justify-between ml-2"},Ie={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},Se={key:0,class:"text-red-500"},Ce={key:1},Fe=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),He={key:2},Me=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Area /"),e("br"),h("Minimum Requirement")],-1),$e=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Self-Evaluation Status /"),e("br"),h("Actual Situation ")],-1),Ve=e("th",{class:"p-3 align-bottom"},"Evidence",-1),Ue=e("th",{class:"p-3 align-bottom"},"Findings",-1),Le=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Comments /"),e("br"),h("Recommendations")],-1),Ne=e("th",{class:"p-3 align-bottom whitespace-normal"},"Evaluation Status",-1),Re={class:"p-3 max-w-8 whitespace-normal text-justify"},Be={class:"flex flex-col"},De={class:"font-bold"},Oe={class:"p-3 max-w-8 align-top whitespace-normal text-justify"},je={class:"h-auto p-3 flex flex-col justify-center"},ze=["href"],Ae={key:0},Ke={key:1},Te={class:"h-32 min-w-sm p-3 relative group"},qe=["onUpdate:modelValue","name","id","onInput"],Pe=["onClick"],We=e("i",{class:"fas fa-pen"},null,-1),Ye=[We],Ge=["onUpdate:modelValue","name","id","onFocus","onInput"],Je={class:"h-32 max-w-sm p-3 relative group"},Qe=["onUpdate:modelValue","name","id","onInput"],Xe=["onClick"],Ze=e("i",{class:"fas fa-pen"},null,-1),et=[Ze],tt=["onUpdate:modelValue","name","id","onFocus","onInput"],ot={class:"h-32 p-3 max-w-xs"},nt={class:"w-full h-full"},st=["onUpdate:modelValue","id","name","onChange"],at=e("option",{value:null},"Select status",-1),lt=e("option",{value:"Complied"},"Complied",-1),it=e("option",{value:"Not complied"},"Not complied",-1),dt=e("option",{value:"Not applicable"},"Not applicable",-1),rt=[at,lt,it,dt],ct={layout:de,data(){return{itemsLayout:"list"}},methods:{listLayout(){this.itemsLayout="list"},gridLayout(){this.itemsLayout="grid"}}},pt=Object.assign(ct,{__name:"CHED-Evaluation-Edit",props:["evaluation","items"],setup(v){const V=v,U=t=>{f.value&&(t.returnValue=!0)};oe(()=>{window.addEventListener("keydown",A),window.addEventListener("beforeunload",U)}),ne(()=>{window.removeEventListener("keydown",A),window.removeEventListener("beforeunload",U)});const E=l(!1),I=l(!1),L=l([]),N=l([]),y=l("");l(!1);const S=l([]),R=l([]),B=l([]),q=l([]),D=l([]),f=l(!1),C=l(!1);l(null);const O=l(null),F=l([]),H={findingsInput:S,evaluationStatus:B,actionButtons:q,evidenceFiles:D,saveBtn:O,findingstexteditor:L,recommendationstexteditor:N};function P(t,m){let a=S.value[t];a.style.height="128px";let c=a.scrollHeight+"px",u=384;a.style.height=Math.min(u,Math.max(128,parseInt(c)))+"px",f.value=!0,w(m)}function W(t,m){let a=R.value[t];a.style.height="128px";let c=a.scrollHeight+"px",u=384;a.style.height=Math.min(u,Math.max(128,parseInt(c)))+"px",f.value=!0,w(m)}function j(t,m){let a=H.findingstexteditor.value[t];a.style.height="128px";let c=a.scrollHeight+"px",u=384;a.style.height=Math.min(u,Math.max(128,parseInt(c)))+"px",f.value=!0,w(m)}function z(t,m){let a=H.recommendationstexteditor.value[t];a.style.height="128px";let c=a.scrollHeight+"px",u=384;a.style.height=Math.min(u,Math.max(128,parseInt(c)))+"px",f.value=!0,w(m)}function w(t){F.value.includes(t)||F.value.push(t)}function Y(t){f.value=!0,w(t)}function G(t){E.value=!0,y.value=t}function J(){E.value=!1}function Q(t){I.value=!0,y.value=t}function X(){I.value=!1}const A=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),H.saveBtn.value.click())};function Z(){ie.post("/ched/evaluation/update",{id:V.evaluation.id,items:V.items,rows:F.value},{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}return(t,m)=>{const a=_("Head"),c=_("page-title"),u=_("Link"),K=_("text-editor"),ee=_("content-table"),te=_("content-container"),b=_("Notification");return d(),r(M,null,[i(a,{title:"Evaluation Form"}),i(c,{title:"Program Evaluation"}),e("div",re,[e("div",null,[i(u,{href:"/ched/evaluation"},{default:g(()=>[ce]),_:1})]),e("a",{href:"/report/deficiency/"+v.evaluation.id+"/download",target:"_blank"},me,8,ue)]),e("div",pe,[e("div",fe,[_e,e("div",null,p(v.evaluation.institution_program.institution.name),1)]),e("div",ge,[e("div",ve,[xe,e("div",null,p(v.evaluation.institution_program.program.program),1)])]),e("div",we,[e("div",be,[ye,e("div",null," A.Y. "+p(v.evaluation.effectivity),1)])])]),i(te,{hasTopButton:!0},{"top-button":g(()=>[e("div",ke,[e("button",{onClick:Z,ref_key:"saveBtn",ref:O,class:"select-none cursor-pointer bg-blue-500 text-white px-2 w-fit h-10 rounded"},"Save Changes ",512),e("div",Ee,[e("div",Ie,[f.value?(d(),r("div",Se," *Changes unsaved. ")):t.$page.props.flash.updated?(d(),r("div",Ce,[Fe,h(" "+p(t.$page.props.flash.updated),1)])):(d(),r("div",He))])])])]),"main-content":g(()=>[i(ee,null,{"table-head":g(()=>[Me,$e,Ve,Ue,Le,Ne]),"table-body":g(()=>[(d(!0),r(M,null,T(v.items,(o,s)=>(d(),r("tr",{key:o.id,class:$(["align-top text-base",{"bg-slate-200":s%2==0}])},[e("td",Re,[e("div",Be,[e("div",De,p(o.area),1),e("div",null,p(o.minimumRequirement),1)])]),e("td",Oe,[e("div",{class:$(["bg-gray-600 text-white w-fit rounded px-2 mb-2",[{"bg-green-600":o.selfEvaluationStatus=="Complied"}]])},p(o.selfEvaluationStatus),3),e("div",null,p(o.actualSituation),1)]),e("td",je,[e("div",{class:$(["flex flex-col",{hidden:o.selfEvaluationStatus=="Not applicable"}]),ref_for:!0,ref_key:"evidenceFiles",ref:D},[(d(!0),r(M,null,T(o.evidence,(n,ut)=>(d(),r("div",{key:n.id,class:"w-full"},[e("a",{class:"px-1 text-gray-600 hover:text-blue-500 m-1 rounded",href:n.url,target:"_blank"},[n.type=="file"?(d(),r("span",Ae," File ")):n.type=="link"?(d(),r("span",Ke," Link ")):ae("",!0)],8,ze)]))),128))],2)]),e("td",Te,[x(e("textarea",{ref_for:!0,ref_key:"findingsInput",ref:S,"onUpdate:modelValue":n=>o.findings=n,name:"findings"+s,id:"findings"+s,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input findings here",onInput:n=>P(s,o.id)},`\r
                                            `,40,qe),[[k,o.findings]]),e("button",{onClick:n=>G(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Ye,8,Pe),i(K,{title:"Findings",showModal:E.value&&y.value==s,onClose:J},{default:g(()=>[x(e("textarea",{ref_for:!0,ref_key:"findingstexteditor",ref:L,"onUpdate:modelValue":n=>o.findings=n,name:"findingsEditor"+s,id:"findingsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>j(s),onInput:n=>j(s,o.id)},`\r
                                                `,40,Ge),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",Je,[x(e("textarea",{ref_for:!0,ref_key:"recommendationsInput",ref:R,"onUpdate:modelValue":n=>o.recommendations=n,name:"recommendations"+s,id:"recommendations"+s,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input comments here",onInput:n=>W(s,o.id)},`\r
                                            `,40,Qe),[[k,o.recommendations]]),e("button",{onClick:n=>Q(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},et,8,Xe),i(K,{title:"Comments/Recommendations",showModal:I.value&&y.value==s,onClose:X},{default:g(()=>[x(e("textarea",{ref_for:!0,ref_key:"recommendationstexteditor",ref:N,"onUpdate:modelValue":n=>o.findings=n,name:"recommendationsEditor"+s,id:"recommendationsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>z(s),onInput:n=>z(s,o.id)},`\r
                                                `,40,tt),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",ot,[e("div",nt,[x(e("select",{ref_for:!0,ref_key:"evaluationStatus",ref:B,"onUpdate:modelValue":n=>o.evaluationStatus=n,id:"evaluationStatus"+s,name:"evaluationStatus"+s,onChange:n=>Y(o.id),class:"p-1 rounded w-36 border-gray-400"},rt,40,st),[[le,o.evaluationStatus]])])])],2))),128))]),_:1})]),_:1}),i(b,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.flash.updated,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.flash.deleted,type:"success"},null,8,["message"]),i(b,{message:t.$page.props.errors.link,type:"failed"},null,8,["message"]),x(i(b,{message:"Saving...",type:"processing"},null,512),[[se,C.value]])],64)}}});export{pt as default};
