import{k as oe,l as ne,m as i,A as g,o as d,f as c,a as l,b as e,w as m,t as f,d as h,i as w,p as se,F as H,C as T,n as V,g as ae,B as k,D as ie,O as le}from"./app-ee162bce.js";import re from"./Layout-a469915b.js";const de={class:"md:mx-8 mx-3 mt-8 flex flex-row justify-between rounded relative"},ce=e("button",{class:"select-none w-24 h-10 border border-gray-500 rounded bg-white"},[e("i",{class:"fas fa-arrow-left mr-2"}),h(" Back ")],-1),ue=e("button",{class:"select-none px-2 rounded bg-white border border-gray-500 hover:bg-gray-700 hover:text-white h-10"},"Deficiency Report",-1),he={class:"flex flex-col xl:flex-row items-center justify-between w-auto rounded border border-gray-400 bg-white mx-3 md:mx-8 mt-5 p-3"},pe={class:"w-full text-left"},me={class:"w-auto flex flex-row items-center"},fe=e("i",{class:"fas fa-institution mr-3 text-blue-500"},null,-1),_e={class:"w-auto flex flex-row items-center"},ge=e("i",{class:"fas fa-book mr-3 text-blue-500"},null,-1),ve=e("span",null,null,-1),we={class:"w-auto flex flex-row items-center"},ye=e("i",{class:"fas fa-calendar-check mr-3 text-blue-500"},null,-1),be={class:"flex"},xe={class:"flex flex-row justify-between ml-2"},ke={class:"text-gray-500 h-10 lg:ml-1 flex items-center mr-5"},Ee={key:0,class:"text-red-500"},Ie={key:1},Se=e("i",{class:"fas fa-check-circle text-green-500 mr-1"},null,-1),Ce={key:2},Fe=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Area/"),e("br"),h("Minimum Requirement")],-1),Me=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Self-Evaluation Status/"),e("br"),h("Actual Situation ")],-1),He=e("th",{class:"p-3 align-bottom"},"Evidence",-1),Ve=e("th",{class:"p-3 align-bottom whitespace-normal"},"Findings",-1),$e=e("th",{class:"p-3 align-bottom whitespace-normal"},[h("Comments /"),e("br"),h("Recommendations")],-1),Be=e("th",{class:"p-3 align-bottom whitespace-normal"},"Evaluation Status",-1),Le={class:"p-3 min-w-12 whitespace-normal text-justify"},Ue={class:"flex flex-col"},Re={class:"font-bold"},Ne={class:"p-3 min-w-12 align-top whitespace-normal text-justify"},De={class:"h-auto min-w-8 p-3 flex flex-col justify-center"},je=["href"],Oe={key:0},Ae={key:1},ze={class:"h-32 min-w-16 p-3 relative group"},Ke=["onUpdate:modelValue","name","id","onInput"],Te=["onClick"],qe=e("i",{class:"fas fa-pen"},null,-1),Pe=[qe],We=["onUpdate:modelValue","name","id","onFocus","onInput"],Ye={class:"h-32 min-w-16 p-3 relative group"},Ge=["onUpdate:modelValue","name","id","onInput"],Je=["onClick"],Qe=e("i",{class:"fas fa-pen"},null,-1),Xe=[Qe],Ze=["onUpdate:modelValue","name","id","onFocus","onInput"],et={class:"h-32 p-3 min-w-8"},tt={class:"w-full h-full"},ot=["onUpdate:modelValue","id","name","onChange"],nt=e("option",{value:null},"Select status",-1),st=e("option",{value:"Complied"},"Complied",-1),at=e("option",{value:"Not complied"},"Not complied",-1),it=e("option",{value:"Not applicable"},"Not applicable",-1),lt=[nt,st,at,it],rt={layout:re,data(){return{itemsLayout:"list"}},methods:{listLayout(){this.itemsLayout="list"},gridLayout(){this.itemsLayout="grid"}}},ut=Object.assign(rt,{__name:"CHED-Evaluation-Edit",props:["evaluation","items","deficiencyReport","visitDate","evaluatedBy","reviewedBy","notedBy","auth"],setup(v){const $=v,B=t=>{_.value&&(t.returnValue=!0)};oe(()=>{window.addEventListener("keydown",z),window.addEventListener("beforeunload",B)}),ne(()=>{window.removeEventListener("keydown",z),window.removeEventListener("beforeunload",B)});const E=i(!1),I=i(!1),L=i([]),U=i([]),x=i("");i(!1);const S=i([]),R=i([]),N=i([]),q=i([]),D=i([]),_=i(!1),C=i(!1),j=i(null),F=i([]),M={findingsInput:S,evaluationStatus:N,actionButtons:q,evidenceFiles:D,saveBtn:j,findingstexteditor:L,recommendationstexteditor:U};function P(t,p){let a=S.value[t];a.style.height="128px";let u=a.scrollHeight+"px",r=384;a.style.height=Math.min(r,Math.max(128,parseInt(u)))+"px",_.value=!0,y(p)}function W(t,p){let a=R.value[t];a.style.height="128px";let u=a.scrollHeight+"px",r=384;a.style.height=Math.min(r,Math.max(128,parseInt(u)))+"px",_.value=!0,y(p)}function O(t,p){let a=M.findingstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",r=384;a.style.height=Math.min(r,Math.max(128,parseInt(u)))+"px",_.value=!0,y(p)}function A(t,p){let a=M.recommendationstexteditor.value[t];a.style.height="128px";let u=a.scrollHeight+"px",r=384;a.style.height=Math.min(r,Math.max(128,parseInt(u)))+"px",_.value=!0,y(p)}function y(t){F.value.includes(t)||F.value.push(t)}function Y(t){_.value=!0,y(t)}function G(t){E.value=!0,x.value=t}function J(){E.value=!1}function Q(t){I.value=!0,x.value=t}function X(){I.value=!1}const z=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),M.saveBtn.value.click())};function Z(){le.post("/ched/evaluation/update",{id:$.evaluation.id,items:$.items,rows:F.value},{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}return(t,p)=>{const a=g("Head"),u=g("page-title"),r=g("Link"),K=g("text-editor"),ee=g("content-table"),te=g("content-container"),b=g("Notification");return d(),c(H,null,[l(a,{title:"Evaluation Form"}),l(u,{title:"Program Evaluation"}),e("div",de,[e("div",null,[l(r,{href:"/evaluation"},{default:m(()=>[ce]),_:1})]),e("div",null,[l(r,{href:"/ched/evaluation/"+v.evaluation.id+"/deficiency-report"},{default:m(()=>[ue]),_:1},8,["href"])])]),e("div",he,[e("div",pe,[e("div",me,[fe,e("div",null,f(v.evaluation.institution_program.institution.name),1)]),e("div",_e,[ge,e("div",null,[h(f(v.evaluation.institution_program.program.program)+" ",1),ve])]),e("div",we,[ye,e("div",null,"A.Y. "+f(v.evaluation.effectivity),1)])])]),l(te,{hasTopButton:!0},{"top-button":m(()=>[e("div",be,[e("button",{onClick:Z,ref_key:"saveBtn",ref:j,class:"select-none cursor-pointer bg-blue-500 text-white px-2 w-fit h-10 rounded"},"Save Changes ",512),e("div",xe,[e("div",ke,[_.value?(d(),c("div",Ee," *Changes unsaved. ")):t.$page.props.flash.updated?(d(),c("div",Ie,[Se,h(" "+f(t.$page.props.flash.updated),1)])):(d(),c("div",Ce))])])])]),"main-content":m(()=>[l(ee,null,{"table-head":m(()=>[Fe,Me,He,Ve,$e,Be]),"table-body":m(()=>[(d(!0),c(H,null,T(v.items,(o,s)=>(d(),c("tr",{key:o.id,class:V(["align-top text-base",{"bg-slate-200":s%2==0}])},[e("td",Le,[e("div",Ue,[e("div",Re,f(o.area),1),e("div",null,f(o.minimumRequirement),1)])]),e("td",Ne,[e("div",{class:V(["bg-gray-600 text-white w-fit rounded px-2 mb-2",[{"bg-green-600":o.selfEvaluationStatus=="Complied"}]])},f(o.selfEvaluationStatus),3),e("div",null,f(o.actualSituation),1)]),e("td",De,[e("div",{class:V(["flex flex-col",{hidden:o.selfEvaluationStatus=="Not applicable"}]),ref_for:!0,ref_key:"evidenceFiles",ref:D},[(d(!0),c(H,null,T(o.evidence,n=>(d(),c("div",{key:n.id,class:"w-full"},[e("a",{class:"px-1 text-gray-600 hover:text-blue-500 m-1 rounded",href:n.url,target:"_blank"},[n.type=="file"?(d(),c("span",Oe," File ")):n.type=="link"?(d(),c("span",Ae," Link ")):ae("",!0)],8,je)]))),128))],2)]),e("td",ze,[w(e("textarea",{ref_for:!0,ref_key:"findingsInput",ref:S,"onUpdate:modelValue":n=>o.findings=n,name:"findings"+s,id:"findings"+s,class:"w-full min-w-md h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input findings here",onInput:n=>P(s,o.id)},`\r
                                            `,40,Ke),[[k,o.findings]]),e("button",{onClick:n=>G(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Pe,8,Te),l(K,{title:"Findings",showModal:E.value&&x.value==s,onClose:J},{default:m(()=>[w(e("textarea",{ref_for:!0,ref_key:"findingstexteditor",ref:L,"onUpdate:modelValue":n=>o.findings=n,name:"findingsEditor"+s,id:"findingsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>O(s),onInput:n=>O(s,o.id)},`\r
                                                `,40,We),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",Ye,[w(e("textarea",{ref_for:!0,ref_key:"recommendationsInput",ref:R,"onUpdate:modelValue":n=>o.recommendations=n,name:"recommendations"+s,id:"recommendations"+s,class:"w-full h-32 rounded border-gray-500 resize-none group custom-scrollbar",placeholder:"Input comments here",onInput:n=>W(s,o.id)},`\r
                                            `,40,Ge),[[k,o.recommendations]]),e("button",{onClick:n=>Q(s),class:"absolute bottom-4 right-10 text-gray-500 hover:text-black group-focus-within:visible invisible tooltipForActions","data-tooltip":"Open editor"},Xe,8,Je),l(K,{title:"Comments/Recommendations",showModal:I.value&&x.value==s,onClose:X},{default:m(()=>[w(e("textarea",{ref_for:!0,ref_key:"recommendationstexteditor",ref:U,"onUpdate:modelValue":n=>o.findings=n,name:"recommendationsEditor"+s,id:"recommendationsEditor"+s,class:"w-full h-32 rounded border-gray-500 resize-none group",placeholder:"Input findings here",onFocus:n=>A(s),onInput:n=>A(s,o.id)},`\r
                                                `,40,Ze),[[k,o.findings]])]),_:2},1032,["showModal"])]),e("td",et,[e("div",tt,[w(e("select",{ref_for:!0,ref_key:"evaluationStatus",ref:N,"onUpdate:modelValue":n=>o.evaluationStatus=n,id:"evaluationStatus"+s,name:"evaluationStatus"+s,onChange:n=>Y(o.id),class:"p-1 rounded w-36 border-gray-400"},lt,40,ot),[[ie,o.evaluationStatus]])])])],2))),128))]),_:1})]),_:1}),l(b,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),l(b,{message:t.$page.props.flash.updated,type:"success"},null,8,["message"]),l(b,{message:t.$page.props.flash.deleted,type:"success"},null,8,["message"]),l(b,{message:t.$page.props.errors.link,type:"failed"},null,8,["message"]),w(l(b,{message:"Saving...",type:"processing"},null,512),[[se,C.value]])],64)}}});export{ut as default};
