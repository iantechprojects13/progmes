import{m as r,T as ne,E as le,A as h,o,f as s,a as l,w as a,F as O,i as d,D as V,u as _,b as e,B as z,z as ie,C as re,n as R,t as L,g as S,p as m,d as N,O as f}from"./app-a1d3aa91.js";import ce from"./Layout-8eb335a9.js";const de=e("option",{value:"2023-2024"},"A.Y. 2023-24",-1),ue=e("option",{value:"2024-2025"},"A.Y. 2024-25",-1),he=e("option",{value:"2025-2026"},"A.Y. 2025-26",-1),_e=e("option",{value:"2026-2027"},"A.Y. 2026-27",-1),ve=e("option",{value:"2027-2028"},"A.Y. 2027-28",-1),pe=e("option",{value:"2028-2029"},"A.Y. 2028-29",-1),fe=e("option",{value:"2029-2030"},"A.Y. 2029-30",-1),ge=[de,ue,he,_e,ve,pe,fe],be=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-blue-500 border-b-4 relative font-bold border-blue-500"}," Evaluation ",-1),me=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-gray-700 hover:text-black"}," Monitored ",-1),we={class:"w-full flex flex-row relative items-center"},ye=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),xe={class:"mr-1"},ke=e("i",{class:"fas fa-filter"},null,-1),Ce=[ke],Se=e("button",{class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),Me=e("th",{class:"p-2 pl-5"},"Program/Institution",-1),Ee=e("th",{class:"p-2"},"Status",-1),Fe=e("th",{class:"p-2"},"Progress",-1),Ae=e("th",{class:"p-2 pr-5 text-right"},[e("i",{class:"fas fa-ellipsis-v"})],-1),Te={key:0},Ye=e("td",{colspan:"3",class:"p-2 py-10 text-center"},"No evaluation tool found",-1),Ie=[Ye],$e={class:"p-2 pl-5"},Ve={class:"font-bold"},Le={class:"p-2"},Ne={key:0,class:"bg-red-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Ue={key:1,class:"bg-blue-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Be={key:2,class:"bg-emerald-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Pe={key:3,class:"bg-emerald-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},He={class:"p-2"},De={class:"font-bold text-sm px-1 py-0.5 rounded w-fit"},Oe={class:"p-2 pr-5 text-right whitespace-nowrap"},ze=["onClick"],Re=e("i",{class:"fas fa-eye"},null,-1),Ke=[Re],je=["onClick"],qe=e("i",{class:"fas fa-edit"},null,-1),Ge=[qe],Je=["onClick"],Qe=e("i",{class:"fas fa-unlock"},null,-1),We=[Qe],Xe=["onClick"],Ze=e("i",{class:"fas fa-lock"},null,-1),et=[Ze],tt=["onClick"],ot=e("i",{class:"fas fa-envelope"},null,-1),st=[ot],at=["onClick"],nt=e("i",{class:"fas fa-check"},null,-1),lt=[nt],it={class:"flex flex-col"},rt=e("label",{for:"status"},"Status",-1),ct=e("option",{value:null},"All",-1),dt=e("option",{value:"In progress"},"In Progress",-1),ut=e("option",{value:"Submitted"},"Ready for visit",-1),ht=[ct,dt,ut],_t={class:"mt-3 flex flex-col"},vt=e("label",{for:"show"},"Items per page",-1),pt=e("option",{value:"25"},"25",-1),ft=e("option",{value:"50"},"50",-1),gt=e("option",{value:"100"},"100",-1),bt=e("option",{value:"200"},"200",-1),mt=[pt,ft,gt,bt],wt={key:0},yt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),xt=[yt],kt={key:1},Ct=e("label",{for:"emailBody",class:"font-bold mb-2"},"Message",-1),St=["disabled"],Mt={key:0},Et=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Ft=[Et],At={key:1},Tt=["disabled"],Yt={key:0},It=e("i",{class:"fas fa-spinner animate-spin"},null,-1),$t=[It],Vt={key:1},Lt=["disabled"],Nt={key:0},Ut=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Bt=[Ut],Pt={key:1},Ht=["disabled"],Dt={key:0},Ot=e("i",{class:"fas fa-spinner animate-spin"},null,-1),zt=[Ot],Rt={key:1},Kt={layout:ce},Gt=Object.assign(Kt,{__name:"CHED-Evaluation-Select",props:["complianceTools","filters","canEvaluate","canEmail"],setup(u){const v=u,w=r(null),M=r(!1),y=r(!1),E=r(!1),x=r(!1),F=r(!1),k=r(!1),A=r(!1),g=r(!1),c=ne({show:v.filters.show!=null?v.filters.show:null,search:v.filters.search,academicYear:v.filters.academicYear!=null?v.filters.academicYear:null,status:v.filters.status!=null?v.filters.status:null});function T(){A.value=!A.value}function U(){c.get("/ched/evaluation",{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1},preserveState:!1,preserveScroll:!0})}function K(){c.get("/ched/evaluation",{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1,T()},preserveState:!0,preserveScroll:!0})}const Y=r(!1),C=r(!1),j=r(0);function B(){Y.value=!Y.value}function q(i){j.value=i}const p=le({toolId:null,body:null});function G(){f.post("/evaluation/notify",p,{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}function J(i){f.get("/ched/evaluation/"+i+"/evaluate",{preserveScroll:!0,preserveState:!0})}function Q(i){f.get("/ched/evaluation/"+i+"/view")}function I(i){w.value=i}function W(){f.post("/ched/evaluation/lock",{id:w.value},{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1},preserveState:!1,preserveScroll:!0})}function X(){f.post("/ched/evaluation/unlock",{id:w.value},{onStart:()=>{x.value=!0},onFinish:()=>{x.value=!1},preserveState:!1,preserveScroll:!0})}function Z(i){f.post("/ched/evaluation/monitored",{id:w.value},{onStart:()=>{k.value=!0},onFinish:()=>{k.value=!1},preserveState:!1,preserveScroll:!0})}return(i,n)=>{const ee=h("Head"),te=h("page-title"),P=h("Link"),oe=h("content-table"),se=h("content-container"),H=h("modal"),$=h("confirmation"),D=h("Notification");return o(),s(O,null,[l(ee,{title:"Program Evaluation"}),l(te,{title:"Program Evaluation"}),l(se,{hasSearch:"true",pageTitle:"Evaluation",hasNavigation:!0,page:"evaluation",hasTopButton:!0,hasFilters:!0,data_list:u.complianceTools},{"top-button":a(()=>[d(e("select",{onChange:U,"onUpdate:modelValue":n[0]||(n[0]=t=>_(c).academicYear=t),id:"academicYearSelect",class:"h-10 border-gray-400 hover:border-gray-500 cursor-pointer rounded text-sm"},ge,544),[[V,_(c).academicYear]])]),navigation:a(()=>[be,l(P,{href:i.route("ched.evaluation.monitored")},{default:a(()=>[me]),_:1},8,["href"])]),search:a(()=>[e("div",we,[ye,d(e("input",{onKeydown:ie(U,["enter"]),"onUpdate:modelValue":n[1]||(n[1]=t=>_(c).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[z,_(c).search]])])]),options:a(()=>[e("div",xe,[e("button",{onClick:T,class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},Ce),l(P,{href:"/evaluation"},{default:a(()=>[Se]),_:1})])]),"main-content":a(()=>[l(oe,null,{"table-head":a(()=>[Me,Ee,Fe,Ae]),"table-body":a(()=>[u.complianceTools.data.length==0?(o(),s("tr",Te,Ie)):(o(!0),s(O,{key:1},re(u.complianceTools.data,(t,ae)=>(o(),s("tr",{key:t.id,class:R(["hover:bg-gray-200",{"bg-gray-100":ae%2==1}])},[e("td",$e,[e("div",Ve,L(t.program),1),e("div",null,L(t.institution),1)]),e("td",Le,[t.status=="Locked"?(o(),s("div",Ne," Locked ")):S("",!0),t.status=="In progress"?(o(),s("div",Ue," In Progress ")):S("",!0),t.status=="Submitted"?(o(),s("div",Be," Ready for visit ")):S("",!0),t.status=="For re-evaluation"?(o(),s("div",Pe," For re-evaluation ")):S("",!0)]),e("td",He,[e("div",De,L(t.progress)+"% ",1)]),e("td",Oe,[e("button",{onClick:b=>Q(t.id),class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-green-500 hover:text-green-600 tooltipForActions","data-tooltip":"View"},Ke,8,ze),d(e("button",{onClick:b=>J(t.id),class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Evaluate"},Ge,8,je),[[m,u.canEvaluate]]),t.isLocked?d((o(),s("button",{key:0,onClick:b=>{I(t.id),E.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-gray-500 hover:text-gray-600 tooltipForActions","data-tooltip":"Unlock"},We,8,Je)),[[m,u.canEvaluate]]):d((o(),s("button",{key:1,onClick:b=>{I(t.id),M.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-red-500 hover:text-red-600 tooltipForActions","data-tooltip":"Lock"},et,8,Xe)),[[m,u.canEvaluate]]),d(e("button",{onClick:b=>{q(t.progress),B(),p.toolId=t.id},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-orange-500 hover:text-orange-600 tooltipForActions","data-tooltip":"Send Email"},st,8,tt),[[m,u.canEmail]]),d(e("button",{onClick:b=>{I(t.id),F.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Mark as monitored"},lt,8,at),[[m,u.canEvaluate]])])],2))),128))]),_:1})]),_:1},8,["data_list"]),l(H,{showModal:A.value,onClose:T,width:"sm",height:"long",title:"Filters"},{"custom-button":a(()=>[e("button",{onClick:K,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[g.value?(o(),s("span",wt,xt)):(o(),s("span",kt,"Apply"))])]),default:a(()=>[e("div",null,[e("div",it,[rt,d(e("select",{"onUpdate:modelValue":n[2]||(n[2]=t=>_(c).status=t),id:"status",class:"rounded border-gray-400"},ht,512),[[V,_(c).status]])]),e("div",_t,[vt,d(e("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>_(c).show=t),id:"show",class:"rounded border-gray-400"},mt,512),[[V,_(c).show]])])])]),_:1},8,["showModal"]),l(H,{showModal:Y.value,title:"Compose Email",onClose:B,width:"xl",height:"long"},{"custom-button":a(()=>[e("button",{onClick:G,disabled:C.value||p.body=="",class:R(["text-white bg-blue-600 hover:bg-blue-700 w-24 py-2 px-3 rounded border",[{"bg-gray-600 hover:bg-gray-700":p.body==""}]])},[C.value?(o(),s("span",Mt,Ft)):(o(),s("span",At,"Send"))],10,St)]),default:a(()=>[e("div",null,[Ct,d(e("textarea",{class:"w-full h-52 resize-none",placeholder:"Compose email here",id:"emailBody","onUpdate:modelValue":n[4]||(n[4]=t=>p.body=t)},`\r
            `,512),[[z,p.body]])])]),_:1},8,["showModal"]),l($,{showModal:M.value,onClose:n[5]||(n[5]=t=>M.value=!1),title:"Lock Evaluation Tool",width:"md",height:"short"},{message:a(()=>[N(" Are you sure you want to lock this compliance evaluation tool? This action will prevent any further inputs from HEI. ")]),buttons:a(()=>[e("button",{onClick:W,disabled:y.value,class:"select-none text-white h-10 w-20 rounded bg-red-500"},[y.value?(o(),s("span",Yt,$t)):(o(),s("span",Vt,"Lock"))],8,Tt)]),_:1},8,["showModal"]),l($,{showModal:E.value,onClose:n[6]||(n[6]=t=>E.value=!1),title:"Unlock Evaluation Tool",width:"md",height:"short"},{message:a(()=>[N(" Are you sure you want to unlock this compliance evaluation tool? This action will enable inputs from HEI. ")]),buttons:a(()=>[e("button",{onClick:X,disabled:x.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[x.value?(o(),s("span",Nt,Bt)):(o(),s("span",Pt,"Unlock"))],8,Lt)]),_:1},8,["showModal"]),l($,{showModal:F.value,onClose:n[7]||(n[7]=t=>F.value=!1),title:"Mark as Monitored",width:"md",height:"short"},{message:a(()=>[N(" Are you sure you want to mark this compliance evaluation tool as monitored? Once marked as monitored, it cannot be edited. ")]),buttons:a(()=>[e("button",{onClick:Z,disabled:k.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[k.value?(o(),s("span",Dt,zt)):(o(),s("span",Rt,"Confirm"))],8,Ht)]),_:1},8,["showModal"]),l(D,{message:i.$page.props.flash.success,type:"success"},null,8,["message"]),l(D,{message:i.$page.props.flash.failed,type:"failed"},null,8,["message"])],64)}}});export{Gt as default};
