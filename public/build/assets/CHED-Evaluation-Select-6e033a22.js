import{m as c,T as te,h as oe,E as se,A as u,o as s,f as a,a as i,w as o,F as U,b as e,i as d,B as P,u as _,z as ae,D as H,C as ne,n as le,t as $,g as Y,p as f,d as I,O as v}from"./app-251762d9.js";import ie from"./Layout-a6df9f1a.js";const ce=e("button",{class:"select-none text-blue-500 h-10 mr-8 border-b-2 font-bold border-blue-500"}," Evaluation ",-1),re=e("button",{class:"select-none text-gray-500 hover:text-black"}," Archived ",-1),de={class:"w-full flex justify-end relative"},ue=e("i",{class:"fas fa-search"},null,-1),he=[ue],_e=e("option",{value:"2023-2024"},"A.Y. 2023-24",-1),ve=e("option",{value:"2024-2025"},"A.Y. 2024-25",-1),pe=e("option",{value:"2025-2026"},"A.Y. 2025-26",-1),fe=e("option",{value:"2026-2027"},"A.Y. 2026-27",-1),be=e("option",{value:"2027-2028"},"A.Y. 2027-28",-1),ge=e("option",{value:"2028-2029"},"A.Y. 2028-29",-1),me=e("option",{value:"2029-2030"},"A.Y. 2029-30",-1),we=[_e,ve,pe,fe,be,ge,me],ye={class:"mr-1"},ke=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),xe=e("th",{class:"p-3 pl-5 border-b border-gray-400"},"Program/Institution",-1),Ce=e("th",{class:"p-3 border-b border-gray-400"},"Status",-1),Se=e("th",{class:"p-3 border-b border-gray-400"},"Progress",-1),Ee=e("th",{class:"p-3 border-b border-gray-400 text-right"},[e("i",{class:"fas fa-ellipsis-v"})],-1),Ae={key:0},Me=e("td",{colspan:"3",class:"p-3 py-10 text-center"},"No evaluation tool found",-1),Fe=[Me],Te={class:"p-3 pl-5"},$e={class:"font-bold"},Ye={class:"p-3"},Ie={key:0,class:"bg-red-500 text-white w-fit px-1 py-0.5 rounded text-xs"},Le={key:1,class:"bg-blue-500 text-white w-fit px-1 py-0.5 rounded text-xs"},Ve={key:2,class:"bg-emerald-500 text-white w-fit px-1 py-0.5 rounded text-xs"},Ne={class:"p-3"},Be={class:"font-bold text-sm px-1 py-0.5 rounded w-fit"},Ue={class:"p-3 text-right"},Pe=["onClick"],He=e("i",{class:"fas fa-eye"},null,-1),De=[He],ze=["onClick"],Oe=e("i",{class:"fas fa-edit"},null,-1),Re=[Oe],je=["onClick"],qe=e("i",{class:"fas fa-unlock"},null,-1),Ke=[qe],We=["onClick"],Ge=e("i",{class:"fas fa-lock"},null,-1),Je=[Ge],Qe=["onClick"],Xe=e("i",{class:"fas fa-envelope"},null,-1),Ze=[Xe],et=["onClick"],tt=e("i",{class:"fas fa-archive"},null,-1),ot=[tt],st=e("div",{class:"mr-2"},"Items per page",-1),at=e("option",{value:"25"},"25",-1),nt=e("option",{value:50},"50",-1),lt=e("option",{value:75},"75",-1),it=e("option",{value:100},"100",-1),ct=e("option",{value:200},"200",-1),rt=[at,nt,lt,it,ct],dt=["disabled"],ut={key:0},ht=e("i",{class:"fas fa-spinner animate-spin"},null,-1),_t=[ht],vt={key:1},pt=["disabled"],ft={key:0},bt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),gt=[bt],mt={key:1},wt=["disabled"],yt={key:0},kt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),xt=[kt],Ct={key:1},St=e("label",{for:"emailBody",class:"font-bold mb-2"},"Message",-1),Et=["disabled"],At={key:0},Mt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Ft=[Mt],Tt={key:1},$t={layout:ie},Lt=Object.assign($t,{__name:"CHED-Evaluation-Select",props:["complianceTools","filters","canEvaluate","canEmail"],setup(r){const C=r,b=c(null),S=c(!1),g=c(!1),E=c(!1),m=c(!1),A=c(!1),w=c(!1),h=te({academicYear:C.filters.academicYear,show:C.filters.show,search:C.filters.search}),M=c(!1),y=c(!1),L=c(0);function V(){M.value=!M.value}function D(l){L.value=l}const z=oe(()=>`We wanted to inform you of the current status of your program self-evaluation. As of now, your progress stands at ${L.value}%. If you have any questions or need assistance, please feel free to contact us.`),k=se({toolId:null,body:z});function O(){v.post("/evaluation/notify",k,{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1},preserveState:!1,preserveScroll:!0})}function R(l){v.get("/ched/evaluation/"+l+"/evaluate",{preserveScroll:!0,preserveState:!1})}function j(l){v.get("/ched/evaluation/"+l+"/view")}function x(){h.get("/ched/evaluation",{preserveState:!0,preserveScroll:!0})}function F(l){b.value=l}function q(){v.post("/ched/evaluation/lock",{id:b.value},{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1},preserveState:!1,preserveScroll:!0})}function K(){v.post("/ched/evaluation/unlock",{id:b.value},{onStart:()=>{m.value=!0},onFinish:()=>{m.value=!1},preserveState:!1,preserveScroll:!0})}function W(l){v.post("/ched/evaluation/archive",{id:b.value},{onStart:()=>{w.value=!0},onFinish:()=>{w.value=!1},preserveState:!1,preserveScroll:!0})}return(l,n)=>{const G=u("Head"),J=u("page-title"),N=u("Link"),Q=u("content-table"),X=u("content-container"),T=u("confirmation-modal"),Z=u("modal"),B=u("Notification");return s(),a(U,null,[i(G,{title:"Program Self-Evaluation"}),i(J,{title:"Program Evaluation"}),i(X,{hasSearch:"true",pageTitle:"Monitoring / Evaluation",hasNavigation:!0,page:"evaluation",hasTopButton:!0,hasFilters:!0,data_list:r.complianceTools},{navigation:o(()=>[e("div",null,[ce,i(N,{href:l.route("ched.evaluation.archive")},{default:o(()=>[re]),_:1},8,["href"])])]),search:o(()=>[e("div",de,[d(e("input",{onKeydown:ae(x,["enter"]),"onUpdate:modelValue":n[0]||(n[0]=t=>_(h).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded border border-gray-400 bg-slate-100 h-10 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[P,_(h).search]]),e("button",{onClick:x,class:"text-gray-700 hover:text-black active:text-blue-500 h-10 w-10 rounded absolute right-2"},he)])]),"top-button":o(()=>[d(e("select",{onChange:x,"onUpdate:modelValue":n[1]||(n[1]=t=>_(h).academicYear=t),id:"academicYearSelect",class:"h-10 rounded text-sm"},we,544),[[H,_(h).academicYear]])]),options:o(()=>[e("div",ye,[i(N,{href:"/evaluation"},{default:o(()=>[ke]),_:1})])]),"main-content":o(()=>[i(Q,null,{"table-head":o(()=>[xe,Ce,Se,Ee]),"table-body":o(()=>[r.complianceTools.data.length==0?(s(),a("tr",Ae,Fe)):(s(!0),a(U,{key:1},ne(r.complianceTools.data,(t,ee)=>(s(),a("tr",{key:t.id,class:le(["hover:bg-slate-300",{"bg-slate-200":ee%2==0}])},[e("td",Te,[e("div",null,$(t.program),1),e("div",$e,$(t.institution),1)]),e("td",Ye,[t.status=="Locked"?(s(),a("div",Ie," Locked ")):Y("",!0),t.status=="In progress"?(s(),a("div",Le," In Progress ")):Y("",!0),t.status=="Submitted"?(s(),a("div",Ve," Ready for visit ")):Y("",!0)]),e("td",Ne,[e("div",Be,$(t.progress)+"% ",1)]),e("td",Ue,[e("button",{onClick:p=>j(t.id),class:"select-none w-10 h-10 bg-green-600 hover:bg-green-700 text-white rounded mr-1 tooltipForActions","data-tooltip":"View"},De,8,Pe),d(e("button",{onClick:p=>R(t.id),class:"select-none w-10 h-10 text-white bg-blue-500 hover:bg-blue-600 rounded mr-1 tooltipForActions","data-tooltip":"Evaluate"},Re,8,ze),[[f,r.canEvaluate]]),t.isLocked?d((s(),a("button",{key:0,onClick:p=>{F(t.id),E.value=!0},class:"select-none w-10 h-10 text-white bg-red-500 hover:bg-red-600 rounded mr-1 tooltipForActions","data-tooltip":"Unlock"},Ke,8,je)),[[f,r.canEvaluate]]):d((s(),a("button",{key:1,onClick:p=>{F(t.id),S.value=!0},class:"select-none w-10 h-10 text-white bg-red-500 hover:bg-red-600 rounded mr-1 tooltipForActions","data-tooltip":"Lock"},Je,8,We)),[[f,r.canEvaluate]]),d(e("button",{onClick:p=>{D(t.progress),V(),k.toolId=t.id},class:"select-none w-10 h-10 text-white bg-orange-500 hover:bg-orange-600 rounded mr-1 tooltipForActions","data-tooltip":"Send Email"},Ze,8,Qe),[[f,r.canEmail]]),d(e("button",{onClick:p=>{F(t.id),A.value=!0},class:"select-none w-10 h-10 text-white bg-gray-500 hover:bg-gray-600 rounded tooltipForActions","data-tooltip":"Archive"},ot,8,et),[[f,r.canEvaluate]])])],2))),128))]),_:1})]),"show-item":o(()=>[st,d(e("select",{"onUpdate:modelValue":n[2]||(n[2]=t=>_(h).show=t),id:"showResultCount",onChange:x,class:"select-none rounded h-8 w-20 p-1 text-sm"},rt,544),[[H,_(h).show]])]),_:1},8,["data_list"]),i(T,{showModal:S.value,onClose:n[3]||(n[3]=t=>S.value=!1),title:"Lock Evaluation Tool"},{message:o(()=>[I(" Are you sure you want to lock this compliance evaluation tool? This action will prevent any further inputs from HEI. ")]),buttons:o(()=>[e("button",{onClick:q,disabled:g.value,class:"select-none text-white h-10 w-20 rounded bg-red-500"},[g.value?(s(),a("span",ut,_t)):(s(),a("span",vt,"Lock"))],8,dt)]),_:1},8,["showModal"]),i(T,{showModal:E.value,onClose:n[4]||(n[4]=t=>E.value=!1),title:"Unlock Evaluation Tool"},{message:o(()=>[I(" Are you sure you want to unlock this compliance evaluation tool? This action will enable inputs from HEI. ")]),buttons:o(()=>[e("button",{onClick:K,disabled:m.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[m.value?(s(),a("span",ft,gt)):(s(),a("span",mt,"Unlock"))],8,pt)]),_:1},8,["showModal"]),i(T,{showModal:A.value,onClose:n[5]||(n[5]=t=>A.value=!1),title:"Archive Evaluation Tool"},{message:o(()=>[I(" Are you sure you want to archive this compliance evaluation tool? ")]),buttons:o(()=>[e("button",{onClick:W,disabled:w.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[w.value?(s(),a("span",yt,xt)):(s(),a("span",Ct,"Archive"))],8,wt)]),_:1},8,["showModal"]),i(Z,{showModal:M.value,title:"Compose Email",onClose:V},{"custom-button":o(()=>[e("button",{onClick:O,disabled:y.value,class:"text-white bg-blue-600 hover:bg-blue-700 w-24 py-2 px-3 rounded border"},[y.value?(s(),a("span",At,Ft)):(s(),a("span",Tt,"Send"))],8,Et)]),default:o(()=>[e("div",null,[St,d(e("textarea",{class:"w-full h-52 resize-none",placeholder:"Compose email here",id:"emailBody","onUpdate:modelValue":n[6]||(n[6]=t=>k.body=t)},`\r
            `,512),[[P,k.body]])])]),_:1},8,["showModal"]),i(B,{message:l.$page.props.flash.success,type:"success"},null,8,["message"]),i(B,{message:l.$page.props.flash.failed,type:"failed"},null,8,["message"])],64)}}});export{Lt as default};
