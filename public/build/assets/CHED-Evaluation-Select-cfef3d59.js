import{m as l,T as ne,E as le,A as p,o,f as s,a as i,w as a,F as R,i as c,D as V,u as v,b as e,B as L,z as ie,C as re,n as z,t as U,g as S,p as m,d as B,O as f}from"./app-71e3066c.js";import ce from"./Layout-070d85fc.js";const de=e("option",{value:"2023-2024"},"A.Y. 2023-24",-1),ue=e("option",{value:"2024-2025"},"A.Y. 2024-25",-1),he=e("option",{value:"2025-2026"},"A.Y. 2025-26",-1),_e=e("option",{value:"2026-2027"},"A.Y. 2026-27",-1),pe=e("option",{value:"2027-2028"},"A.Y. 2027-28",-1),ve=e("option",{value:"2028-2029"},"A.Y. 2028-29",-1),fe=e("option",{value:"2029-2030"},"A.Y. 2029-30",-1),ge=[de,ue,he,_e,pe,ve,fe],be=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-blue-500 border-b-4 relative font-bold border-blue-500"}," Evaluation ",-1),me=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-gray-700 hover:text-black"}," Monitored ",-1),we={class:"w-full flex flex-row relative items-center"},ye=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),xe={class:"mr-1"},ke=e("i",{class:"fas fa-filter"},null,-1),Ce=[ke],Se=e("button",{class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),Ee=e("th",{class:"p-2 pl-5"},"Program/Institution",-1),Me=e("th",{class:"p-2"},"Status",-1),Fe=e("th",{class:"p-2"},"Progress",-1),Ae=e("th",{class:"p-2 pr-5 text-right"},[e("i",{class:"fas fa-ellipsis-v"})],-1),Te={key:0},Ye=e("td",{colspan:"3",class:"p-2 py-10 text-center"},"No evaluation tool found",-1),Ie=[Ye],$e={class:"p-2 pl-5"},Ve={class:"font-bold"},Le={class:"p-2"},Ue={key:0,class:"bg-red-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Be={key:1,class:"bg-blue-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Ne={key:2,class:"bg-emerald-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},He={key:3,class:"bg-emerald-500 text-white w-fit px-1 py-0.5 rounded text-xs whitespace-nowrap"},Pe={class:"p-2"},De={class:"font-bold text-sm px-1 py-0.5 rounded w-fit"},Oe={class:"p-2 pr-5 text-right whitespace-nowrap"},Re=["onClick"],ze=e("i",{class:"fas fa-eye"},null,-1),Ke=[ze],je=["onClick"],qe=e("i",{class:"fas fa-edit"},null,-1),Ge=[qe],Je=["onClick"],Qe=e("i",{class:"fas fa-unlock"},null,-1),We=[Qe],Xe=["onClick"],Ze=e("i",{class:"fas fa-lock"},null,-1),et=[Ze],tt=["onClick"],ot=e("i",{class:"fas fa-envelope"},null,-1),st=[ot],at=["onClick"],nt=e("i",{class:"fas fa-check"},null,-1),lt=[nt],it={class:"flex flex-col"},rt=e("label",{for:"status"},"Status",-1),ct=e("option",{value:null},"All",-1),dt=e("option",{value:"In progress"},"In Progress",-1),ut=e("option",{value:"Submitted"},"Ready for visit",-1),ht=[ct,dt,ut],_t={class:"mt-3 flex flex-col"},pt=e("label",{for:"show"},"Items per page",-1),vt=e("option",{value:"25"},"25",-1),ft=e("option",{value:"50"},"50",-1),gt=e("option",{value:"100"},"100",-1),bt=e("option",{value:"200"},"200",-1),mt=[vt,ft,gt,bt],wt={key:0},yt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),xt=[yt],kt={key:1},Ct=e("label",{for:"emailBody",class:"font-bold mb-2"},"Message",-1),St={class:"mt-3"},Et=e("label",{for:"emailBody",class:"font-bold mb-2"},"Recipient",-1),Mt=["disabled"],Ft={key:0},At=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Tt=[At],Yt={key:1},It=["disabled"],$t={key:0},Vt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Lt=[Vt],Ut={key:1},Bt=["disabled"],Nt={key:0},Ht=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Pt=[Ht],Dt={key:1},Ot=["disabled"],Rt={key:0},zt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Kt=[zt],jt={key:1},qt={layout:ce},Qt=Object.assign(qt,{__name:"CHED-Evaluation-Select",props:["complianceTools","filters","canEvaluate","canEmail","programHeadEmail"],setup(u){const h=u,w=l(null),E=l(!1),y=l(!1),M=l(!1),x=l(!1),F=l(!1),k=l(!1),A=l(!1),g=l(!1),d=ne({show:h.filters.show!=null?h.filters.show:null,search:h.filters.search,academicYear:h.filters.academicYear!=null?h.filters.academicYear:null,status:h.filters.status!=null?h.filters.status:null});function T(){A.value=!A.value}function N(){d.get("/ched/evaluation",{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1},preserveState:!1,preserveScroll:!0})}function K(){d.get("/ched/evaluation",{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1,T()},preserveState:!0,preserveScroll:!0})}const Y=l(!1),C=l(!1),j=l(0);function H(){Y.value=!Y.value}function q(r){j.value=r}const _=le({toolId:null,body:null,recipient:l(h.programHeadEmail)});function G(){f.post("/evaluation/notify",_,{onStart:()=>{C.value=!0},onFinish:()=>{C.value=!1},preserveState:!1,preserveScroll:!0})}function J(r){f.get("/ched/evaluation/"+r+"/evaluate",{preserveScroll:!0,preserveState:!0})}function Q(r){f.get("/ched/evaluation/"+r+"/view")}function I(r){w.value=r}function W(){f.post("/ched/evaluation/lock",{id:w.value},{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1},preserveState:!1,preserveScroll:!0})}function X(){f.post("/ched/evaluation/unlock",{id:w.value},{onStart:()=>{x.value=!0},onFinish:()=>{x.value=!1},preserveState:!1,preserveScroll:!0})}function Z(r){f.post("/ched/evaluation/monitored",{id:w.value},{onStart:()=>{k.value=!0},onFinish:()=>{k.value=!1},preserveState:!1,preserveScroll:!0})}return(r,n)=>{const ee=p("Head"),te=p("page-title"),P=p("Link"),oe=p("content-table"),se=p("content-container"),D=p("modal"),$=p("confirmation"),O=p("Notification");return o(),s(R,null,[i(ee,{title:"Program Evaluation"}),i(te,{title:"Program Evaluation"}),i(se,{hasSearch:"true",pageTitle:"Evaluation",hasNavigation:!0,page:"evaluation",hasTopButton:!0,hasFilters:!0,data_list:u.complianceTools},{"top-button":a(()=>[c(e("select",{onChange:N,"onUpdate:modelValue":n[0]||(n[0]=t=>v(d).academicYear=t),id:"academicYearSelect",class:"h-10 border-gray-400 hover:border-gray-500 cursor-pointer rounded text-sm"},ge,544),[[V,v(d).academicYear]])]),navigation:a(()=>[be,i(P,{href:r.route("ched.evaluation.monitored")},{default:a(()=>[me]),_:1},8,["href"])]),search:a(()=>[e("div",we,[ye,c(e("input",{onKeydown:ie(N,["enter"]),"onUpdate:modelValue":n[1]||(n[1]=t=>v(d).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[L,v(d).search]])])]),options:a(()=>[e("div",xe,[e("button",{onClick:T,class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},Ce),i(P,{href:"/evaluation"},{default:a(()=>[Se]),_:1})])]),"main-content":a(()=>[i(oe,null,{"table-head":a(()=>[Ee,Me,Fe,Ae]),"table-body":a(()=>[u.complianceTools.data.length==0?(o(),s("tr",Te,Ie)):(o(!0),s(R,{key:1},re(u.complianceTools.data,(t,ae)=>(o(),s("tr",{key:t.id,class:z(["hover:bg-gray-200",{"bg-gray-100":ae%2==1}])},[e("td",$e,[e("div",Ve,U(t.program),1),e("div",null,U(t.institution),1)]),e("td",Le,[t.status=="Locked"?(o(),s("div",Ue," Locked ")):S("",!0),t.status=="In progress"?(o(),s("div",Be," In Progress ")):S("",!0),t.status=="Submitted"?(o(),s("div",Ne," Ready for visit ")):S("",!0),t.status=="For re-evaluation"?(o(),s("div",He," For re-evaluation ")):S("",!0)]),e("td",Pe,[e("div",De,U(t.progress)+"% ",1)]),e("td",Oe,[e("button",{onClick:b=>Q(t.id),class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-green-500 hover:text-green-600 tooltipForActions","data-tooltip":"View"},Ke,8,Re),c(e("button",{onClick:b=>J(t.id),class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Evaluate"},Ge,8,je),[[m,u.canEvaluate]]),t.isLocked?c((o(),s("button",{key:0,onClick:b=>{I(t.id),M.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-gray-500 hover:text-gray-600 tooltipForActions","data-tooltip":"Unlock"},We,8,Je)),[[m,u.canEvaluate]]):c((o(),s("button",{key:1,onClick:b=>{I(t.id),E.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-red-500 hover:text-red-600 tooltipForActions","data-tooltip":"Lock"},et,8,Xe)),[[m,u.canEvaluate]]),c(e("button",{onClick:b=>{q(t.progress),H(),_.toolId=t.id},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-orange-500 hover:text-orange-600 tooltipForActions","data-tooltip":"Send Email"},st,8,tt),[[m,u.canEmail]]),c(e("button",{onClick:b=>{I(t.id),F.value=!0},class:"select-none h-8 w-8 text-center text-xl hover:bg-gray-300 rounded-full text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Mark as monitored"},lt,8,at),[[m,u.canEvaluate]])])],2))),128))]),_:1})]),_:1},8,["data_list"]),i(D,{showModal:A.value,onClose:T,width:"sm",height:"long",title:"Filters"},{"custom-button":a(()=>[e("button",{onClick:K,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[g.value?(o(),s("span",wt,xt)):(o(),s("span",kt,"Apply"))])]),default:a(()=>[e("div",null,[e("div",it,[rt,c(e("select",{"onUpdate:modelValue":n[2]||(n[2]=t=>v(d).status=t),id:"status",class:"rounded border-gray-400"},ht,512),[[V,v(d).status]])]),e("div",_t,[pt,c(e("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>v(d).show=t),id:"show",class:"rounded border-gray-400"},mt,512),[[V,v(d).show]])])])]),_:1},8,["showModal"]),i(D,{showModal:Y.value,title:"Compose Email",onClose:H,width:"xl",height:"long"},{"custom-button":a(()=>[e("button",{onClick:G,disabled:C.value||_.body=="",class:z(["text-white bg-blue-600 hover:bg-blue-700 w-24 py-2 px-3 rounded border",[{"bg-gray-600 hover:bg-gray-700":_.body==""}]])},[C.value?(o(),s("span",Ft,Tt)):(o(),s("span",Yt,"Send"))],10,Mt)]),default:a(()=>[e("div",null,[Ct,c(e("textarea",{class:"w-full h-52 resize-none",placeholder:"Compose email here",id:"emailBody","onUpdate:modelValue":n[4]||(n[4]=t=>_.body=t)},`\r
            `,512),[[L,_.body]]),e("div",St,[Et,c(e("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=t=>_.recipient=t),class:"h-10 w-full"},null,512),[[L,_.recipient]])])])]),_:1},8,["showModal"]),i($,{showModal:E.value,onClose:n[6]||(n[6]=t=>E.value=!1),title:"Lock Evaluation Tool",width:"md",height:"short"},{message:a(()=>[B(" Are you sure you want to lock this compliance evaluation tool? This action will prevent any further inputs from HEI. ")]),buttons:a(()=>[e("button",{onClick:W,disabled:y.value,class:"select-none text-white h-10 w-20 rounded bg-red-500"},[y.value?(o(),s("span",$t,Lt)):(o(),s("span",Ut,"Lock"))],8,It)]),_:1},8,["showModal"]),i($,{showModal:M.value,onClose:n[7]||(n[7]=t=>M.value=!1),title:"Unlock Evaluation Tool",width:"md",height:"short"},{message:a(()=>[B(" Are you sure you want to unlock this compliance evaluation tool? This action will enable inputs from HEI. ")]),buttons:a(()=>[e("button",{onClick:X,disabled:x.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[x.value?(o(),s("span",Nt,Pt)):(o(),s("span",Dt,"Unlock"))],8,Bt)]),_:1},8,["showModal"]),i($,{showModal:F.value,onClose:n[8]||(n[8]=t=>F.value=!1),title:"Mark as Monitored",width:"md",height:"short"},{message:a(()=>[B(" Are you sure you want to mark this compliance evaluation tool as monitored? Once marked as monitored, it cannot be edited. ")]),buttons:a(()=>[e("button",{onClick:Z,disabled:k.value,class:"select-none text-white h-10 w-20 rounded bg-blue-500"},[k.value?(o(),s("span",Rt,Kt)):(o(),s("span",jt,"Confirm"))],8,Ot)]),_:1},8,["showModal"]),i(O,{message:r.$page.props.flash.success,type:"success"},null,8,["message"]),i(O,{message:r.$page.props.flash.failed,type:"failed"},null,8,["message"])],64)}}});export{Qt as default};
