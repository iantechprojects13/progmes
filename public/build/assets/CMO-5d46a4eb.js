import{m as b,T as V,s as L,A as r,o as a,f as n,a as i,w as l,g as B,F as k,b as e,i as c,B as H,u as _,z as T,p,e as I,d as P,C as R,n as U,t as m,D as j,O}from"./app-ee162bce.js";import"./index-f52ffc17.js";import z from"./Layout-a469915b.js";const K=e("button",{class:"select-none text-blue-500 h-10 mr-7 border-b-2 font-bold border-blue-500"}," CMO ",-1),q=e("button",{class:"select-none text-gray-500 hover:text-black"}," Draft ",-1),G={class:"w-full flex justify-end relative"},J=e("i",{class:"fas fa-search"},null,-1),Q=[J],W=["disabled"],X={key:0},Y=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Z=[Y],ee={key:1},te=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),oe={class:"mr-1"},se=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ae=e("th",{class:"p-3 pl-5"},"CHED Memorandum Order",-1),ne=e("th",{class:"p-3"},"Program",-1),ie=e("th",{class:"p-3"},"Active Status",-1),le={class:"p-3 text-right"},de=e("i",{class:"fas fa-ellipsis-v"},null,-1),re=[de],ce={key:0},he=e("td",{class:"text-center py-10",colspan:"3"}," No CMO found ",-1),ue=[he],pe={class:"p-3 whitespace-normal pl-5"},fe={class:"p-3 whitespace-normal"},_e={class:"p-3 whitespace-normal"},me={key:0,class:"w-fit text-xs px-1 rounded bg-green-600 text-white"},ge={key:1,class:"w-fit text-xs px-1 rounded bg-gray-300"},ve={class:"p-3 text-right"},be=["onClick"],Ce=e("i",{class:"fas fa-eye"},null,-1),we=[Ce],Me=["onClick"],ye=e("i",{class:"fas fa-toggle-on"},null,-1),ke=[ye],Oe=["onClick"],xe=e("i",{class:"fas fa-toggle-off"},null,-1),Ae=[xe],De=["onClick"],Se=e("i",{class:"fas fa-trash"},null,-1),Ne=[Se],Ee=e("div",{class:"mr-2"},"Items per page",-1),Fe=e("option",{value:"25"},"25",-1),$e=e("option",{value:50},"50",-1),Ve=e("option",{value:75},"75",-1),Le=e("option",{value:100},"100",-1),Be=e("option",{value:200},"200",-1),He=[Fe,$e,Ve,Le,Be],Te={key:0},Ie={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(s,f,h){this.confirmationModal=!this.confirmationModal,this.selectedCMO=s,this.modaltype=f,this.title=h},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:z},je=Object.assign(Ie,{__name:"CMO",props:["cmo_list","canEdit","canImport","canDraft","filters"],setup(s){const f=b(null);b([]);const h=b(!1);function x(o){O.get("/admin/CMOs/"+o+"/view")}const C=s,u=V({show:C.filters.show,search:C.filters.search});function A(){u.get("/admin/CMOs",{preserveScroll:!1,preserveState:!1})}function w(){u.get("/admin/CMOs",{preserveScroll:!0})}return L(f,o=>{O.post("/admin/CMOs/create/import",{file:o},{onStart:()=>{h.value=!0},onFinish:()=>{h.value=!1},preserveScroll:!0,preserveState:!1})}),(o,d)=>{const D=r("Head"),S=r("AdminPanel"),M=r("Link"),N=r("content-table"),E=r("content-container"),F=r("Confirmation"),g=r("Notification");return a(),n(k,null,[i(D,{title:"CHED Memorandum Order List"}),i(S),i(E,{pageTitle:"CHED Memorandum Order List",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasNavigation:s.canDraft,data_list:s.cmo_list},{navigation:l(()=>[e("div",null,[K,i(M,{href:o.route("admin.cmo.draft")},{default:l(()=>[q]),_:1},8,["href"])])]),search:l(()=>[e("div",G,[c(e("input",{onKeydown:T(w,["enter"]),"onUpdate:modelValue":d[0]||(d[0]=t=>_(u).search=t),type:"search",id:"content-search",placeholder:"Search a CMO",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[H,_(u).search]]),e("button",{onClick:w,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},Q)])]),"top-button":l(()=>[c(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:d[1]||(d[1]=t=>f.value=t.target.files[0])},null,544),e("button",{onClick:d[2]||(d[2]=I(t=>o.$refs.uploadfile.click(),["prevent"])),disabled:h.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 w-32 rounded text-white text-sm whitespace-nowrap"},[h.value?(a(),n("span",X,Z)):(a(),n("span",ee,[te,P("Import CMO")]))],8,W)],512),[[p,s.canImport]])]),options:l(()=>[e("div",oe,[i(M,{href:"/admin/CMOs"},{default:l(()=>[se]),_:1})])]),"main-content":l(()=>[i(N,null,{"table-head":l(()=>[ae,ne,ie,c(e("th",le,re,512),[[p,s.canEdit]])]),"table-body":l(()=>[s.cmo_list.data.length==0?(a(),n("tr",ce,ue)):(a(!0),n(k,{key:1},R(s.cmo_list.data,(t,$)=>{var y;return a(),n("tr",{key:t.id,class:U(["hover:bg-slate-300",{"bg-slate-200":$%2==0}])},[e("td",pe," CMO No."+m(t.number)+" Series of "+m(t.series)+", Version "+m(t.version),1),e("td",fe,m((y=t.program)==null?void 0:y.program),1),e("td",_e,[t.isActive?(a(),n("div",me," Active ")):(a(),n("div",ge," Not Active "))]),e("td",ve,[e("button",{onClick:v=>x(t.id),class:"h-10 w-10 mr-1 rounded bg-green-600 hover:bg-green-700 text-white tooltipForActions","data-tooltip":"View"},we,8,be),t.isActive?c((a(),n("button",{key:1,onClick:v=>o.toggleConfirmationModal(t,"deactivate","Deactivate CMO"),class:"h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Deactivate"},Ae,8,Oe)),[[p,s.canEdit]]):c((a(),n("button",{key:0,onClick:v=>o.toggleConfirmationModal(t,"activate","Activate CMO"),class:"h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Activate"},ke,8,Me)),[[p,s.canEdit]]),c(e("button",{onClick:v=>o.toggleConfirmationModal(t,"deleteCMO","Delete Published CMO"),class:"h-10 w-10 rounded bg-red-500 hover:bg-red-600 text-white tooltipForActions","data-tooltip":"Delete"},Ne,8,De),[[p,s.canEdit]])])],2)}),128))]),_:1})]),"show-item":l(()=>[Ee,c(e("select",{"onUpdate:modelValue":d[3]||(d[3]=t=>_(u).show=t),id:"showResultCount",onChange:A,class:"select-none rounded h-8 w-20 p-1 text-sm"},He,544),[[j,_(u).show]])]),_:1},8,["hasNavigation","data_list"]),o.confirmationModal?(a(),n("div",Te,[i(F,{onClose:o.closeModal,title:o.title,modaltype:o.modaltype,selected:o.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):B("",!0),i(g,{message:o.$page.props.flash.success,type:"success"},null,8,["message"]),i(g,{message:o.$page.props.flash.failed,type:"failed"},null,8,["message"]),i(g,{message:o.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{je as default};
