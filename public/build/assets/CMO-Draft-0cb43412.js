import{m,T as N,s as q,A as d,o as s,f as a,a as n,w as l,F as V,i as h,p as v,b as e,e as R,d as E,B as G,u as b,z as J,C as Q,n as W,t as u,g as X,D as Y,O as k}from"./app-a1d3aa91.js";import Z from"./Layout-8eb335a9.js";const ee=["disabled"],te={key:0},oe=e("i",{class:"fas fa-spinner animate-spin"},null,-1),se=[oe],ae={key:1},le=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),ne=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-gray-700 hover:text-black"}," Published ",-1),ie=e("button",{class:"select-none h-12 w-24 hover:bg-gray-100 text-blue-500 border-b-4 border-blue-500 relative font-bold"}," Draft ",-1),re={class:"w-full flex flex-row relative items-center"},de=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),ce={class:"mr-1"},he=e("i",{class:"fas fa-filter"},null,-1),ue=[he],pe=e("button",{class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),fe=e("th",{class:"p-2 pl-5"},"CMO",-1),_e=e("th",{class:"p-2"},"Program",-1),ge={class:"p-2"},me={class:"p-2 pr-5 text-right"},ve=e("i",{class:"fas fa-ellipsis-v"},null,-1),be=[ve],ye={key:0},we=e("td",{class:"text-center py-10",colspan:"4"}," No draft found ",-1),Ce=[we],Me={class:"p-2 pl-5 min-w-12"},ke={key:0},xe={key:1},Oe={class:"p-2 min-w-12"},Se={key:0},Fe={class:"p-2"},$e={key:0},Ae={key:1},De={key:2},Ne={class:"p-2 pr-5 text-right whitespace-nowrap"},Ve=["onClick"],Ee=e("i",{class:"fas fa-eye"},null,-1),Le=[Ee],Be=["onClick"],Pe=e("i",{class:"fas fa-paper-plane"},null,-1),Te=[Pe],je=["onClick"],He=e("i",{class:"fas fa-edit"},null,-1),Ie=[He],Ue=["onClick"],ze=e("i",{class:"fas fa-trash"},null,-1),Ke=[ze],qe={class:"flex flex-col"},Re=e("label",{for:"show"},"Items per page",-1),Ge=e("option",{value:"25"},"25",-1),Je=e("option",{value:"50"},"50",-1),Qe=e("option",{value:"100"},"100",-1),We=e("option",{value:"200"},"200",-1),Xe=[Ge,Je,Qe,We],Ye={key:0},Ze=e("i",{class:"fas fa-spinner animate-spin"},null,-1),et=[Ze],tt={key:1},ot={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(i,p,_){this.confirmationModal=!this.confirmationModal,this.selectedCMO=i,this.modaltype=p,this.title=_},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:Z},lt=Object.assign(ot,{__name:"CMO-Draft",props:["cmo_list","canEdit","filters"],setup(i){const p=i,_=m(null),g=m(!1),y=m(!1),f=m(!1);N({cmo_file:null});function L(o){k.get("/admin/CMOs/draft/"+o+"/edit")}function B(o){k.get("/admin/CMOs/draft/"+o+"/view")}const c=N({show:p.filters.show!=null?p.filters.show:null,search:p.filters.search});function w(){y.value=!y.value}function P(){c.get("/admin/CMOs/draft",{onStart:()=>{f.value=!0},onFinish:()=>{f.value=!1},preserveState:!1,preserveScroll:!0})}function T(){c.get("/admin/CMOs/draft",{onStart:()=>{f.value=!0},onFinish:()=>{f.value=!1,w()},preserveState:!0,preserveScroll:!0})}return q(_,o=>{k.post("/admin/CMOs/create/import",{file:o},{onStart:()=>{g.value=!0},onFinish:()=>{g.value=!1},preserveScroll:!0,preserveState:!1,replace:!0})}),(o,r)=>{const j=d("Head"),x=d("Link"),H=d("content-table"),I=d("content-container"),U=d("modal"),z=d("Confirmation"),C=d("Notification");return s(),a(V,null,[n(j,{title:"CHED Memorandum Order Draft List"}),n(I,{hasAdminPanel:!0,pageTitle:"CMO Draft List",page:"cmo",hasTopButton:!0,hasSearch:!0,hasFilters:!0,hasNavigation:!0,data_list:i.cmo_list},{"top-button":l(()=>[h(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:r[0]||(r[0]=t=>_.value=t.target.files[0])},null,544),e("button",{onClick:r[1]||(r[1]=R(t=>o.$refs.uploadfile.click(),["prevent"])),disabled:g.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 px-3 rounded text-white whitespace-nowrap"},[g.value?(s(),a("span",te,se)):(s(),a("span",ae,[le,E("Import CMO")]))],8,ee)],512),[[v,i.canEdit]])]),navigation:l(()=>[e("div",null,[n(x,{href:o.route("admin.cmo.list")},{default:l(()=>[ne]),_:1},8,["href"]),ie])]),search:l(()=>[e("div",re,[de,h(e("input",{onKeydown:J(P,["enter"]),"onUpdate:modelValue":r[2]||(r[2]=t=>b(c).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[G,b(c).search]])])]),options:l(()=>[e("div",ce,[e("button",{onClick:w,class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},ue),n(x,{href:"/admin/CMOs/draft"},{default:l(()=>[pe]),_:1})])]),"main-content":l(()=>[n(H,null,{"table-head":l(()=>[fe,_e,h(e("th",ge," Imported by",512),[[v,o.$page.props.auth.user.role=="Super Admin"||o.$page.props.auth.user.role=="Admin"]]),h(e("th",me,be,512),[[v,i.canEdit]])]),"table-body":l(()=>[i.cmo_list.data.length==0?(s(),a("tr",ye,Ce)):(s(!0),a(V,{key:1},Q(i.cmo_list.data,(t,K)=>{var O,S,F,$,A,D;return s(),a("tr",{key:t.id,class:W(["hover:bg-gray-200 border-b",{"bg-gray-100":K%2==1}])},[e("td",Me,[t.number!=null&&t.series!=null&&t.version!=null?(s(),a("div",ke," CMO No."+u(t.number)+" Series of "+u(t.series)+", Version "+u(t.version),1)):(s(),a("div",xe," - "))]),e("td",Oe,[E(u((O=t.program)==null?void 0:O.program)+" ",1),(S=t.program)!=null&&S.major?(s(),a("span",Se," - "+u((F=t.program)==null?void 0:F.major),1)):X("",!0)]),h(e("td",Fe,[(($=t.created_by)==null?void 0:$.name)==null?(s(),a("div",$e," - ")):((A=t.created_by)==null?void 0:A.name)!=o.$page.props.auth.user.name?(s(),a("div",Ae,u((D=t.created_by)==null?void 0:D.name),1)):(s(),a("div",De," Me "))],512),[[v,o.$page.props.auth.user.role=="Super Admin"||o.$page.props.auth.user.role=="Admin"]]),e("td",Ne,[e("button",{onClick:M=>B(t.id),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-green-500 hover:text-green-600 tooltipForActions","data-tooltip":"View"},Le,8,Ve),e("button",{onClick:M=>o.toggleConfirmationModal(t,"publish","Publish CMO"),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Publish"},Te,8,Be),e("button",{onClick:M=>L(t.id),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Edit"},Ie,8,je),e("button",{onClick:M=>o.toggleConfirmationModal(t,"deleteCMO","Delete Draft"),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-red-500 hover:text-red-600 tooltipForActions","data-tooltip":"Delete"},Ke,8,Ue)])],2)}),128))]),_:1})]),_:1},8,["data_list"]),n(U,{showModal:y.value,onClose:w,width:"sm",height:"long",title:"Filters"},{"custom-button":l(()=>[e("button",{onClick:T,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[f.value?(s(),a("span",Ye,et)):(s(),a("span",tt,"Apply"))])]),default:l(()=>[e("div",null,[e("div",qe,[Re,h(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>b(c).show=t),id:"show",class:"rounded border-gray-400"},Xe,512),[[Y,b(c).show]])])])]),_:1},8,["showModal"]),n(z,{showModal:o.confirmationModal,onClose:o.closeModal,title:o.title,modaltype:o.modaltype,selected:o.selectedCMO,width:"md",height:"short"},null,8,["showModal","onClose","title","modaltype","selected"]),n(C,{message:o.$page.props.flash.success,type:"success"},null,8,["message"]),n(C,{message:o.$page.props.flash.failed,type:"failed"},null,8,["message"]),n(C,{message:o.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{lt as default};
