import{T as v,m as M,s as V,A as l,o as i,f as r,a as o,w as a,g as y,F as O,b as e,d as B,e as P,i as w,B as T,u as k,z as F,p as H,C as A,n as j,t as p,O as m}from"./app-f4d80686.js";import"./index-5fbe21de.js";import z from"./Layout-713aa5ab.js";const I=["disabled"],K={key:0},U=e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),q={key:1},G=e("button",{class:"text-gray-500 h-10 mr-8 hover:text-black"}," CMO List ",-1),J=e("button",{class:"text-blue-500 font-bold border-b-2 h-10 border-blue-500"}," Draft ",-1),Q={class:"w-full flex justify-end relative"},R=e("i",{class:"fas fa-search"},null,-1),W=[R],X={class:"mr-1"},Y=e("button",{class:"px-2 border-2 w-12 whitespace-nowrap rounded h-10 text-gray-600 hover:text-black border-gray-500"},[e("i",{class:"fas fa-refresh"})],-1),Z=e("th",{class:"py-2"},"CHED Memorandum Order",-1),ee=e("th",{class:"py-2"},"Program",-1),te={class:"py-2 text-right"},se=e("i",{class:"fas fa-ellipsis-v"},null,-1),oe=[se],ae={class:"p-2"},ne={class:"p-2"},le={class:"p-2 text-right"},ie=["onClick"],re=["onClick"],de=["onClick"],ce={key:0},he=e("td",{class:"text-center py-10",colspan:"3"}," No draft found ",-1),ue=[he],pe={key:0},fe={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(n,h,d){this.confirmationModal=!this.confirmationModal,this.selectedCMO=n,this.modaltype=h,this.title=d},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:z},Ce=Object.assign(fe,{__name:"CMO-Draft",props:["cmo_list","canEdit","filters"],setup(n){v({cmo_file:null});const h=M(null),d=M(!1);function x(t){m.get("/admin/CMOs/draft/"+t+"/edit")}const u=v({search:n.filters.search});function _(){u.search==""?m.get("/admin/CMOs/draft"):u.get("/admin/CMOs/draft",{preserveScroll:!0})}return V(h,t=>{m.post("/admin/CMOs/create/import",{file:t},{onStart:()=>{d.value=!0},onFinish:()=>{d.value=!1},preserveScroll:!0,preserveState:!1})}),(t,c)=>{const D=l("Head"),N=l("AdminPanel"),g=l("Link"),S=l("content-table"),$=l("content-container"),L=l("Confirmation"),f=l("Notification");return i(),r(O,null,[o(D,{title:"CHED Memorandum Order List"}),o(N),o($,{pageTitle:"CMO Draft List",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasNavigation:"true",data_list:n.cmo_list},{"top-button":a(()=>[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:c[0]||(c[0]=s=>h.value=s.target.files[0])},null,544),e("button",{onClick:c[1]||(c[1]=P(s=>t.$refs.uploadfile.click(),["prevent"])),disabled:d.value,class:"bg-blue-500 hover:bg-blue-600 h-10 px-2 rounded text-white"},[d.value?(i(),r("span",K,[U,B("Importing...")])):(i(),r("span",q,"Import CMO"))],8,I)]),navigation:a(()=>[e("div",null,[o(g,{href:t.route("admin.cmo.list")},{default:a(()=>[G]),_:1},8,["href"]),J])]),search:a(()=>[e("div",Q,[w(e("input",{onKeydown:F(_,["enter"]),"onUpdate:modelValue":c[2]||(c[2]=s=>k(u).search=s),type:"search",id:"content-search",placeholder:"Search a CMO",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[T,k(u).search]]),e("button",{onClick:_,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},W)])]),options:a(()=>[e("div",X,[o(g,{href:"/admin/CMOs/draft"},{default:a(()=>[Y]),_:1})])]),"main-content":a(()=>[o(S,null,{"table-head":a(()=>[Z,ee,w(e("th",te,oe,512),[[H,n.canEdit]])]),"table-body":a(()=>[(i(!0),r(O,null,A(n.cmo_list.data,(s,E)=>{var b;return i(),r("tr",{key:s.id,class:j(["hover:bg-gray-100",{"bg-slate-200":E%2==0}])},[e("td",ae," CMO No."+p(s.number)+" Series of "+p(s.series)+", Version "+p(s.version),1),e("td",ne,p((b=s.program)==null?void 0:b.program),1),e("td",le,[e("button",{onClick:C=>t.toggleConfirmationModal(s.id,"deleteCMO","Delete Draft"),class:"h-8 px-2 mr-1 rounded bg-red-500 hover:bg-red-600 text-white"},"Delete ",8,ie),e("button",{onClick:C=>x(s.id),class:"h-8 px-2 mr-1 rounded bg-yellow-500 hover:bg-yellow-600 text-white"},"Edit ",8,re),e("button",{onClick:C=>t.toggleConfirmationModal(s.id,"publish","Publish CMO"),class:"h-8 px-2 rounded bg-blue-500 hover:bg-blue-600 text-white"},"Publish ",8,de)])],2)}),128)),n.cmo_list.data.length==0?(i(),r("tr",ce,ue)):y("",!0)]),_:1})]),_:1},8,["data_list"]),t.confirmationModal?(i(),r("div",pe,[o(L,{onClose:t.closeModal,title:t.title,modaltype:t.modaltype,selected:t.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):y("",!0),o(f,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),o(f,{message:t.$page.props.flash.failed,type:"failed"},null,8,["message"]),o(f,{message:t.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{Ce as default};
