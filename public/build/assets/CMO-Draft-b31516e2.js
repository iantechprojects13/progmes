import{T as S,m as $,s as H,A as d,o,f as a,a as n,w as l,g as A,F as D,b as e,i as p,B as I,u as f,z as R,p as m,e as U,d as x,C as z,n as K,t as u,D as q,O as N}from"./app-fe511cab.js";import"./index-e0356d42.js";import G from"./Layout-4e2e1be8.js";const J=e("button",{class:"select-none text-gray-500 h-10 mr-7 hover:text-black"}," CMO ",-1),Q=e("button",{class:"select-none text-blue-500 font-bold border-b-2 h-10 border-blue-500"}," Draft ",-1),W={class:"w-full flex justify-end relative"},X=e("i",{class:"fas fa-search"},null,-1),Y=[X],Z=["disabled"],ee={key:0},te=e("i",{class:"fas fa-spinner animate-spin"},null,-1),se=[te],oe={key:1},ae=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),ne={class:"mr-1"},le=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ie=e("th",{class:"p-3 pl-5"},"CMO",-1),re=e("th",{class:"p-3"},"Program",-1),de={class:"p-3"},ce={class:"p-3 text-right"},he=e("i",{class:"fas fa-ellipsis-v"},null,-1),pe=[he],ue={key:0},_e=e("td",{class:"text-center py-10",colspan:"4"}," No draft found ",-1),fe=[_e],me={class:"p-3 pl-5 whitespace-normal min-w-12"},ge={key:0},be={key:1},ve={class:"p-3 whitespace-normal min-w-12"},Ce={key:0},we={class:"p-3 text-right"},Me=["onClick"],ye=e("i",{class:"fas fa-paper-plane"},null,-1),ke=[ye],Oe=["onClick"],Se=e("i",{class:"fas fa-edit"},null,-1),$e=[Se],Ae=["onClick"],De=e("i",{class:"fas fa-trash"},null,-1),xe=[De],Ne=e("div",{class:"mr-2"},"Items per page",-1),Fe=e("option",{value:"25"},"25",-1),Ve=e("option",{value:50},"50",-1),Ee=e("option",{value:75},"75",-1),Le=e("option",{value:100},"100",-1),Be=e("option",{value:200},"200",-1),Pe=[Fe,Ve,Ee,Le,Be],Te={key:0},je={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(i,_,c){this.confirmationModal=!this.confirmationModal,this.selectedCMO=i,this.modaltype=_,this.title=c},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:G},Ue=Object.assign(je,{__name:"CMO-Draft",props:["cmo_list","canEdit","filters"],setup(i){S({cmo_file:null});const _=$(null),c=$(!1);function F(s){N.get("/admin/CMOs/draft/"+s+"/edit")}const b=i,h=S({show:b.filters.show,search:b.filters.search});function v(){h.get("/admin/CMOs/draft",{preserveScroll:!0})}function V(){h.get("/admin/CMOs/draft",{preserveScroll:!1,preserveState:!1})}return H(_,s=>{N.post("/admin/CMOs/create/import",{file:s},{onStart:()=>{c.value=!0},onFinish:()=>{c.value=!1},preserveScroll:!0,preserveState:!1})}),(s,r)=>{const E=d("Head"),L=d("AdminPanel"),C=d("Link"),B=d("content-table"),P=d("content-container"),T=d("Confirmation"),g=d("Notification");return o(),a(D,null,[n(E,{title:"CHED Memorandum Order List"}),n(L),n(P,{pageTitle:"CMO Draft List",page:"cmo",hasTopButton:!0,hasSearch:!0,hasFilters:!0,hasNavigation:!0,data_list:i.cmo_list},{navigation:l(()=>[e("div",null,[n(C,{href:s.route("admin.cmo.list")},{default:l(()=>[J]),_:1},8,["href"]),Q])]),search:l(()=>[e("div",W,[p(e("input",{onKeydown:R(v,["enter"]),"onUpdate:modelValue":r[0]||(r[0]=t=>f(h).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded border border-gray-400 bg-slate-100 h-10 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[I,f(h).search]]),e("button",{onClick:v,class:"text-gray-700 hover:text-black active:text-blue-500 h-10 w-10 rounded absolute right-2"},Y)])]),"top-button":l(()=>[p(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:r[1]||(r[1]=t=>_.value=t.target.files[0])},null,544),e("button",{onClick:r[2]||(r[2]=U(t=>s.$refs.uploadfile.click(),["prevent"])),disabled:c.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 w-32 rounded text-white text-sm whitespace-nowrap"},[c.value?(o(),a("span",ee,se)):(o(),a("span",oe,[ae,x("Import CMO")]))],8,Z)],512),[[m,i.canEdit]])]),options:l(()=>[e("div",ne,[n(C,{href:"/admin/CMOs/draft"},{default:l(()=>[le]),_:1})])]),"main-content":l(()=>[n(B,null,{"table-head":l(()=>[ie,re,p(e("th",de," Imported by",512),[[m,s.$page.props.auth.user.role=="Super Admin"||s.$page.props.auth.user.role=="Admin"]]),p(e("th",ce,pe,512),[[m,i.canEdit]])]),"table-body":l(()=>[i.cmo_list.data.length==0?(o(),a("tr",ue,fe)):(o(!0),a(D,{key:1},z(i.cmo_list.data,(t,j)=>{var w,M,y,k;return o(),a("tr",{key:t.id,class:K(["hover:bg-slate-300",{"bg-slate-200":j%2==0}])},[e("td",me,[t.number!=null&&t.series!=null&&t.version!=null?(o(),a("div",ge," CMO No."+u(t.number)+" Series of "+u(t.series)+", Version "+u(t.version),1)):(o(),a("div",be," - "))]),e("td",ve,[x(u((w=t.program)==null?void 0:w.program)+" ",1),(M=t.program)!=null&&M.major?(o(),a("span",Ce," - "+u((y=t.program)==null?void 0:y.major),1)):A("",!0)]),p(e("td",{class:"p-3 whitespace-normal"},u((k=t.created_by)==null?void 0:k.name),513),[[m,s.$page.props.auth.user.role=="Super Admin"||s.$page.props.auth.user.role=="Admin"]]),e("td",we,[e("button",{onClick:O=>s.toggleConfirmationModal(t,"publish","Publish CMO"),class:"select-none h-10 w-10 mr-1 rounded bg-green-600 hover:bg-green-700 text-white tooltipForActions","data-tooltip":"Publish"},ke,8,Me),e("button",{onClick:O=>F(t.id),class:"select-none h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Edit"},$e,8,Oe),e("button",{onClick:O=>s.toggleConfirmationModal(t,"deleteCMO","Delete Draft"),class:"select-none h-10 w-10 rounded bg-red-500 hover:bg-red-600 text-white tooltipForActions","data-tooltip":"Delete"},xe,8,Ae)])],2)}),128))]),_:1})]),"show-item":l(()=>[Ne,p(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>f(h).show=t),id:"showResultCount",onChange:V,class:"select-none rounded h-8 w-20 p-1 text-sm"},Pe,544),[[q,f(h).show]])]),_:1},8,["data_list"]),s.confirmationModal?(o(),a("div",Te,[n(T,{onClose:s.closeModal,title:s.title,modaltype:s.modaltype,selected:s.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):A("",!0),n(g,{message:s.$page.props.flash.success,type:"success"},null,8,["message"]),n(g,{message:s.$page.props.flash.failed,type:"failed"},null,8,["message"]),n(g,{message:s.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{Ue as default};
