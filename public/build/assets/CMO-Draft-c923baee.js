import{T as O,m as S,s as j,A as d,o,f as a,a as n,w as l,g as $,F as A,b as e,i as p,B as H,u as _,z as I,p as m,e as R,d as D,C as U,n as z,t as u,D as K,O as N}from"./app-ee162bce.js";import"./index-f52ffc17.js";import q from"./Layout-a469915b.js";const G=e("button",{class:"select-none text-gray-500 h-10 mr-7 hover:text-black"}," CMO ",-1),J=e("button",{class:"select-none text-blue-500 font-bold border-b-2 h-10 border-blue-500"}," Draft ",-1),Q={class:"w-full flex justify-end relative"},W=e("i",{class:"fas fa-search"},null,-1),X=[W],Y=["disabled"],Z={key:0},ee=e("i",{class:"fas fa-spinner animate-spin"},null,-1),te=[ee],se={key:1},oe=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),ae={class:"mr-1"},ne=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),le=e("th",{class:"p-3 pl-5"},"CMO",-1),ie=e("th",{class:"p-3"},"Program",-1),re={class:"p-3"},de={class:"p-3 text-right"},ce=e("i",{class:"fas fa-ellipsis-v"},null,-1),he=[ce],pe={key:0},ue=e("td",{class:"text-center py-10",colspan:"4"}," No draft found ",-1),fe=[ue],_e={class:"p-3 pl-5 whitespace-normal min-w-12"},me={key:0},ge={key:1},be={class:"p-3 whitespace-normal min-w-12"},ve={key:0},Ce={class:"p-3 text-right"},we=["onClick"],Me=e("i",{class:"fas fa-paper-plane"},null,-1),ye=[Me],ke=["onClick"],Oe=e("i",{class:"fas fa-edit"},null,-1),Se=[Oe],$e=["onClick"],Ae=e("i",{class:"fas fa-trash"},null,-1),De=[Ae],Ne=e("div",{class:"mr-2"},"Items per page",-1),xe=e("option",{value:"25"},"25",-1),Fe=e("option",{value:50},"50",-1),Le=e("option",{value:75},"75",-1),Ve=e("option",{value:100},"100",-1),Ee=e("option",{value:200},"200",-1),Be=[xe,Fe,Le,Ve,Ee],Pe={key:0},Te={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(i,f,c){this.confirmationModal=!this.confirmationModal,this.selectedCMO=i,this.modaltype=f,this.title=c},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:q},Re=Object.assign(Te,{__name:"CMO-Draft",props:["cmo_list","canEdit","filters"],setup(i){O({cmo_file:null});const f=S(null),c=S(!1);function x(s){N.get("/admin/CMOs/draft/"+s+"/edit")}const b=i,h=O({show:b.filters.show,search:b.filters.search});function v(){h.get("/admin/CMOs/draft",{preserveScroll:!0})}function F(){h.get("/admin/CMOs/draft",{preserveScroll:!1,preserveState:!1})}return j(f,s=>{N.post("/admin/CMOs/create/import",{file:s},{onStart:()=>{c.value=!0},onFinish:()=>{c.value=!1},preserveScroll:!0,preserveState:!1})}),(s,r)=>{const L=d("Head"),V=d("AdminPanel"),C=d("Link"),E=d("content-table"),B=d("content-container"),P=d("Confirmation"),g=d("Notification");return o(),a(A,null,[n(L,{title:"CHED Memorandum Order List"}),n(V),n(B,{pageTitle:"CMO Draft List",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasNavigation:"true",data_list:i.cmo_list},{navigation:l(()=>[e("div",null,[n(C,{href:s.route("admin.cmo.list")},{default:l(()=>[G]),_:1},8,["href"]),J])]),search:l(()=>[e("div",Q,[p(e("input",{onKeydown:I(v,["enter"]),"onUpdate:modelValue":r[0]||(r[0]=t=>_(h).search=t),type:"search",id:"content-search",placeholder:"Search a CMO",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[H,_(h).search]]),e("button",{onClick:v,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},X)])]),"top-button":l(()=>[p(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:r[1]||(r[1]=t=>f.value=t.target.files[0])},null,544),e("button",{onClick:r[2]||(r[2]=R(t=>s.$refs.uploadfile.click(),["prevent"])),disabled:c.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 w-32 rounded text-white text-sm whitespace-nowrap"},[c.value?(o(),a("span",Z,te)):(o(),a("span",se,[oe,D("Import CMO")]))],8,Y)],512),[[m,i.canEdit]])]),options:l(()=>[e("div",ae,[n(C,{href:"/admin/CMOs/draft"},{default:l(()=>[ne]),_:1})])]),"main-content":l(()=>[n(E,null,{"table-head":l(()=>[le,ie,p(e("th",re," Imported by",512),[[m,s.$page.props.auth.user.role=="Super Admin"||s.$page.props.auth.user.role=="Admin"]]),p(e("th",de,he,512),[[m,i.canEdit]])]),"table-body":l(()=>[i.cmo_list.data.length==0?(o(),a("tr",pe,fe)):(o(!0),a(A,{key:1},U(i.cmo_list.data,(t,T)=>{var w,M,y;return o(),a("tr",{key:t.id,class:z(["hover:bg-slate-300",{"bg-slate-200":T%2==0}])},[e("td",_e,[t.number!=null&&t.series!=null&&t.version!=null?(o(),a("div",me," CMO No."+u(t.number)+" Series of "+u(t.series)+", Version "+u(t.version),1)):(o(),a("div",ge," - "))]),e("td",be,[D(u((w=t.program)==null?void 0:w.program)+" ",1),(M=t.program)!=null&&M.major?(o(),a("span",ve," - "+u((y=t.program)==null?void 0:y.major),1)):$("",!0)]),p(e("td",{class:"p-3 whitespace-normal"},u(t.created_by.name),513),[[m,s.$page.props.auth.user.role=="Super Admin"||s.$page.props.auth.user.role=="Admin"]]),e("td",Ce,[e("button",{onClick:k=>s.toggleConfirmationModal(t.id,"publish","Publish CMO"),class:"select-none h-10 w-10 mr-1 rounded bg-green-600 hover:bg-green-700 text-white tooltipForActions","data-tooltip":"Publish"},ye,8,we),e("button",{onClick:k=>x(t.id),class:"select-none h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Edit"},Se,8,ke),e("button",{onClick:k=>s.toggleConfirmationModal(t.id,"deleteCMO","Delete Draft"),class:"select-none h-10 w-10 rounded bg-red-500 hover:bg-red-600 text-white tooltipForActions","data-tooltip":"Delete"},De,8,$e)])],2)}),128))]),_:1})]),"show-item":l(()=>[Ne,p(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>_(h).show=t),id:"showResultCount",onChange:F,class:"select-none rounded h-8 w-20 p-1 text-sm"},Be,544),[[K,_(h).show]])]),_:1},8,["data_list"]),s.confirmationModal?(o(),a("div",Pe,[n(P,{onClose:s.closeModal,title:s.title,modaltype:s.modaltype,selected:s.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):$("",!0),n(g,{message:s.$page.props.flash.success,type:"success"},null,8,["message"]),n(g,{message:s.$page.props.flash.failed,type:"failed"},null,8,["message"]),n(g,{message:s.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{Re as default};
