import{k as H,l as P,m as i,h as q,T as j,A as b,o as m,f as p,a as d,w as u,c as z,g as V,F as y,b as e,e as $,i as f,D as O,u as r,C as x,t as w,d as k,p as K,B as v,n as L,O as G}from"./app-612f8f79.js";import J from"./Layout-688c6e41.js";const Q={class:"relative"},W=e("button",{class:"w-24 h-10 bg-blue-500 hover:bg-blue-600 rounded text-white"},[k(" Save "),e("i",{class:"fas fa-caret-down ml-2"})],-1),X={class:"w-48"},Y={class:"border-gray-400"},Z={class:"overflow-x-auto"},ee=e("div",{class:"px-3 md:px-10 pt-3 font-bold text-gray-600 text-base"}," CMO Details ",-1),te={class:"w-full flex flex-col justify-between p-3 md:px-10"},oe={class:"flex flex-col lg:flex-row"},se={class:"w-full flex flex-col mt-2"},ne=e("label",{for:"discipline",class:"font-bold text-gray-600"},"Discipline",-1),re=e("option",{value:null}," Select discipline ",-1),le=["value"],ae={class:"w-full flex flex-col mt-2"},ie=e("label",{for:"program",class:"font-bold text-gray-600"},"Program",-1),de=["disabled"],ce=e("option",{value:null}," Select program ",-1),me=["value"],pe={key:0},ue={class:"flex flex-col lg:flex-row"},fe={class:"w-full flex flex-col mt-2"},he=e("label",{for:"number",class:"font-bold text-gray-600"},"CMO No.",-1),_e={class:"w-full flex flex-col mt-2"},be=e("label",{for:"series",class:"font-bold text-gray-600"},"Series",-1),ge={class:"w-full flex flex-col mt-2"},ve=e("label",{for:"version",class:"font-bold text-gray-600"},"Version",-1),ye=e("button",{disabled:"",class:"grayscale bg-gray-500 h-10 px-3 rounded text-white"},[e("i",{class:"fas fa-plus mr-2"}),k("Add row")],-1),we=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Item No ",-1),xe=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Area ",-1),ke=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Minimum Requirement ",-1),Ie={class:"w-24 text-center align-top py-5 font-bold"},Me={class:"max-w-18 w-1/4 min-w-18 py-5 px-2 align-top"},Ce=["id","onUpdate:modelValue","onFocus","onInput"],qe={class:"min-w-18 py-5 px-2 align-top"},Ve=["id","onUpdate:modelValue","onFocus","onInput"],$e={data(){return{openSaveOption:!1}},layout:J,methods:{handleAreaInput(h){let c=this.$refs.area[h];c.style.height="18px",c.style.height=c.scrollHeight+"px"},handleMinreqInput(h){let c=this.$refs.minreq[h];c.style.height="18px",c.style.height=c.scrollHeight+"px"}}},Se=Object.assign($e,{__name:"CMO-Edit",props:["cmo","discipline_list","program_list"],setup(h){H(()=>{window.addEventListener("keydown",c)}),P(()=>{window.removeEventListener("keydown",c)});const c=o=>{(o.ctrlKey||o.metaKey)&&(o.key==="s"||o.key==="S")&&(o.preventDefault(),S.saveBtn.value.click())},a=h,A=i(!1);i(!1);const I=i([]),S={saveBtn:I},M=q(()=>{let o=[];for(var n=0;n<a.cmo.criteria.length;n++)o.push(a.cmo.criteria[n].area);return o}),B=q(()=>{let o=[];for(var n=0;n<a.cmo.criteria.length;n++)o.push(a.cmo.criteria[n].minimumRequirement);return o}),s=j({id:i(a.cmo.id),discipline:i(a.cmo.disciplineId)!==null?i(a.cmo.disciplineId):null,program:i(a.cmo.programId)!==null?i(a.cmo.programId):null,number:i(a.cmo.number),series:i(a.cmo.series),version:i(a.cmo.version),area:M,minReq:B});function U(){s.post("/admin/CMOs/save-and-publish",s)}function D(){G.post("/admin/CMOs/save-as-draft",s)}return(o,n)=>{const N=b("Head"),E=b("AdminPanel"),F=b("dropdown-option"),g=b("FormErrorMessage"),C=b("content-container"),R=b("content-table"),T=b("Notification");return m(),p(y,null,[d(N,{title:"Edit CMO"}),d(E),d(C,{pageTitle:"CHED Memorandum Order",hasTopButton:"true"},{"top-button":u(()=>[e("div",Q,[d(F,{position:"left"},{button:u(()=>[W]),options:u(()=>[e("div",X,[e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",ref_key:"saveBtn",ref:I,onClick:$(D,["prevent"])}," Save as draft ",512),e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",onClick:$(U,["prevent"])}," Publish ")])]),_:1})])]),"main-content":u(()=>[e("div",Y,[e("div",Z,[ee,e("div",te,[e("div",oe,[e("div",se,[ne,f(e("select",{id:"discipline","onUpdate:modelValue":n[0]||(n[0]=t=>r(s).discipline=t),class:"py-1 px-3 h-10 text-sm border-2 border-gray-400 rounded m-1",onChange:n[1]||(n[1]=t=>r(s).program=null)},[re,(m(!0),p(y,null,x(h.discipline_list,t=>(m(),p("option",{key:t.id,value:t.id},w(t.discipline),9,le))),128))],544),[[O,r(s).discipline]]),d(g,{message:o.$page.props.errors.discipline,theme:"dark"},null,8,["message"])]),e("div",ae,[ie,f(e("select",{id:"program","onUpdate:modelValue":n[2]||(n[2]=t=>r(s).program=t),class:"py-1 px-3 h-10 text-sm border-2 border-gray-400 rounded m-1",disabled:!r(s).discipline},[ce,(m(!0),p(y,null,x(h.program_list,t=>f((m(),p("option",{key:t.id,value:t.id},[k(w(t.program)+" ",1),t.major!=null?(m(),p("span",pe," - "+w(t.major),1)):V("",!0)],8,me)),[[K,t.disciplineId==r(s).discipline]])),128))],8,de),[[O,r(s).program]]),d(g,{message:o.$page.props.errors.program,theme:"dark"},null,8,["message"])])]),e("div",ue,[e("div",fe,[he,f(e("input",{id:"number",type:"number",placeholder:"CMO No.","onUpdate:modelValue":n[3]||(n[3]=t=>r(s).number=t),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).number]]),d(g,{message:o.$page.props.errors.number,theme:"dark"},null,8,["message"])]),e("div",_e,[be,f(e("input",{id:"series",type:"number",placeholder:"Series","onUpdate:modelValue":n[4]||(n[4]=t=>r(s).series=t),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).series]]),d(g,{message:o.$page.props.errors.series,theme:"dark"},null,8,["message"])]),e("div",ge,[ve,f(e("input",{id:"version",type:"number",placeholder:"Version","onUpdate:modelValue":n[5]||(n[5]=t=>r(s).version=t),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).version]]),d(g,{message:o.$page.props.errors.version,theme:"dark"},null,8,["message"])])])])])])]),_:1}),d(C,{hasTopButton:!0},{"top-button":u(()=>[ye]),"main-content":u(()=>[d(R,null,{"table-head":u(()=>[we,xe,ke]),"table-body":u(()=>[(m(!0),p(y,null,x(M.value,(t,l)=>(m(),p("tr",{key:l,class:L({"bg-slate-200":l%2==1})},[e("td",Ie,w(l+1),1),e("td",Me,[f(e("textarea",{ref_for:!0,ref:"area",id:"area"+l,"onUpdate:modelValue":_=>r(s).area[l]=_,class:"areaInput min-h-max h-10 resize-none text-sm rounded w-full overflow-hidden border-2 border-gray-400",onFocus:_=>o.handleAreaInput(l),onInput:_=>o.handleAreaInput(l)},null,40,Ce),[[v,r(s).area[l]]])]),e("td",qe,[f(e("textarea",{ref_for:!0,ref:"minreq",id:"minReq"+l,"onUpdate:modelValue":_=>r(s).minReq[l]=_,class:"minreqInput min-h-max resize-none text-sm bg-white rounded w-full overflow-hidden border-2 border-gray-400",onFocus:_=>o.handleMinreqInput(l),onInput:_=>o.handleMinreqInput(l)},null,40,Ve),[[v,r(s).minReq[l]]])])],2))),128))]),_:1})]),_:1}),A.value?(m(),z(T,{key:0,message:"Processing...",type:"processing"})):V("",!0)],64)}}});export{Se as default};
