import{k as P,l as T,m as i,h as C,T as j,A as _,o as m,f as p,a as d,w as g,c as z,g as q,F as y,b as e,e as V,i as u,D as $,u as r,C as w,t as x,d as O,p as K,B as v,n as L,O as G}from"./app-fe511cab.js";import J from"./Layout-4e2e1be8.js";const Q={class:"relative"},W=e("button",{class:"w-24 h-10 bg-blue-500 hover:bg-blue-600 rounded text-white"},[O(" Save "),e("i",{class:"fas fa-caret-down ml-2"})],-1),X={class:"w-48"},Y={class:"border-gray-400"},Z={class:"overflow-x-auto"},ee=e("div",{class:"px-3 md:px-10 pt-3 font-bold text-gray-600 text-base"}," CMO Details ",-1),oe={class:"w-full flex flex-col justify-between p-3 md:px-10"},te={class:"flex flex-col lg:flex-row"},se={class:"w-full flex flex-col mt-2"},ne=e("label",{for:"discipline",class:"font-bold text-gray-600"},"Discipline",-1),re=e("option",{value:null}," Select discipline ",-1),le=["value"],ae={class:"w-full flex flex-col mt-2"},ie=e("label",{for:"program",class:"font-bold text-gray-600"},"Program",-1),de=["disabled"],ce=e("option",{value:null}," Select program ",-1),me=["value"],pe={key:0},ue={class:"flex flex-col lg:flex-row"},fe={class:"w-full flex flex-col mt-2"},he=e("label",{for:"number",class:"font-bold text-gray-600"},"CMO No.",-1),_e={class:"w-full flex flex-col mt-2"},ge=e("label",{for:"series",class:"font-bold text-gray-600"},"Series",-1),be={class:"w-full flex flex-col mt-2"},ve=e("label",{for:"version",class:"font-bold text-gray-600"},"Version",-1),ye=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Item No ",-1),xe=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Area ",-1),we=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Minimum Requirement ",-1),ke={class:"w-24 text-center align-top py-5 font-bold"},Ie={class:"max-w-18 w-1/4 min-w-18 py-5 px-2 align-top"},Me=["id","onUpdate:modelValue","onFocus","onInput"],Ce={class:"min-w-18 py-5 px-2 align-top"},qe=["id","onUpdate:modelValue","onFocus","onInput"],Ve={data(){return{openSaveOption:!1}},layout:J,methods:{handleAreaInput(f){let c=this.$refs.area[f];c.style.height="18px",c.style.height=c.scrollHeight+"px"},handleMinreqInput(f){let c=this.$refs.minreq[f];c.style.height="18px",c.style.height=c.scrollHeight+"px"}}},Se=Object.assign(Ve,{__name:"CMO-Edit",props:["cmo","discipline_list","program_list"],setup(f){P(()=>{window.addEventListener("keydown",c)}),T(()=>{window.removeEventListener("keydown",c)});const c=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),A.saveBtn.value.click())},a=f,S=i(!1);i(!1);const k=i([]),A={saveBtn:k},I=C(()=>{let t=[];for(var n=0;n<a.cmo.criteria.length;n++)t.push(a.cmo.criteria[n].area);return t}),U=C(()=>{let t=[];for(var n=0;n<a.cmo.criteria.length;n++)t.push(a.cmo.criteria[n].minimumRequirement);return t}),s=j({id:i(a.cmo.id),discipline:i(a.cmo.disciplineId)!==null?i(a.cmo.disciplineId):null,program:i(a.cmo.programId)!==null?i(a.cmo.programId):null,number:i(a.cmo.number),series:i(a.cmo.series),version:i(a.cmo.version),area:I,minReq:U});function B(){s.post("/admin/CMOs/save-and-publish",s)}function D(){G.post("/admin/CMOs/save-as-draft",s)}return(t,n)=>{const N=_("Head"),E=_("AdminPanel"),F=_("dropdown-option"),b=_("FormErrorMessage"),M=_("content-container"),R=_("content-table"),H=_("Notification");return m(),p(y,null,[d(N,{title:"Edit CMO"}),d(E),d(M,{pageTitle:"CHED Memorandum Order",page:"cmo",hasTopButton:!0},{"top-button":g(()=>[e("div",Q,[d(F,{position:"left"},{button:g(()=>[W]),options:g(()=>[e("div",X,[e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",ref_key:"saveBtn",ref:k,onClick:V(D,["prevent"])}," Save as draft ",512),e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",onClick:V(B,["prevent"])}," Publish ")])]),_:1})])]),"main-content":g(()=>[e("div",Y,[e("div",Z,[ee,e("div",oe,[e("div",te,[e("div",se,[ne,u(e("select",{id:"discipline","onUpdate:modelValue":n[0]||(n[0]=o=>r(s).discipline=o),class:"py-1 px-3 h-10 text-sm border-2 border-gray-400 rounded m-1",onChange:n[1]||(n[1]=o=>r(s).program=null)},[re,(m(!0),p(y,null,w(f.discipline_list,o=>(m(),p("option",{key:o.id,value:o.id},x(o.discipline),9,le))),128))],544),[[$,r(s).discipline]]),d(b,{message:t.$page.props.errors.discipline,theme:"dark"},null,8,["message"])]),e("div",ae,[ie,u(e("select",{id:"program","onUpdate:modelValue":n[2]||(n[2]=o=>r(s).program=o),class:"py-1 px-3 h-10 text-sm border-2 border-gray-400 rounded m-1",disabled:!r(s).discipline},[ce,(m(!0),p(y,null,w(f.program_list,o=>u((m(),p("option",{key:o.id,value:o.id},[O(x(o.program)+" ",1),o.major!=null?(m(),p("span",pe," - "+x(o.major),1)):q("",!0)],8,me)),[[K,o.disciplineId==r(s).discipline]])),128))],8,de),[[$,r(s).program]]),d(b,{message:t.$page.props.errors.program,theme:"dark"},null,8,["message"])])]),e("div",ue,[e("div",fe,[he,u(e("input",{id:"number",type:"number",placeholder:"CMO No.","onUpdate:modelValue":n[3]||(n[3]=o=>r(s).number=o),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).number]]),d(b,{message:t.$page.props.errors.number,theme:"dark"},null,8,["message"])]),e("div",_e,[ge,u(e("input",{id:"series",type:"number",placeholder:"Series","onUpdate:modelValue":n[4]||(n[4]=o=>r(s).series=o),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).series]]),d(b,{message:t.$page.props.errors.series,theme:"dark"},null,8,["message"])]),e("div",be,[ve,u(e("input",{id:"version",type:"number",placeholder:"Version","onUpdate:modelValue":n[5]||(n[5]=o=>r(s).version=o),class:"h-10 m-1 rounded text-sm border-2 border-gray-400"},null,512),[[v,r(s).version]]),d(b,{message:t.$page.props.errors.version,theme:"dark"},null,8,["message"])])])])])])]),_:1}),d(M,null,{"main-content":g(()=>[d(R,null,{"table-head":g(()=>[ye,xe,we]),"table-body":g(()=>[(m(!0),p(y,null,w(I.value,(o,l)=>(m(),p("tr",{key:l,class:L({"bg-slate-200":l%2==1})},[e("td",ke,x(l+1),1),e("td",Ie,[u(e("textarea",{ref_for:!0,ref:"area",id:"area"+l,"onUpdate:modelValue":h=>r(s).area[l]=h,maxlength:"255",class:"areaInput min-h-max h-10 resize-none text-sm rounded w-full overflow-hidden border-2 border-gray-400",onFocus:h=>t.handleAreaInput(l),onInput:h=>t.handleAreaInput(l)},null,40,Me),[[v,r(s).area[l]]])]),e("td",Ce,[u(e("textarea",{ref_for:!0,ref:"minreq",id:"minReq"+l,"onUpdate:modelValue":h=>r(s).minReq[l]=h,maxlength:"5000",class:"minreqInput min-h-max resize-none text-sm bg-white rounded w-full overflow-hidden border-2 border-gray-400",onFocus:h=>t.handleMinreqInput(l),onInput:h=>t.handleMinreqInput(l)},null,40,qe),[[v,r(s).minReq[l]]])])],2))),128))]),_:1})]),_:1}),S.value?(m(),z(H,{key:0,message:"Processing...",type:"processing"})):q("",!0)],64)}}});export{Se as default};
