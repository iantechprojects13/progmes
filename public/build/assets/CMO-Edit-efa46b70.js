import{k as H,l as P,m as i,h as C,T as z,A as g,o as m,f as u,a as c,w as _,c as K,g as I,F as y,b as e,e as q,i as p,D as V,u as n,C as x,t as w,d as $,p as T,B as v,n as G,O}from"./app-a1d3aa91.js";import J from"./Layout-8eb335a9.js";const Q={class:"w-full flex flex-row items-center justify-between"},W={class:"w-full flex flex-row items-center"},X=e("button",{class:"w-8 h-8 rounded-full hover:bg-gray-200 tooltipForActions","data-tooltip":"Back"},[e("i",{class:"fas fa-arrow-left"})],-1),Y=e("div",{class:"ml-3 font-bold"},"Edit CMO",-1),Z=e("button",{class:"w-24 h-10 bg-blue-500 hover:bg-blue-600 rounded text-white"},[$(" Save "),e("i",{class:"fas fa-caret-down ml-2"})],-1),ee={class:"w-48"},te={class:"border-gray-400"},oe={class:"border border-gray-300 rounded my-5"},se={class:"w-full flex flex-col justify-between p-5"},re={class:"flex flex-col lg:flex-row"},ne={class:"w-full flex flex-col mt-2 lg:mt-0"},le=e("label",{for:"discipline",class:"font-bold text-gray-600"},"Discipline",-1),ae=e("option",{value:null}," Select discipline ",-1),ie=["value"],de={class:"w-full flex flex-col mt-2 lg:mt-0"},ce=e("label",{for:"program",class:"font-bold text-gray-600"},"Program",-1),me=["disabled"],ue=e("option",{value:null}," Select program ",-1),pe=["value"],fe={key:0},he={class:"flex flex-col lg:flex-row md:mt-3"},ge={class:"w-full flex flex-col mt-2 lg:mt-0"},_e=e("label",{for:"number",class:"font-bold text-gray-600"},"CMO No.",-1),be={class:"w-full flex flex-col mt-2 lg:mt-0"},ve=e("label",{for:"series",class:"font-bold text-gray-600"},"Series",-1),ye={class:"w-full flex flex-col mt-2 lg:mt-0"},we=e("label",{for:"version",class:"font-bold text-gray-600"},"Version",-1),xe=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Item No ",-1),ke=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Area ",-1),Me=e("th",{class:"px-2 py-3 border-b border-gray-400"}," Minimum Requirement ",-1),Ce={class:"w-24 text-center align-top py-5 font-bold"},Ie={class:"max-w-18 w-1/4 min-w-18 py-5 px-2 align-top"},qe=["id","onUpdate:modelValue","onFocus","onInput"],Ve={class:"min-w-18 py-5 px-2 align-top"},Oe=["id","onUpdate:modelValue","onFocus","onInput"],$e={data(){return{openSaveOption:!1}},layout:J,methods:{handleAreaInput(f){let d=this.$refs.area[f];d.style.height="18px",d.style.height=d.scrollHeight+"px"},handleMinreqInput(f){let d=this.$refs.minreq[f];d.style.height="18px",d.style.height=d.scrollHeight+"px"}}},Ue=Object.assign($e,{__name:"CMO-Edit",props:["cmo","discipline_list","program_list"],setup(f){H(()=>{window.addEventListener("keydown",d)}),P(()=>{window.removeEventListener("keydown",d)});const d=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="s"||t.key==="S")&&(t.preventDefault(),A.saveBtn.value.click())},a=f,S=i(!1);i(!1);const k=i([]),A={saveBtn:k},M=C(()=>{let t=[];for(var s=0;s<a.cmo.criteria.length;s++)t.push(a.cmo.criteria[s].area);return t}),U=C(()=>{let t=[];for(var s=0;s<a.cmo.criteria.length;s++)t.push(a.cmo.criteria[s].minimumRequirement);return t}),r=z({id:i(a.cmo.id),discipline:i(a.cmo.disciplineId)!==null?i(a.cmo.disciplineId):null,program:i(a.cmo.programId)!==null?i(a.cmo.programId):null,number:i(a.cmo.number),series:i(a.cmo.series),version:i(a.cmo.version),area:M,minReq:U});function B(){O.post("/admin/CMOs/save-and-publish",r,{replace:!0})}function F(){O.post("/admin/CMOs/save-as-draft",r,{replace:!0})}return(t,s)=>{const N=g("Head"),E=g("Link"),D=g("dropdown-option"),b=g("FormErrorMessage"),R=g("content-table"),j=g("content-container"),L=g("Notification");return m(),u(y,null,[c(N,{title:"Edit CMO"}),c(j,{hasAdminPanel:!0},{"content-title":_(()=>[e("div",Q,[e("div",W,[c(E,{href:t.$page.url.includes("/admin/CMOs/draft")?"/admin/CMOs/draft":"/admin/CMOs/"},{default:_(()=>[X]),_:1},8,["href"]),Y])]),e("div",null,[c(D,{position:"right"},{button:_(()=>[Z]),options:_(()=>[e("div",ee,[e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",ref_key:"saveBtn",ref:k,onClick:q(F,["prevent"])}," Save as draft ",512),e("button",{class:"py-1.5 hover:bg-gray-200 w-full text-left indent-7",onClick:q(B,["prevent"])}," Publish ")])]),_:1})])]),"main-content":_(()=>[e("div",te,[e("div",oe,[e("div",se,[e("div",re,[e("div",ne,[le,p(e("select",{id:"discipline","onUpdate:modelValue":s[0]||(s[0]=o=>n(r).discipline=o),class:"py-1 px-3 h-10 text-sm border border-gray-400 rounded m-1",onChange:s[1]||(s[1]=o=>n(r).program=null)},[ae,(m(!0),u(y,null,x(f.discipline_list,o=>(m(),u("option",{key:o.id,value:o.id},w(o.discipline),9,ie))),128))],544),[[V,n(r).discipline]]),c(b,{message:t.$page.props.errors.discipline,theme:"dark"},null,8,["message"])]),e("div",de,[ce,p(e("select",{id:"program","onUpdate:modelValue":s[2]||(s[2]=o=>n(r).program=o),class:"py-1 px-3 h-10 text-sm border border-gray-400 rounded m-1",disabled:!n(r).discipline},[ue,(m(!0),u(y,null,x(f.program_list,o=>p((m(),u("option",{key:o.id,value:o.id},[$(w(o.program)+" ",1),o.major!=null?(m(),u("span",fe," - "+w(o.major),1)):I("",!0)],8,pe)),[[T,o.disciplineId==n(r).discipline]])),128))],8,me),[[V,n(r).program]]),c(b,{message:t.$page.props.errors.program,theme:"dark"},null,8,["message"])])]),e("div",he,[e("div",ge,[_e,p(e("input",{id:"number",type:"number",placeholder:"CMO No.","onUpdate:modelValue":s[3]||(s[3]=o=>n(r).number=o),class:"h-10 m-1 rounded text-sm border border-gray-400"},null,512),[[v,n(r).number]]),c(b,{message:t.$page.props.errors.number,theme:"dark"},null,8,["message"])]),e("div",be,[ve,p(e("input",{id:"series",type:"number",placeholder:"Series","onUpdate:modelValue":s[4]||(s[4]=o=>n(r).series=o),class:"h-10 m-1 rounded text-sm border border-gray-400"},null,512),[[v,n(r).series]]),c(b,{message:t.$page.props.errors.series,theme:"dark"},null,8,["message"])]),e("div",ye,[we,p(e("input",{id:"version",type:"number",placeholder:"Version","onUpdate:modelValue":s[5]||(s[5]=o=>n(r).version=o),class:"h-10 m-1 rounded text-sm border border-gray-400"},null,512),[[v,n(r).version]]),c(b,{message:t.$page.props.errors.version,theme:"dark"},null,8,["message"])])])])])]),c(R,null,{"table-head":_(()=>[xe,ke,Me]),"table-body":_(()=>[(m(!0),u(y,null,x(M.value,(o,l)=>(m(),u("tr",{key:l,class:G([{"bg-gray-100":l%2==1},"hover:bg-gray-200"])},[e("td",Ce,w(l+1),1),e("td",Ie,[p(e("textarea",{ref_for:!0,ref:"area",id:"area"+l,"onUpdate:modelValue":h=>n(r).area[l]=h,maxlength:"255",class:"areaInput min-h-max h-10 resize-none text-sm rounded w-full overflow-hidden border border-gray-400",onFocus:h=>t.handleAreaInput(l),onInput:h=>t.handleAreaInput(l)},null,40,qe),[[v,n(r).area[l]]])]),e("td",Ve,[p(e("textarea",{ref_for:!0,ref:"minreq",id:"minReq"+l,"onUpdate:modelValue":h=>n(r).minReq[l]=h,maxlength:"5000",class:"minreqInput min-h-max resize-none text-sm bg-white rounded w-full overflow-hidden border border-gray-400",onFocus:h=>t.handleMinreqInput(l),onInput:h=>t.handleMinreqInput(l)},null,40,Oe),[[v,n(r).minReq[l]]])])],2))),128))]),_:1})]),_:1}),S.value?(m(),K(L,{key:0,message:"Processing...",type:"processing"})):I("",!0)],64)}}});export{Ue as default};
