import{m as b,T as U,s as j,A as h,o as s,f as a,a as r,w as n,F as S,i as c,p as v,b as e,e as z,d as F,B as K,u as p,z as q,C as R,n as G,t as g,g as J,D,O as N}from"./app-71e3066c.js";import Q from"./Layout-070d85fc.js";const W=["disabled"],X={key:0},Y=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Z=[Y],ee={key:1},te=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),oe=e("button",{class:"select-none h-12 w-28 hover:bg-gray-100 text-blue-500 border-b-4 relative font-bold border-blue-500"}," Published ",-1),se=e("button",{class:"select-none h-12 w-24 hover:bg-gray-100 text-gray-700 hover:text-black"}," Draft ",-1),ae={class:"w-full flex flex-row relative items-center"},le=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),ne={class:"mr-1"},ie=e("i",{class:"fas fa-filter"},null,-1),re=[ie],de=e("button",{class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ce=e("th",{class:"p-2 pl-5"},"CHED Memorandum Order",-1),he=e("th",{class:"p-2"},"Program",-1),ue=e("th",{class:"p-2"},"Active Status",-1),pe={class:"p-2 pr-5 text-right"},fe=e("i",{class:"fas fa-ellipsis-v"},null,-1),_e=[fe],ve={key:0},ge=e("td",{class:"text-center py-10",colspan:"3"}," No CMO found ",-1),me=[ge],be={class:"p-2 pl-5"},we={class:"p-2"},ye={key:0},Ce={class:"p-2"},xe={key:0,class:"w-fit text-xs px-1 rounded bg-green-500 text-white whitespace-nowrap"},Me={key:1,class:"w-fit text-xs px-1 rounded text-white bg-gray-500 whitespace-nowrap"},ke={class:"p-2 pr-5 text-right whitespace-nowrap"},Ae=["onClick"],Oe=e("i",{class:"fas fa-eye"},null,-1),Se=[Oe],Fe=["onClick"],De=e("i",{class:"fas fa-toggle-off"},null,-1),Ne=[De],$e=["onClick"],Ee=e("i",{class:"fas fa-toggle-on"},null,-1),Ve=[Ee],Le=["onClick"],Be=e("i",{class:"fas fa-trash"},null,-1),He=[Be],Te={class:"flex flex-col"},Ie=e("label",{for:"isActive"},"Active Status",-1),Pe=e("option",{value:null},"All",-1),Ue=e("option",{value:1},"Active",-1),je=e("option",{value:0},"Not Active",-1),ze=[Pe,Ue,je],Ke={class:"mt-3 flex flex-col"},qe=e("label",{for:"show"},"Items per page",-1),Re=e("option",{value:"25"},"25",-1),Ge=e("option",{value:"50"},"50",-1),Je=e("option",{value:"100"},"100",-1),Qe=e("option",{value:"200"},"200",-1),We=[Re,Ge,Je,Qe],Xe={key:0},Ye=e("i",{class:"fas fa-spinner animate-spin"},null,-1),Ze=[Ye],et={key:1},tt={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(l,m,u){this.confirmationModal=!this.confirmationModal,this.selectedCMO=l,this.modaltype=m,this.title=u},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:Q},at=Object.assign(tt,{__name:"CMO",props:["cmo_list","canEdit","canImport","canDraft","filters"],setup(l){const m=b(null),u=b(!1),w=b(!1),f=b(!1);function $(o){N.get("/admin/CMOs/"+o+"/view")}const _=l,d=U({show:_.filters.show!=null?_.filters.show:null,search:_.filters.search,isActive:_.filters.isActive!=null?_.filters.isActive:null});function y(){w.value=!w.value}function E(){d.get("/admin/CMOs",{onStart:()=>{f.value=!0},onFinish:()=>{f.value=!1},preserveState:!1,preserveScroll:!0})}function V(){d.get("/admin/CMOs",{onStart:()=>{f.value=!0},onFinish:()=>{f.value=!1,y()},preserveState:!0,preserveScroll:!0})}return j(m,o=>{N.post("/admin/CMOs/create/import",{file:o},{onStart:()=>{u.value=!0},onFinish:()=>{u.value=!1},preserveScroll:!0,preserveState:!1})}),(o,i)=>{const L=h("Head"),M=h("Link"),B=h("content-table"),H=h("content-container"),T=h("modal"),C=h("Notification"),I=h("Confirmation");return s(),a(S,null,[r(L,{title:"CHED Memorandum Order List"}),r(H,{hasAdminPanel:!0,pageTitle:"CHED Memorandum Order List",page:"cmo",hasTopButton:!0,hasSearch:!0,hasFilters:!0,hasNavigation:l.canDraft,data_list:l.cmo_list},{"top-button":n(()=>[c(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:i[0]||(i[0]=t=>m.value=t.target.files[0])},null,544),e("button",{onClick:i[1]||(i[1]=z(t=>o.$refs.uploadfile.click(),["prevent"])),disabled:u.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 px-3 rounded text-white text whitespace-nowrap"},[u.value?(s(),a("span",X,Z)):(s(),a("span",ee,[te,F("Import CMO")]))],8,W)],512),[[v,l.canImport]])]),navigation:n(()=>[e("div",null,[oe,r(M,{href:o.route("admin.cmo.draft")},{default:n(()=>[se]),_:1},8,["href"])])]),search:n(()=>[e("div",ae,[le,c(e("input",{onKeydown:q(E,["enter"]),"onUpdate:modelValue":i[2]||(i[2]=t=>p(d).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[K,p(d).search]])])]),options:n(()=>[e("div",ne,[e("button",{onClick:y,class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},re),r(M,{href:"/admin/CMOs"},{default:n(()=>[de]),_:1})])]),"main-content":n(()=>[r(B,null,{"table-head":n(()=>[ce,he,ue,c(e("th",pe,_e,512),[[v,l.canEdit]])]),"table-body":n(()=>[l.cmo_list.data.length==0?(s(),a("tr",ve,me)):(s(!0),a(S,{key:1},R(l.cmo_list.data,(t,P)=>{var k,A,O;return s(),a("tr",{key:t.id,class:G(["hover:bg-gray-200 border-b",{"bg-gray-100":P%2==1}])},[e("td",be," CMO No."+g(t.number)+" S. "+g(t.series)+", Version "+g(t.version),1),e("td",we,[F(g((k=t.program)==null?void 0:k.program)+" ",1),(A=t.program)!=null&&A.major?(s(),a("span",ye," - "+g((O=t.program)==null?void 0:O.major),1)):J("",!0)]),e("td",Ce,[t.isActive?(s(),a("div",xe," Active ")):(s(),a("div",Me," Not Active "))]),e("td",ke,[e("button",{onClick:x=>$(t.id),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-green-500 hover:text-green-600 tooltipForActions","data-tooltip":"View"},Se,8,Ae),t.isActive?c((s(),a("button",{key:1,onClick:x=>o.toggleConfirmationModal(t,"deactivate","Deactivate CMO"),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-blue-500 hover:text-blue-600 tooltipForActions","data-tooltip":"Deactivate"},Ve,8,$e)),[[v,l.canEdit]]):c((s(),a("button",{key:0,onClick:x=>o.toggleConfirmationModal(t,"activate","Activate CMO"),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-gray-500 hover:text-gray-600 tooltipForActions","data-tooltip":"Activate"},Ne,8,Fe)),[[v,l.canEdit]]),c(e("button",{onClick:x=>o.toggleConfirmationModal(t,"deleteCMO","Delete Published CMO"),class:"select-none h-8 w-8 text-xl text-center rounded-full hover:bg-gray-300 text-red-500 hover:text-red-600 tooltipForActions","data-tooltip":"Delete"},He,8,Le),[[v,l.canEdit]])])],2)}),128))]),_:1})]),_:1},8,["hasNavigation","data_list"]),r(T,{showModal:w.value,onClose:y,width:"sm",height:"long",title:"Filters"},{"custom-button":n(()=>[e("button",{onClick:V,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[f.value?(s(),a("span",Xe,Ze)):(s(),a("span",et,"Apply"))])]),default:n(()=>[e("div",null,[e("div",Te,[Ie,c(e("select",{"onUpdate:modelValue":i[3]||(i[3]=t=>p(d).isActive=t),id:"isActive",class:"rounded border-gray-400"},ze,512),[[D,p(d).isActive]])]),e("div",Ke,[qe,c(e("select",{"onUpdate:modelValue":i[4]||(i[4]=t=>p(d).show=t),id:"show",class:"rounded border-gray-400"},We,512),[[D,p(d).show]])])])]),_:1},8,["showModal"]),r(C,{message:o.$page.props.flash.success,type:"success"},null,8,["message"]),r(C,{message:o.$page.props.flash.failed,type:"failed"},null,8,["message"]),r(C,{message:o.$page.props.errors.file,type:"failed"},null,8,["message"]),r(I,{showModal:o.confirmationModal,onClose:o.closeModal,title:o.title,modaltype:o.modaltype,selected:o.selectedCMO,width:"md",height:"short"},null,8,["showModal","onClose","title","modaltype","selected"])],64)}}});export{at as default};
