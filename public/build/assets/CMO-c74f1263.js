import{m as b,T,s as j,A as r,o as a,f as n,a as i,w as l,g as x,F as A,b as e,i as c,B as I,u as m,z as P,p,e as R,d as D,C as U,n as z,t as _,D as K,O as S}from"./app-251762d9.js";import q from"./Layout-a6df9f1a.js";const G=e("button",{class:"select-none text-blue-500 h-10 mr-7 border-b-2 font-bold border-blue-500"}," CMO ",-1),J=e("button",{class:"select-none text-gray-500 hover:text-black"}," Draft ",-1),Q={class:"w-full flex justify-end relative"},W=e("i",{class:"fas fa-search"},null,-1),X=[W],Y=["disabled"],Z={key:0},ee=e("i",{class:"fas fa-spinner animate-spin"},null,-1),te=[ee],oe={key:1},se=e("i",{class:"fas fa-file-import mr-2 text-base"},null,-1),ae={class:"mr-1"},ne=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ie=e("th",{class:"p-3 pl-5"},"CHED Memorandum Order",-1),le=e("th",{class:"p-3"},"Program",-1),de=e("th",{class:"p-3"},"Active Status",-1),re={class:"p-3 text-right"},ce=e("i",{class:"fas fa-ellipsis-v"},null,-1),he=[ce],ue={key:0},pe=e("td",{class:"text-center py-10",colspan:"3"}," No CMO found ",-1),_e=[pe],fe={class:"p-3 whitespace-normal pl-5"},me={class:"p-3 whitespace-normal"},ge={key:0},ve={class:"p-3 whitespace-normal"},be={key:0,class:"w-fit text-xs px-1 rounded bg-green-600 text-white"},Ce={key:1,class:"w-fit text-xs px-1 rounded bg-gray-300"},we={class:"p-3 text-right"},Me=["onClick"],ye=e("i",{class:"fas fa-eye"},null,-1),ke=[ye],Oe=["onClick"],xe=e("i",{class:"fas fa-toggle-on"},null,-1),Ae=[xe],De=["onClick"],Se=e("i",{class:"fas fa-toggle-off"},null,-1),Ne=[Se],$e=["onClick"],Ee=e("i",{class:"fas fa-trash"},null,-1),Fe=[Ee],Ve=e("div",{class:"mr-2"},"Items per page",-1),Le=e("option",{value:"25"},"25",-1),Be=e("option",{value:50},"50",-1),He=e("option",{value:75},"75",-1),Te=e("option",{value:100},"100",-1),je=e("option",{value:200},"200",-1),Ie=[Le,Be,He,Te,je],Pe={key:0},Re={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(s,f,h){this.confirmationModal=!this.confirmationModal,this.selectedCMO=s,this.modaltype=f,this.title=h},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:q},Ke=Object.assign(Re,{__name:"CMO",props:["cmo_list","canEdit","canImport","canDraft","filters"],setup(s){const f=b(null);b([]);const h=b(!1);function N(o){S.get("/admin/CMOs/"+o+"/view")}const C=s,u=T({show:C.filters.show,search:C.filters.search});function $(){u.get("/admin/CMOs",{preserveScroll:!1,preserveState:!1})}function w(){u.get("/admin/CMOs",{preserveScroll:!0})}return j(f,o=>{S.post("/admin/CMOs/create/import",{file:o},{onStart:()=>{h.value=!0},onFinish:()=>{h.value=!1},preserveScroll:!0,preserveState:!1})}),(o,d)=>{const E=r("Head"),F=r("AdminPanel"),M=r("Link"),V=r("content-table"),L=r("content-container"),B=r("Confirmation"),g=r("Notification");return a(),n(A,null,[i(E,{title:"CHED Memorandum Order List"}),i(F),i(L,{pageTitle:"CHED Memorandum Order List",page:"cmo",hasTopButton:!0,hasSearch:!0,hasFilters:!0,hasNavigation:s.canDraft,data_list:s.cmo_list},{navigation:l(()=>[e("div",null,[G,i(M,{href:o.route("admin.cmo.draft")},{default:l(()=>[J]),_:1},8,["href"])])]),search:l(()=>[e("div",Q,[c(e("input",{onKeydown:P(w,["enter"]),"onUpdate:modelValue":d[0]||(d[0]=t=>m(u).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded border border-gray-400 bg-slate-100 h-10 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[I,m(u).search]]),e("button",{onClick:w,class:"text-gray-700 hover:text-black active:text-blue-500 h-10 w-10 rounded absolute right-2"},X)])]),"top-button":l(()=>[c(e("div",null,[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:d[1]||(d[1]=t=>f.value=t.target.files[0])},null,544),e("button",{onClick:d[2]||(d[2]=R(t=>o.$refs.uploadfile.click(),["prevent"])),disabled:h.value,class:"select-none bg-blue-500 hover:bg-blue-600 h-10 w-32 rounded text-white text-sm whitespace-nowrap"},[h.value?(a(),n("span",Z,te)):(a(),n("span",oe,[se,D("Import CMO")]))],8,Y)],512),[[p,s.canImport]])]),options:l(()=>[e("div",ae,[i(M,{href:"/admin/CMOs"},{default:l(()=>[ne]),_:1})])]),"main-content":l(()=>[i(V,null,{"table-head":l(()=>[ie,le,de,c(e("th",re,he,512),[[p,s.canEdit]])]),"table-body":l(()=>[s.cmo_list.data.length==0?(a(),n("tr",ue,_e)):(a(!0),n(A,{key:1},U(s.cmo_list.data,(t,H)=>{var y,k,O;return a(),n("tr",{key:t.id,class:z(["hover:bg-slate-300",{"bg-slate-200":H%2==0}])},[e("td",fe," CMO No."+_(t.number)+" Series of "+_(t.series)+", Version "+_(t.version),1),e("td",me,[D(_((y=t.program)==null?void 0:y.program)+" ",1),(k=t.program)!=null&&k.major?(a(),n("span",ge," - "+_((O=t.program)==null?void 0:O.major),1)):x("",!0)]),e("td",ve,[t.isActive?(a(),n("div",be," Active ")):(a(),n("div",Ce," Not Active "))]),e("td",we,[e("button",{onClick:v=>N(t.id),class:"h-10 w-10 mr-1 rounded bg-green-600 hover:bg-green-700 text-white tooltipForActions","data-tooltip":"View"},ke,8,Me),t.isActive?c((a(),n("button",{key:1,onClick:v=>o.toggleConfirmationModal(t,"deactivate","Deactivate CMO"),class:"h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Deactivate"},Ne,8,De)),[[p,s.canEdit]]):c((a(),n("button",{key:0,onClick:v=>o.toggleConfirmationModal(t,"activate","Activate CMO"),class:"h-10 w-10 mr-1 rounded bg-blue-500 hover:bg-blue-600 text-white tooltipForActions","data-tooltip":"Activate"},Ae,8,Oe)),[[p,s.canEdit]]),c(e("button",{onClick:v=>o.toggleConfirmationModal(t,"deleteCMO","Delete Published CMO"),class:"h-10 w-10 rounded bg-red-500 hover:bg-red-600 text-white tooltipForActions","data-tooltip":"Delete"},Fe,8,$e),[[p,s.canEdit]])])],2)}),128))]),_:1})]),"show-item":l(()=>[Ve,c(e("select",{"onUpdate:modelValue":d[3]||(d[3]=t=>m(u).show=t),id:"showResultCount",onChange:$,class:"select-none rounded h-8 w-20 p-1 text-sm"},Ie,544),[[K,m(u).show]])]),_:1},8,["hasNavigation","data_list"]),o.confirmationModal?(a(),n("div",Pe,[i(B,{onClose:o.closeModal,title:o.title,modaltype:o.modaltype,selected:o.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):x("",!0),i(g,{message:o.$page.props.flash.success,type:"success"},null,8,["message"]),i(g,{message:o.$page.props.flash.failed,type:"failed"},null,8,["message"]),i(g,{message:o.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{Ke as default};
