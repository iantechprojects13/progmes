import{m as _,T as $,s as L,A as r,o,f as a,a as n,w as l,g as C,F as y,b as e,d as E,i as M,B as V,u as k,z as B,p as H,C as T,n as F,t as p,O}from"./app-f4d80686.js";import"./index-5fbe21de.js";import P from"./Layout-713aa5ab.js";const j=["disabled"],z={key:0},I=e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),K={key:1},U=e("button",{class:"text-blue-500 h-10 mr-8 border-b-2 font-bold border-blue-500"}," CMO List ",-1),q=e("button",{class:"text-gray-500 hover:text-black"}," Draft ",-1),G={class:"w-full flex justify-end relative"},J=e("i",{class:"fas fa-search"},null,-1),Q=[J],R={class:"mr-1"},W=e("button",{class:"px-2 border-2 w-12 whitespace-nowrap rounded h-10 text-gray-600 hover:text-black border-gray-500"},[e("i",{class:"fas fa-refresh"})],-1),X=e("th",{class:"py-2"},"CHED Memorandum Order",-1),Y=e("th",{class:"py-2"},"Program",-1),Z=e("th",{class:"py-2"},"Active Status",-1),ee={class:"py-2 text-right"},te=e("i",{class:"fas fa-ellipsis-v"},null,-1),se=[te],oe={class:"p-2"},ae={class:"p-2"},ne={class:"p-2"},le={key:0,class:"w-fit text-xs px-1 rounded bg-green-600 text-white"},ie={key:1,class:"w-fit text-xs px-1 rounded bg-gray-300"},re={class:"p-2 text-right"},de=["onClick"],ce=["onClick"],he=["onClick"],ue={key:0},pe=e("td",{class:"text-center py-10",colspan:"3"}," No CMO found ",-1),fe=[pe],_e={key:0},me={data(){return{openCreateDropdown:!1,openListOption:!1,uploadModal:!1,confirmationModal:!1,selectedCMO:"",modaltype:"",title:""}},methods:{openUploadModal(){this.uploadModal=!this.uploadModal},toggleConfirmationModal(i,h,d){this.confirmationModal=!this.confirmationModal,this.selectedCMO=i,this.modaltype=h,this.title=d},closeModal(){this.confirmationModal=!1,this.uploadModal=!1}},layout:P},ye=Object.assign(me,{__name:"CMO",props:["cmo_list","canEdit","filters"],setup(i){const h=_(null);_([]);const d=_(!1),u=$({search:i.filters.search});function m(){u.search==""?O.get("/admin/CMOs"):u.get("/admin/CMOs",{preserveScroll:!0})}return L(h,t=>{O.post("/admin/CMOs/create/import",{file:t},{onStart:()=>{d.value=!0},onFinish:()=>{d.value=!1},preserveScroll:!0,preserveState:!1})}),(t,c)=>{const w=r("Head"),x=r("AdminPanel"),g=r("Link"),D=r("content-table"),A=r("content-container"),N=r("Confirmation"),f=r("Notification");return o(),a(y,null,[n(w,{title:"CHED Memorandum Order List"}),n(x),n(A,{pageTitle:"CHED Memorandum Order List",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasNavigation:"true",data_list:i.cmo_list},{"top-button":l(()=>[e("input",{ref:"uploadfile",hidden:"",type:"file",onChange:c[0]||(c[0]=s=>h.value=s.target.files[0])},null,544),e("button",{onClick:c[1]||(c[1]=s=>t.$refs.uploadfile.click()),disabled:d.value,class:"bg-blue-500 hover:bg-blue-600 h-10 px-2 rounded text-white"},[d.value?(o(),a("span",z,[I,E("Importing...")])):(o(),a("span",K,"Import CMO"))],8,j)]),navigation:l(()=>[e("div",null,[U,n(g,{href:t.route("admin.cmo.draft")},{default:l(()=>[q]),_:1},8,["href"])])]),search:l(()=>[e("div",G,[M(e("input",{onKeydown:B(m,["enter"]),"onUpdate:modelValue":c[2]||(c[2]=s=>k(u).search=s),type:"search",id:"content-search",placeholder:"Search a CMO",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[V,k(u).search]]),e("button",{onClick:m,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},Q)])]),options:l(()=>[e("div",R,[n(g,{href:"/admin/CMOs"},{default:l(()=>[W]),_:1})])]),"main-content":l(()=>[n(D,null,{"table-head":l(()=>[X,Y,Z,M(e("th",ee,se,512),[[H,i.canEdit]])]),"table-body":l(()=>[(o(!0),a(y,null,T(i.cmo_list.data,(s,S)=>{var b;return o(),a("tr",{key:s.id,class:F(["hover:bg-gray-100",{"bg-slate-200":S%2==0}])},[e("td",oe," CMO No."+p(s.number)+" Series of "+p(s.series)+", Version "+p(s.version),1),e("td",ae,p((b=s.program)==null?void 0:b.program),1),e("td",ne,[s.isActive?(o(),a("div",le," Active ")):(o(),a("div",ie," Not Active "))]),e("td",re,[e("button",{onClick:v=>t.toggleConfirmationModal(s,"deleteCMO","Delete Published CMO"),class:"h-8 px-2 mr-1 rounded bg-red-500 hover:bg-red-600 text-white"}," Delete ",8,de),s.isActive?(o(),a("button",{key:1,class:"h-8 px-2 w-24 rounded bg-blue-500 hover:bg-blue-600 text-white",onClick:v=>t.toggleConfirmationModal(s,"deactivate","Deactivate CMO")}," Deactivate ",8,he)):(o(),a("button",{key:0,class:"h-8 px-2 w-24 rounded bg-blue-500 hover:bg-blue-600 text-white",onClick:v=>t.toggleConfirmationModal(s,"activate","Activate CMO")}," Activate ",8,ce))])],2)}),128)),i.cmo_list.data.length==0?(o(),a("tr",ue,fe)):C("",!0)]),_:1})]),_:1},8,["data_list"]),t.confirmationModal?(o(),a("div",_e,[n(N,{onClose:t.closeModal,title:t.title,modaltype:t.modaltype,selected:t.selectedCMO},null,8,["onClose","title","modaltype","selected"])])):C("",!0),n(f,{message:t.$page.props.flash.success,type:"success"},null,8,["message"]),n(f,{message:t.$page.props.flash.failed,type:"failed"},null,8,["message"]),n(f,{message:t.$page.props.errors.file,type:"failed"},null,8,["message"])],64)}}});export{ye as default};
