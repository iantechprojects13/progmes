import{m as C,E as X,T as Z,A as _,o,f as s,a as u,w as r,u as h,c as B,F as v,O as ee,b as e,i as p,D as x,e as te,C as k,t as d,p as D,B as oe,z as se,H as ae,d as U,n as H,g}from"./app-612f8f79.js";import ne from"./Layout-688c6e41.js";const le={class:"text-sm mb-2 flex items-center"},ie=e("div",{class:"mr-2 font-bold"},"Academic Year:",-1),re=["value"],ce={class:"absolute right-8"},de=e("button",{class:"h-10 px-3 rounded bg-gray-500 hover:bg-gray-600 text-white"},"Set as default AY",-1),ue=[de],pe={class:"w-full flex justify-end relative"},me=e("i",{class:"fas fa-search"},null,-1),_e=[me],he={class:"flex md:flex-row flex-col text-sm"},fe={class:"w-full"},ve=e("i",{class:"fas fa-rocket mr-2"},null,-1),ge=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ye=e("th",{class:"p-3 pl-5"},"Institution",-1),be=e("th",{class:"p-3"},"Program",-1),we=e("th",{class:"p-3"},"Major",-1),xe=e("th",{class:"p-3"},"CMO",-1),ke=e("th",{class:"p-3"},"Status",-1),Se={class:"p-3 text-right"},Ce=e("i",{class:"fas fa-ellipsis-v"},null,-1),De=[Ce],Me={key:0},Ee=e("td",{class:"text-center py-10",colspan:"5"}," No compliance evaluation tool found ",-1),Ne=[Ee],Pe={class:"p-3 pl-5"},Ve={class:"p-3"},Ae={class:"p-3"},Ye={class:"p-3"},Oe={class:"p-3"},Te={key:0,class:"bg-gray-600 text-white w-fit px-1 rounded"},$e={key:1,class:"bg-green-600 text-white w-fit px-1 rounded"},Fe={key:2,class:"bg-blue-500 text-white w-fit px-1 rounded"},Le={key:3,class:"bg-emerald-500 text-white w-fit px-1 rounded"},je={class:"p-3 text-right"},Be=e("div",{class:"mr-2"},"Items per page",-1),Ue=e("option",{value:25},"25",-1),He=e("option",{value:50},"50",-1),Ie=e("option",{value:75},"75",-1),Re=e("option",{value:100},"100",-1),ze=e("option",{value:200},"200",-1),Ke=[Ue,He,Ie,Re,ze],qe={class:"p-3"},Ge=e("label",{class:"font-bold text-gray-700",for:"program"},"Program",-1),Je=e("option",{value:null},"Select program",-1),Qe=["value"],We={key:0},Xe={class:"mt-3"},Ze=e("label",{class:"font-bold text-gray-700",for:"cmo"},"CHED Memorandum Order",-1),et=["value"],tt={class:"mt-3"},ot=e("label",{class:"font-bold text-gray-700",for:"toolEffectivity"},"Effective A.Y.",-1),st=["value"],at={key:0},nt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),lt=[nt],it={key:1},rt={data(){return{openSelectPageDropdown:!1,academicYearDropdown:["2023-2024","2024-2025","2025-2026","2026-2027","2027-2028","2028-2029","2029-2030"]}},layout:ne},ut=Object.assign(rt,{__name:"EvaluationForm",props:["institutionProgramList","effectivity","program_list","academicYear","canEdit","filters"],setup(m){let f=C(!1);const S=C(!1),I=()=>{f.value=!1},y=m,n=X({program:null,cmo:null,effectivity:C(y.effectivity)});function M(){var i;(i=n.program)!=null&&i.active_cmo?n.cmo=n.program.active_cmo:n.cmo=null,ee.post("/admin/form/deploy",n,{onStart:()=>{S.value=!0},onFinish:()=>{S.value=!1},preserveState:!1})}const c=Z({ay:y.filters.academicYear,show:y.filters.show,search:y.filters.search});function E(){c.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function R(){c.search="",c.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function z(){c.get("/admin/tool",{preserveScroll:!1,preserveState:!0})}return(i,l)=>{const K=_("Head"),q=_("AdminPanel"),G=_("Link"),J=_("content-table"),Q=_("content-container"),W=_("modal"),b=_("Notification");return o(),s(v,null,[u(K,{title:"Evaluation Forms"}),u(q),u(Q,{pageTitle:"Compliance Evaluation Tool",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasNavigation:!0,data_list:m.institutionProgramList},{navigation:r(()=>[e("div",le,[ie,p(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>h(c).ay=t),id:"academicYearDd",onChange:te(R,["prevent"]),class:"select-none text-sm rounded border-2 border-gray-500"},[(o(!0),s(v,null,k(i.academicYearDropdown,(t,a)=>(o(),s("option",{key:a,value:t},d(t),9,re))),128))],544),[[x,h(c).ay]]),p(e("div",ce,ue,512),[[D,i.$page.props.auth.user.role=="Super Admin"]])])]),search:r(()=>[e("div",pe,[p(e("input",{onKeydown:se(E,["enter"]),"onUpdate:modelValue":l[1]||(l[1]=t=>h(c).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[oe,h(c).search]]),e("button",{onClick:E,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},_e)])]),"top-button":r(()=>[e("div",he,[e("div",fe,[e("button",{onClick:l[2]||(l[2]=t=>ae(f)?f.value=!0:f=!0),class:"select-none whitespace-nowrap px-3 w-fit rounded h-10 bg-blue-500 hover:bg-blue-600 text-white group"},[ve,U(" Deploy tool ")])])])]),options:r(()=>[e("div",null,[u(G,{href:"/admin/tool"},{default:r(()=>[ge]),_:1})])]),"main-content":r(()=>[u(J,null,{"table-head":r(()=>[ye,be,we,xe,ke,p(e("th",Se,De,512),[[D,m.canEdit]])]),"table-body":r(()=>[m.institutionProgramList.data.length==0?(o(),s("tr",Me,Ne)):(o(!0),s(v,{key:1},k(m.institutionProgramList.data,(t,a)=>{var w,N,P,V,A,Y,O,T,$,F,L,j;return o(),s("tr",{key:t.id,class:H(["hover:bg-slate-300",{"bg-slate-200":a%2==0}])},[e("td",Pe,d((w=t.institution)==null?void 0:w.name),1),e("td",Ve,d((N=t.program)==null?void 0:N.program),1),e("td",Ae,d((P=t.program)==null?void 0:P.major),1),e("td",Ye,[e("div",null," CMO No."+d((A=(V=t.evaluation_form[0])==null?void 0:V.cmo)==null?void 0:A.number)+" Series of "+d((O=(Y=t.evaluation_form[0])==null?void 0:Y.cmo)==null?void 0:O.series)+", Version "+d(($=(T=t.evaluation_form[0])==null?void 0:T.cmo)==null?void 0:$.version),1)]),e("td",Oe,[t.evaluation_form.length==0?(o(),s("div",Te," Pending ")):g("",!0),((F=t.evaluation_form[0])==null?void 0:F.status)=="Deployed"?(o(),s("div",$e," Deployed ")):g("",!0),((L=t.evaluation_form[0])==null?void 0:L.status)=="In progress"?(o(),s("div",Fe," In Progress ")):g("",!0),((j=t.evaluation_form[0])==null?void 0:j.status)=="Submitted"?(o(),s("div",Le," Submitted ")):g("",!0)]),p(e("td",je,null,512),[[D,m.canEdit]])],2)}),128))]),_:1})]),"show-item":r(()=>[Be,p(e("select",{"onUpdate:modelValue":l[3]||(l[3]=t=>h(c).show=t),id:"showResultCount",onChange:z,class:"select-none rounded h-8 w-16 p-1 text-sm"},Ke,544),[[x,h(c).show]])]),_:1},8,["data_list"]),u(W,{showModal:h(f),onClose:I,onSubmit:M,type:"deploy",title:"Deploy Compliance Tool"},{"custom-button":r(()=>[e("button",{onClick:M,class:"text-white bg-blue-600 hover:bg-blue-700 h-10 w-20 rounded border"},[S.value?(o(),s("span",at,lt)):(o(),s("span",it,"Deploy"))])]),default:r(()=>{var t;return[e("div",qe,[e("div",null,[Ge,p(e("select",{id:"program",class:"w-full h-10 text-sm rounded border-gray-400 my-0.5","onUpdate:modelValue":l[4]||(l[4]=a=>n.program=a)},[Je,(o(!0),s(v,null,k(m.program_list,a=>(o(),s("option",{key:a.id,value:a},[U(d(a.program)+" ",1),a.major!=null?(o(),s("span",We," - "+d(a.major),1)):g("",!0)],8,Qe))),128))],512),[[x,n.program]])]),e("div",Xe,[e("div",{class:H({"grayscale opacity-50 pointer-events-none":n.program==null})},[Ze,e("input",{id:"cmo",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5",value:((t=n.program)==null?void 0:t.active_cmo)!=null?"CMO No."+n.program.active_cmo.version+" Series of "+n.program.active_cmo.series+" - Version "+n.program.active_cmo.version:"No Active CMO"},null,8,et)],2)]),e("div",tt,[ot,p(e("select",{"onUpdate:modelValue":l[5]||(l[5]=a=>n.effectivity=a),id:"toolEffectivity",class:"w-full text-sm rounded border-gray-400 my-0.5"},[(o(!0),s(v,null,k(i.academicYearDropdown,(a,w)=>(o(),s("option",{key:w,value:a},d(a),9,st))),128))],512),[[x,n.effectivity]])])])]}),_:1},8,["showModal"]),u(b,{message:i.$page.props.flash.success,type:"success"},null,8,["message"]),u(b,{message:i.$page.props.flash.failed,type:"failed"},null,8,["message"]),i.$page.props.errors.program?(o(),B(b,{key:0,message:i.$page.props.errors.program,type:"failed"},null,8,["message"])):(o(),B(b,{key:1,message:i.$page.props.errors.cmo,type:"failed"},null,8,["message"]))],64)}}});export{ut as default};
