import{m as y,T as b,A as m,o as s,f as a,a as c,w as r,u as n,F as x,b as t,H as Q,d as w,t as d,g as _,i as p,B as $,z as W,p as F,C as j,n as H,D as X,G as Y,O as Z}from"./app-f4d80686.js";import tt from"./Layout-713aa5ab.js";const et={class:"flex md:flex-row flex-col"},ot={class:"w-full mr-1 md:mb-0 mb-1"},st={class:"ml-5 text-base text-gray-500"},at={key:0},nt={class:"ml-3"},lt={class:"w-full flex justify-end relative"},it=t("i",{class:"fas fa-search"},null,-1),rt=[it],ct={class:"mr-1"},dt=t("button",{class:"px-2 border-2 w-12 whitespace-nowrap rounded h-10 text-gray-600 hover:text-black border-gray-500"},[t("i",{class:"fas fa-refresh"})],-1),ut=t("th",{class:"p-3"},"Institution",-1),mt=t("th",{class:"p-3"},"Program",-1),_t=t("th",{class:"p-3"},"CMO",-1),ft=t("th",{class:"p-3"},"Status",-1),ht={class:"p-3 text-right"},pt=t("i",{class:"fas fa-ellipsis-v"},null,-1),vt=[pt],gt={key:0},yt=t("td",{class:"text-center py-10 italic",colspan:"5"}," No institution or program found ",-1),bt=[yt],xt={class:"p-3"},wt={class:"p-3"},kt={class:"p-3"},Ct={key:0},St={class:"p-3"},Mt={key:0,class:"bg-gray-600 text-white w-fit px-1 rounded"},Pt={key:1,class:"bg-green-600 text-white w-fit px-1 rounded"},Dt={key:2,class:"bg-blue-500 text-white w-fit px-1 rounded"},Et={key:3,class:"bg-emerald-500 text-white w-fit px-1 rounded"},Nt={class:"p-3 text-right"},Vt={class:"p-3"},Ot=t("label",{class:"font-bold text-gray-700",for:"program"},"Program",-1),Tt=t("option",{value:null},"Select program",-1),At=["value"],Lt={key:0},Bt={class:"mt-3"},$t=t("label",{class:"font-bold text-gray-700",for:"cmo"},"CHED Memorandum Order",-1),Ft=["value"],jt={class:"mt-3"},Ht=t("label",{class:"font-bold text-gray-700",for:"toolEffectivity"},"Effective A.Y",-1),Yt={data(){return{openSelectPageDropdown:!1,academicYear:["2023-2024","2024-2025","2025-2026"]}},layout:tt,methods:{toggleBg(){this.ishidden=!this.ishidden}}},Ut=Object.assign(Yt,{__name:"EvaluationForm",props:["institutionProgramList","count","effectivity","program_list","defaultAcademicYear","canEdit","filters"],setup(i){let h=y(!1);const k=()=>{h.value=!1},g=i;b({effectivity:y(g.effectivity)});const e=b({program:null,cmo:null,effectivity:y(g.effectivity)});function I(){var f;(f=e.program)!=null&&f.active_cmo?e.cmo=e.program.active_cmo:e.cmo=null,e.program!=null&&e.cmo!=null&&k(),e.post("/admin/form/deploy",e)}const v=b({search:g.filters.search});function C(){v.search==""?Z.get("/admin/tool"):v.get("/admin/tool",{preserveScroll:!0})}return(f,u)=>{const R=m("Head"),U=m("AdminPanel"),z=m("Link"),K=m("content-table"),q=m("content-container"),G=m("modal"),J=m("Notification");return s(),a(x,null,[c(R,{title:"Evaluation Forms"}),c(U),c(q,{pageTitle:"Compliance Tool",hasTopButton:"true",hasSearch:"true",hasFilters:"true",hasResultCount:"true",data_list:i.institutionProgramList},{"top-button":r(()=>[t("div",et,[t("div",ot,[t("button",{onClick:u[0]||(u[0]=o=>Q(h)?h.value=!0:h=!0),class:"px-3 w-fit rounded h-10 bg-blue-500 hover:bg-blue-600 text-white group"}," Deploy tool ")])])]),"result-count":r(()=>[t("div",st,[w("( "+d(i.count)+" Result",1),i.count>1?(s(),a("span",at,"s")):_("",!0),w(" )")])]),"page-description":r(()=>[t("div",nt,"( A.Y. "+d(i.effectivity)+" )",1)]),search:r(()=>[t("div",lt,[p(t("input",{onKeydown:W(C,["enter"]),"onUpdate:modelValue":u[1]||(u[1]=o=>n(v).search=o),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[$,n(v).search]]),t("button",{onClick:C,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},rt)])]),options:r(()=>[t("div",ct,[c(z,{href:"/admin/tool"},{default:r(()=>[dt]),_:1})])]),"main-content":r(()=>[c(K,null,{"table-head":r(()=>[ut,mt,_t,ft,p(t("th",ht,vt,512),[[F,i.canEdit]])]),"table-body":r(()=>[i.institutionProgramList.data.length==0?(s(),a("tr",gt,bt)):(s(!0),a(x,{key:1},j(i.institutionProgramList.data,(o,l)=>{var S,M,P,D,E,N,V,O,T,A,L,B;return s(),a("tr",{key:o.id,class:H({"bg-slate-200":l%2==0})},[t("td",xt,d((S=o.institution)==null?void 0:S.name),1),t("td",wt,d((M=o.program)==null?void 0:M.program),1),t("td",kt,[((P=o.evaluation_form[0])==null?void 0:P.status)=="Deployed"?(s(),a("div",Ct," CMO No."+d((E=(D=o.evaluation_form[0])==null?void 0:D.cmo)==null?void 0:E.number)+" Series of "+d((V=(N=o.evaluation_form[0])==null?void 0:N.cmo)==null?void 0:V.series)+", Version "+d((T=(O=o.evaluation_form[0])==null?void 0:O.cmo)==null?void 0:T.version),1)):_("",!0)]),t("td",St,[o.evaluation_form.length==0?(s(),a("div",Mt," Pending ")):_("",!0),((A=o.evaluation_form[0])==null?void 0:A.status)=="Deployed"?(s(),a("div",Pt," Deployed ")):_("",!0),((L=o.evaluation_form[0])==null?void 0:L.status)=="In progress"?(s(),a("div",Dt," In Progress ")):_("",!0),((B=o.evaluation_form[0])==null?void 0:B.status)=="Submitted"?(s(),a("div",Et," Submitted ")):_("",!0)]),p(t("td",Nt,null,512),[[F,i.canEdit]])],2)}),128))]),_:1})]),_:1},8,["data_list"]),c(G,{showModal:n(h),onClose:k,onSubmit:I,type:"deploy",title:"Deploy Compliance Tool"},{default:r(()=>{var o;return[t("div",Vt,[t("div",null,[Ot,p(t("select",{id:"program",class:"w-full h-10 text-sm rounded border-gray-400 my-0.5","onUpdate:modelValue":u[2]||(u[2]=l=>n(e).program=l)},[Tt,(s(!0),a(x,null,j(i.program_list,l=>(s(),a("option",{key:l.id,value:l},[w(d(l.program)+" ",1),l.major!=null?(s(),a("span",Lt," - "+d(l.major),1)):_("",!0)],8,At))),128))],512),[[X,n(e).program]]),c(Y,{message:f.$page.props.errors.program,theme:"dark"},null,8,["message"])]),t("div",Bt,[t("div",{class:H({"grayscale opacity-50 pointer-events-none":n(e).program==null})},[$t,t("input",{id:"cmo",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5",value:((o=n(e).program)==null?void 0:o.active_cmo)!=null?"CMO No."+n(e).program.active_cmo.version+" Series of "+n(e).program.active_cmo.series+" - Version "+n(e).program.active_cmo.version:"No Active CMO"},null,8,Ft)],2),c(Y,{message:f.$page.props.errors.cmo,theme:"dark"},null,8,["message"])]),t("div",jt,[Ht,p(t("input",{"onUpdate:modelValue":u[3]||(u[3]=l=>n(e).effectivity=l),id:"toolEffectivity",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5"},null,512),[[$,n(e).effectivity]])])])]}),_:1},8,["showModal"]),c(J,{message:f.$page.props.flash.success},null,8,["message"])],64)}}});export{Ut as default};
