import{m as C,E as W,T as X,A as m,o,f as s,a as u,w as i,u as _,c as j,F as v,O as Z,b as e,i as h,D as x,e as ee,C as k,t as d,B as te,z as oe,H as se,d as $,n as U,g,p as ae}from"./app-ee162bce.js";import ne from"./Layout-a469915b.js";const le={class:"mb-2 flex items-center"},ie=e("div",{class:"mr-2 font-bold"},"Academic Year:",-1),re=["value"],ce={class:"w-full flex justify-end relative"},de=e("i",{class:"fas fa-search"},null,-1),ue=[de],pe={class:"flex md:flex-row flex-col text-sm"},me={class:"w-full"},_e=e("i",{class:"fas fa-rocket mr-2"},null,-1),he=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),fe=e("th",{class:"p-3 pl-5"},"Institution",-1),ve=e("th",{class:"p-3"},"Program",-1),ge=e("th",{class:"p-3"},"Major",-1),ye=e("th",{class:"p-3"},"CMO",-1),be=e("th",{class:"p-3"},"Status",-1),we={key:0},xe=e("td",{class:"text-center py-10",colspan:"5"}," No compliance evaluation tool found ",-1),ke=[xe],Se={class:"p-3 whitespace-normal pl-5"},Ce={class:"p-3 whitespace-normal"},De={class:"p-3 whitespace-normal"},Me={class:"p-3 whitespace-normal"},Ee={class:"p-3"},Ne={key:0,class:"bg-gray-600 text-white w-fit px-1 rounded text-xs"},Pe={key:1,class:"bg-gray-700 text-white w-fit px-1 rounded text-xs"},Ve={key:2,class:"bg-blue-500 text-white w-fit px-1 rounded text-xs"},Te={key:3,class:"bg-emerald-500 text-white w-fit px-1 rounded text-xs"},Ye={class:"p-3 text-right"},Ae=e("div",{class:"mr-2"},"Items per page",-1),Le=e("option",{value:25},"25",-1),Oe=e("option",{value:50},"50",-1),Be=e("option",{value:75},"75",-1),Fe=e("option",{value:100},"100",-1),je=e("option",{value:200},"200",-1),$e=[Le,Oe,Be,Fe,je],Ue={class:"p-3"},He=e("label",{class:"font-bold text-gray-700",for:"program"},"Program",-1),Ie=e("option",{value:null},"Select program",-1),Re=["value"],ze={key:0},Ke={class:"mt-3"},qe=e("label",{class:"font-bold text-gray-700",for:"cmo"},"CHED Memorandum Order",-1),Ge=["value"],Je={class:"mt-3"},Qe=e("label",{class:"font-bold text-gray-700",for:"toolEffectivity"},"Effective A.Y.",-1),We=["value"],Xe={key:0},Ze=e("i",{class:"fas fa-spinner animate-spin"},null,-1),et=[Ze],tt={key:1},ot={data(){return{openSelectPageDropdown:!1,academicYearDropdown:["2023-2024","2024-2025","2025-2026","2026-2027","2027-2028","2028-2029","2029-2030"]}},layout:ne},nt=Object.assign(ot,{__name:"EvaluationForm",props:["institutionProgramList","effectivity","program_list","academicYear","canEdit","filters"],setup(p){let f=C(!1);const S=C(!1),H=()=>{f.value=!1},y=p,n=W({program:null,cmo:null,effectivity:C(y.effectivity)});function D(){var c;(c=n.program)!=null&&c.active_cmo?n.cmo=n.program.active_cmo:n.cmo=null,Z.post("/admin/form/deploy",n,{onStart:()=>{S.value=!0},onFinish:()=>{S.value=!1},preserveState:!1})}const r=X({ay:y.filters.academicYear,show:y.filters.show,search:y.filters.search});function M(){r.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function I(){r.search="",r.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function R(){r.get("/admin/tool",{preserveScroll:!1,preserveState:!0})}return(c,l)=>{const z=m("Head"),K=m("AdminPanel"),q=m("Link"),G=m("content-table"),J=m("content-container"),Q=m("modal"),b=m("Notification");return o(),s(v,null,[u(z,{title:"Evaluation Forms"}),u(K),u(J,{pageTitle:"Compliance Evaluation Tool",hasTopButton:p.canEdit,hasSearch:"true",hasFilters:"true",hasNavigation:!0,data_list:p.institutionProgramList},{navigation:i(()=>[e("div",le,[ie,h(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>_(r).ay=t),id:"academicYearDd",onChange:ee(I,["prevent"]),class:"select-none text-sm rounded border-2 border-gray-500"},[(o(!0),s(v,null,k(c.academicYearDropdown,(t,a)=>(o(),s("option",{key:a,value:t},d(t),9,re))),128))],544),[[x,_(r).ay]])])]),search:i(()=>[e("div",ce,[h(e("input",{onKeydown:oe(M,["enter"]),"onUpdate:modelValue":l[1]||(l[1]=t=>_(r).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-full bg-slate-100 h-10 border-none indent-3 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[te,_(r).search]]),e("button",{onClick:M,class:"hover:bg-gray-300 active:text-blue-500 h-10 w-10 rounded-full absolute right-3"},ue)])]),"top-button":i(()=>[e("div",pe,[e("div",me,[e("button",{onClick:l[2]||(l[2]=t=>se(f)?f.value=!0:f=!0),class:"select-none whitespace-nowrap px-3 w-fit rounded h-10 bg-blue-500 hover:bg-blue-600 text-white group"},[_e,$(" Deploy tool ")])])])]),options:i(()=>[e("div",null,[u(q,{href:"/admin/tool"},{default:i(()=>[he]),_:1})])]),"main-content":i(()=>[u(G,null,{"table-head":i(()=>[fe,ve,ge,ye,be]),"table-body":i(()=>[p.institutionProgramList.data.length==0?(o(),s("tr",we,ke)):(o(!0),s(v,{key:1},k(p.institutionProgramList.data,(t,a)=>{var w,E,N,P,V,T,Y,A,L,O,B,F;return o(),s("tr",{key:t.id,class:U(["hover:bg-slate-300",{"bg-slate-200":a%2==0}])},[e("td",Se,d((w=t.institution)==null?void 0:w.name),1),e("td",Ce,d((E=t.program)==null?void 0:E.program),1),e("td",De,d((N=t.program)==null?void 0:N.major),1),e("td",Me,[e("div",null," CMO No."+d((V=(P=t.evaluation_form[0])==null?void 0:P.cmo)==null?void 0:V.number)+" Series of "+d((Y=(T=t.evaluation_form[0])==null?void 0:T.cmo)==null?void 0:Y.series)+", Version "+d((L=(A=t.evaluation_form[0])==null?void 0:A.cmo)==null?void 0:L.version),1)]),e("td",Ee,[t.evaluation_form.length==0?(o(),s("div",Ne," Pending ")):g("",!0),((O=t.evaluation_form[0])==null?void 0:O.status)=="Deployed"?(o(),s("div",Pe," Deployed ")):g("",!0),((B=t.evaluation_form[0])==null?void 0:B.status)=="In progress"?(o(),s("div",Ve," In Progress ")):g("",!0),((F=t.evaluation_form[0])==null?void 0:F.status)=="Submitted"?(o(),s("div",Te," Submitted ")):g("",!0)]),h(e("td",Ye,null,512),[[ae,p.canEdit]])],2)}),128))]),_:1})]),"show-item":i(()=>[Ae,h(e("select",{"onUpdate:modelValue":l[3]||(l[3]=t=>_(r).show=t),id:"showResultCount",onChange:R,class:"select-none rounded h-8 w-16 p-1 text-sm"},$e,544),[[x,_(r).show]])]),_:1},8,["hasTopButton","data_list"]),u(Q,{showModal:_(f),onClose:H,onSubmit:D,type:"deploy",title:"Deploy Compliance Tool"},{"custom-button":i(()=>[e("button",{onClick:D,class:"text-white bg-blue-600 hover:bg-blue-700 h-10 w-20 rounded border"},[S.value?(o(),s("span",Xe,et)):(o(),s("span",tt,"Deploy"))])]),default:i(()=>{var t;return[e("div",Ue,[e("div",null,[He,h(e("select",{id:"program",class:"w-full h-10 text-sm rounded border-gray-400 my-0.5","onUpdate:modelValue":l[4]||(l[4]=a=>n.program=a)},[Ie,(o(!0),s(v,null,k(p.program_list,a=>(o(),s("option",{key:a.id,value:a},[$(d(a.program)+" ",1),a.major!=null?(o(),s("span",ze," - "+d(a.major),1)):g("",!0)],8,Re))),128))],512),[[x,n.program]])]),e("div",Ke,[e("div",{class:U({"grayscale opacity-50 pointer-events-none":n.program==null})},[qe,e("input",{id:"cmo",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5",value:((t=n.program)==null?void 0:t.active_cmo)!=null?"CMO No."+n.program.active_cmo.version+" Series of "+n.program.active_cmo.series+" - Version "+n.program.active_cmo.version:"No Active CMO"},null,8,Ge)],2)]),e("div",Je,[Qe,h(e("select",{"onUpdate:modelValue":l[5]||(l[5]=a=>n.effectivity=a),id:"toolEffectivity",class:"w-full text-sm rounded border-gray-400 my-0.5"},[(o(!0),s(v,null,k(c.academicYearDropdown,(a,w)=>(o(),s("option",{key:w,value:a},d(a),9,We))),128))],512),[[x,n.effectivity]])])])]}),_:1},8,["showModal"]),u(b,{message:c.$page.props.flash.success,type:"success"},null,8,["message"]),u(b,{message:c.$page.props.flash.failed,type:"failed"},null,8,["message"]),c.$page.props.errors.program?(o(),j(b,{key:0,message:c.$page.props.errors.program,type:"failed"},null,8,["message"])):(o(),j(b,{key:1,message:c.$page.props.errors.cmo,type:"failed"},null,8,["message"]))],64)}}});export{nt as default};
