import{m as k,E as ee,s as te,T as oe,A as p,o as s,f as a,a as u,w as i,u as _,H as z,g as h,c as R,F as v,O as se,b as e,i as f,D as C,e as ae,C as S,t as r,B as ne,z as le,d as g,n as P,p as ie}from"./app-fe511cab.js";import re from"./Layout-4e2e1be8.js";const ce={class:"mb-2 flex items-center"},de=e("div",{class:"mr-2 font-bold"},"Academic Year:",-1),ue=["value"],me={class:"w-full flex justify-end relative"},pe=e("i",{class:"fas fa-search"},null,-1),_e=[pe],he=e("i",{class:"fas fa-rocket mr-2"},null,-1),fe=e("button",{class:"w-10 h-10 whitespace-nowrap rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),ve=e("th",{class:"p-3 pl-5"},"Institution",-1),ge=e("th",{class:"p-3"},"Program",-1),ye=e("th",{class:"p-3"},"Major",-1),be=e("th",{class:"p-3"},"CMO",-1),we=e("th",{class:"p-3"},"Status",-1),xe={key:0},ke=e("td",{class:"text-center py-10",colspan:"5"}," No compliance evaluation tool found ",-1),Ce=[ke],Se={class:"p-3 whitespace-normal pl-5"},De={class:"p-3 whitespace-normal"},Me={class:"p-3 whitespace-normal"},Ee={class:"p-3 whitespace-normal"},Pe={class:"p-3"},Ve={key:0,class:"bg-gray-600 text-white w-fit px-1 rounded text-xs"},Ne={key:1,class:"bg-gray-700 text-white w-fit px-1 rounded text-xs"},Ae={key:2,class:"bg-blue-500 text-white w-fit px-1 rounded text-xs"},Te={key:3,class:"bg-emerald-500 text-white w-fit px-1 rounded text-xs"},Ye={class:"p-3 text-right"},je=e("div",{class:"mr-2"},"Items per page",-1),Oe=e("option",{value:25},"25",-1),Be=e("option",{value:50},"50",-1),Fe=e("option",{value:75},"75",-1),Le=e("option",{value:100},"100",-1),$e=e("option",{value:200},"200",-1),Ue=[Oe,Be,Fe,Le,$e],He={class:"p-3"},Ie=e("label",{class:"font-bold text-gray-700",for:"program"},"Program",-1),Re=e("option",{value:null},"Select program",-1),ze=["value"],Ke={key:0},qe={class:"mt-3"},Ge=e("label",{class:"font-bold text-gray-700",for:"cmo"},"CHED Memorandum Order",-1),Je=["value"],Qe={class:"mt-3"},We=e("label",{class:"font-bold text-gray-700",for:"toolEffectivity"},"Effective A.Y.",-1),Xe=["value"],Ze=["disabled"],et={key:0},tt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),ot=[tt],st={key:1},at={key:0},nt={key:0},lt={key:0},it=e("i",{class:"fas fa-spinner animate-spin"},null,-1),rt=[it],ct={key:1},dt={components:{Confirmation:z},data(){return{openSelectPageDropdown:!1,academicYearDropdown:["2023-2024","2024-2025","2025-2026","2026-2027","2027-2028","2028-2029","2029-2030"]}},layout:re},pt=Object.assign(dt,{__name:"EvaluationForm",props:["institutionProgramList","effectivity","program_list","academicYear","canEdit","filters"],setup(m){let D=k(!1);const y=k(!1),M=k(!1);function E(){D.value=!D.value}function V(){E(),M.value=!M.value}const b=m,o=ee({program:null,cmo:null,effectivity:k(b.effectivity)});te(()=>{var l;return(l=o.program)==null?void 0:l.active_cmo},l=>{o.cmo=l});function N(){var l;(l=o.program)!=null&&l.active_cmo?o.cmo=o.program.active_cmo:o.cmo=null,se.post("/admin/form/deploy",o,{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1},preserveState:!1})}const c=oe({ay:b.filters.academicYear,show:b.filters.show,search:b.filters.search});function A(){c.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function K(){c.search="",c.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}function q(){c.get("/admin/tool",{preserveScroll:!1,preserveState:!0})}return(l,d)=>{const G=p("Head"),J=p("AdminPanel"),Q=p("Link"),W=p("content-table"),X=p("content-container"),Z=p("modal"),w=p("Notification");return s(),a(v,null,[u(G,{title:"Evaluation Forms"}),u(J),u(X,{pageTitle:"Compliance Evaluation Tool",page:"tool",hasTopButton:m.canEdit,hasSearch:!0,hasFilters:!0,hasNavigation:!0,data_list:m.institutionProgramList},{navigation:i(()=>[e("div",ce,[de,f(e("select",{"onUpdate:modelValue":d[0]||(d[0]=t=>_(c).ay=t),id:"academicYearDd",onChange:ae(K,["prevent"]),class:"select-none text-sm rounded border-2 border-gray-500"},[(s(!0),a(v,null,S(l.academicYearDropdown,(t,n)=>(s(),a("option",{key:n,value:t},r(t),9,ue))),128))],544),[[C,_(c).ay]])])]),search:i(()=>[e("div",me,[f(e("input",{onKeydown:le(A,["enter"]),"onUpdate:modelValue":d[1]||(d[1]=t=>_(c).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded border border-gray-400 bg-slate-100 h-10 text-base placeholder-gray-400 pr-11 mr-2"},null,544),[[ne,_(c).search]]),e("button",{onClick:A,class:"text-gray-700 hover:text-black active:text-blue-500 h-10 w-10 rounded absolute right-2"},_e)])]),"top-button":i(()=>[e("div",{class:"flex md:flex-row flex-col text-sm"},[e("div",{class:"w-full"},[e("button",{onClick:E,class:"select-none whitespace-nowrap px-3 w-fit rounded h-10 bg-blue-500 hover:bg-blue-600 text-white group"},[he,g(" Deploy tool ")])])])]),options:i(()=>[e("div",null,[u(Q,{href:"/admin/tool"},{default:i(()=>[fe]),_:1})])]),"main-content":i(()=>[u(W,null,{"table-head":i(()=>[ve,ge,ye,be,we]),"table-body":i(()=>[m.institutionProgramList.data.length==0?(s(),a("tr",xe,Ce)):(s(!0),a(v,{key:1},S(m.institutionProgramList.data,(t,n)=>{var x,T,Y,j,O,B,F,L,$,U,H,I;return s(),a("tr",{key:t.id,class:P(["hover:bg-slate-300",{"bg-slate-200":n%2==0}])},[e("td",Se,r((x=t.institution)==null?void 0:x.name),1),e("td",De,r((T=t.program)==null?void 0:T.program),1),e("td",Me,r((Y=t.program)==null?void 0:Y.major),1),e("td",Ee,[e("div",null," CMO No."+r((O=(j=t.evaluation_form[0])==null?void 0:j.cmo)==null?void 0:O.number)+" Series of "+r((F=(B=t.evaluation_form[0])==null?void 0:B.cmo)==null?void 0:F.series)+", Version "+r(($=(L=t.evaluation_form[0])==null?void 0:L.cmo)==null?void 0:$.version),1)]),e("td",Pe,[t.evaluation_form.length==0?(s(),a("div",Ve," Pending ")):h("",!0),((U=t.evaluation_form[0])==null?void 0:U.status)=="Deployed"?(s(),a("div",Ne," Deployed ")):h("",!0),((H=t.evaluation_form[0])==null?void 0:H.status)=="In progress"?(s(),a("div",Ae," In Progress ")):h("",!0),((I=t.evaluation_form[0])==null?void 0:I.status)=="Submitted"?(s(),a("div",Te," Submitted ")):h("",!0)]),f(e("td",Ye,null,512),[[ie,m.canEdit]])],2)}),128))]),_:1})]),"show-item":i(()=>[je,f(e("select",{"onUpdate:modelValue":d[2]||(d[2]=t=>_(c).show=t),id:"showResultCount",onChange:q,class:"select-none rounded h-8 w-16 p-1 text-sm"},Ue,544),[[C,_(c).show]])]),_:1},8,["hasTopButton","data_list"]),u(Z,{showModal:_(D),onClose:E,onSubmit:N,type:"deploy",title:"Deploy Compliance Tool"},{"custom-button":i(()=>[e("button",{disabled:o.program==null||o.cmo==null,onClick:V,class:P(["select-none text-white h-10 w-20 rounded border",[{"bg-gray-700":o.program==null||o.cmo==null},{"bg-blue-600 hover:bg-blue-700":o.program!=null&&o.cmo!=null}]])},[y.value?(s(),a("span",et,ot)):(s(),a("span",st,"Deploy"))],10,Ze)]),default:i(()=>{var t;return[e("div",He,[e("div",null,[Ie,f(e("select",{id:"program",class:"w-full h-10 text-sm rounded border-gray-400 my-0.5","onUpdate:modelValue":d[3]||(d[3]=n=>o.program=n)},[Re,(s(!0),a(v,null,S(m.program_list,n=>(s(),a("option",{key:n.id,value:n},[g(r(n.program)+" ",1),n.major!=null?(s(),a("span",Ke," - "+r(n.major),1)):h("",!0)],8,ze))),128))],512),[[C,o.program]])]),e("div",qe,[e("div",{class:P({"grayscale opacity-50 pointer-events-none":o.program==null})},[Ge,e("input",{id:"cmo",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5",value:((t=o.program)==null?void 0:t.active_cmo)!=null?"CMO "+o.program.active_cmo.number+", S. "+o.program.active_cmo.series+", Version "+o.program.active_cmo.version:"No Active CMO"},null,8,Je)],2)]),e("div",Qe,[We,f(e("select",{"onUpdate:modelValue":d[4]||(d[4]=n=>o.effectivity=n),id:"toolEffectivity",class:"w-full text-sm rounded border-gray-400 my-0.5"},[(s(!0),a(v,null,S(l.academicYearDropdown,(n,x)=>(s(),a("option",{key:x,value:n},r(n),9,Xe))),128))],512),[[C,o.effectivity]])])])]}),_:1},8,["showModal"]),M.value?(s(),a("div",at,[u(z,{onClose:V,title:"Confirm Deployment"},{message:i(()=>{var t;return[e("div",null,[g("Are you sure you want to deploy evaluation compliance tool for "),e("b",null,[g(r(o.program.program),1),(t=o.program)!=null&&t.major?(s(),a("span",nt," - "+r(o.program.major),1)):h("",!0)]),g("?")])]}),buttons:i(()=>[e("button",{onClick:N,class:"select-none text-white bg-blue-600 hover:bg-blue-700 h-10 w-20 rounded border"},[y.value?(s(),a("span",lt,rt)):(s(),a("span",ct,"Confirm"))])]),_:1})])):h("",!0),u(w,{message:l.$page.props.flash.success,type:"success"},null,8,["message"]),u(w,{message:l.$page.props.flash.failed,type:"failed"},null,8,["message"]),l.$page.props.errors.program?(s(),R(w,{key:1,message:l.$page.props.errors.program,type:"failed"},null,8,["message"])):(s(),R(w,{key:2,message:l.$page.props.errors.cmo,type:"failed"},null,8,["message"]))],64)}}});export{pt as default};
