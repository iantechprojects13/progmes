import{m as f,T as J,s as le,A as v,o as a,f as l,a as p,w as r,H as W,c as Q,F as b,b as e,d as w,i as g,D as x,u as o,e as ne,C as F,t as u,B as ie,z as re,n as A,g as E,O as ce}from"./app-a1d3aa91.js";import de from"./Layout-8eb335a9.js";const ue={class:"flex flex-row"},pe=e("i",{class:"fas fa-rocket mr-2"},null,-1),me=["value"],_e={class:"w-full flex flex-row relative items-center"},he=e("i",{class:"fa fa-search text-gray-400 absolute left-5"},null,-1),fe={class:"mr-1"},ve=e("i",{class:"fas fa-filter"},null,-1),ge=[ve],ye=e("button",{class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Refresh page"},[e("i",{class:"fas fa-refresh"})],-1),be=e("th",{class:"p-2 pl-5"},"Institution",-1),we=e("th",{class:"p-2"},"Program",-1),xe=e("th",{class:"p-2"},"Major",-1),ke=e("th",{class:"p-2"},"CMO",-1),Me=e("th",{class:"p-2"},"Status",-1),Ce={key:0},Se=e("td",{class:"text-center py-10",colspan:"5"}," No compliance evaluation tool found ",-1),Fe=[Se],De={class:"p-2 pl-5"},Te={class:"p-2"},Ve={class:"p-2"},Ae={class:"p-2"},Ee={class:"p-2 pr-5 text-left whitespace-nowrap"},Pe={key:0,class:"bg-green-600 text-white w-fit px-1 rounded text-xs"},Ne={key:1,class:"bg-green-600 text-white w-fit px-1 rounded text-xs"},Ye={key:2,class:"bg-green-600 text-white w-fit px-1 rounded text-xs"},Oe={key:3,class:"bg-blue-500 text-white w-fit px-1 rounded text-xs"},je={class:"p-3"},Be=e("label",{class:"font-bold text-gray-700",for:"program"},"Program",-1),Le=e("option",{value:null},"Select program",-1),$e=["value"],Ie={key:0},Ue={class:"mt-3"},He=e("label",{class:"font-bold text-gray-700",for:"cmo"},"CHED Memorandum Order",-1),Re=["value"],ze={class:"mt-3"},Ke=e("label",{class:"font-bold text-gray-700",for:"toolEffectivity"},"Effective A.Y.",-1),qe=["value"],Ge=["disabled"],Je={key:0},Qe=e("i",{class:"fas fa-spinner animate-spin"},null,-1),We=[Qe],Xe={key:1},Ze={class:"flex flex-col"},et=e("label",{for:"status"},"Status",-1),tt=e("option",{value:null},"All",-1),ot=e("option",{value:"In progress"},"In Progress",-1),st=e("option",{value:"Submitted"},"Ready for visit",-1),at=e("option",{value:"Monitored"},"Monitored",-1),lt=[tt,ot,st,at],nt={class:"mt-3 flex flex-col"},it=e("label",{for:"show"},"Items per page",-1),rt=e("option",{value:"25"},"25",-1),ct=e("option",{value:"50"},"50",-1),dt=e("option",{value:"100"},"100",-1),ut=e("option",{value:"200"},"200",-1),pt=[rt,ct,dt,ut],mt={key:0},_t=e("i",{class:"fas fa-spinner animate-spin"},null,-1),ht=[_t],ft={key:1},vt={key:0},gt={key:0},yt=e("i",{class:"fas fa-spinner animate-spin"},null,-1),bt=[yt],wt={key:1},xt={components:{Confirmation:W},data(){return{openSelectPageDropdown:!1,academicYearDropdown:["2023-2024","2024-2025","2025-2026","2026-2027","2027-2028","2028-2029","2029-2030"]}},layout:de},Ct=Object.assign(xt,{__name:"EvaluationForm",props:["institutionProgramList","effectivity","program_list","academicYear","canEdit","filters"],setup(h){const m=h;let D=f(!1);const k=f(!1),_=f(!1),T=f(!1),y=f(!1);function M(){D.value=!D.value}function P(){_.value==!0?setTimeout(()=>{M()},297):M(),_.value==!1?setTimeout(()=>{_.value=!_.value},297):_.value=!_.value}const s=J({program:null,cmo:null,effectivity:f(m.effectivity)});le(()=>{var i;return(i=s.program)==null?void 0:i.active_cmo},i=>{s.cmo=i});function N(){var i;(i=s.program)!=null&&i.active_cmo?s.cmo=s.program.active_cmo:s.cmo=null,ce.post("/admin/form/deploy",s,{onStart:()=>{k.value=!0},onFinish:()=>{k.value=!1},preserveState:!1})}const c=J({ay:m.filters.academicYear,show:m.filters.show!=null?m.filters.show:null,search:m.filters.search,status:m.filters.status!=null?m.filters.status:null});function V(){T.value=!T.value}function X(){c.get("/admin/tool",{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1},preserveState:!1,preserveScroll:!0})}function Z(){c.get("/admin/tool",{onStart:()=>{y.value=!0},onFinish:()=>{y.value=!1,V()},preserveState:!0,preserveScroll:!0})}function ee(){c.search="",c.get("/admin/tool",{preserveScroll:!0,preserveState:!1})}return(i,d)=>{const te=v("Head"),oe=v("Link"),se=v("content-table"),Y=v("modal"),ae=v("content-container"),C=v("Notification");return a(),l(b,null,[p(te,{title:"Evaluation Forms"}),p(ae,{hasAdminPanel:!0,hasModal:!0,pageTitle:"Compliance Evaluation Tool",page:"tool",hasTopButton:h.canEdit,hasSearch:!0,hasFilters:!0,data_list:h.institutionProgramList},{"top-button":r(()=>[e("div",ue,[e("div",{class:"flex md:flex-row flex-col"},[e("div",{class:"w-full"},[e("button",{onClick:M,class:"select-none whitespace-nowrap px-3 rounded h-10 bg-blue-500 hover:bg-blue-600 text-white group"},[pe,w(" Deploy Tool ")])])]),g(e("select",{"onUpdate:modelValue":d[0]||(d[0]=t=>o(c).ay=t),id:"academicYearDd",onChange:ne(ee,["prevent"]),class:"select-none ml-2 text-gray-700 text-sm rounded border border-gray-400 hover:border-gray-500 cursor-pointer"},[(a(!0),l(b,null,F(i.academicYearDropdown,(t,n)=>(a(),l("option",{key:n,value:t},"A.Y. "+u(t),9,me))),128))],544),[[x,o(c).ay]])])]),search:r(()=>[e("div",_e,[he,g(e("input",{onKeydown:re(X,["enter"]),"onUpdate:modelValue":d[1]||(d[1]=t=>o(c).search=t),type:"search",id:"content-search",placeholder:"Search",class:"w-full rounded-lg border border-gray-300 indent-10 h-10 text-base placeholder-gray-400"},null,544),[[ie,o(c).search]])])]),options:r(()=>[e("div",fe,[e("button",{onClick:V,class:"w-10 h-10 whitespace-nowrap hover:bg-gray-200 rounded-full text-gray-700 hover:text-blue-500 active:text-white active:bg-blue-600 tooltipForActions","data-tooltip":"Filters"},ge),p(oe,{href:"/admin/tool"},{default:r(()=>[ye]),_:1})])]),"main-content":r(()=>[p(se,null,{"table-head":r(()=>[be,we,xe,ke,Me]),"table-body":r(()=>[h.institutionProgramList.data.length==0?(a(),l("tr",Ce,Fe)):(a(!0),l(b,{key:1},F(h.institutionProgramList.data,(t,n)=>{var S,O,j,B,L,$,I,U,H,R,z,K,q,G;return a(),l("tr",{key:t.id,class:A(["hover:bg-gray-200 border-b",{"bg-gray-100":n%2==1}])},[e("td",De,u((S=t.institution)==null?void 0:S.name),1),e("td",Te,u((O=t.program)==null?void 0:O.program),1),e("td",Ve,u((j=t.program)==null?void 0:j.major),1),e("td",Ae,[e("div",null," CMO No."+u((L=(B=t.evaluation_form[0])==null?void 0:B.cmo)==null?void 0:L.number)+" S. "+u((I=($=t.evaluation_form[0])==null?void 0:$.cmo)==null?void 0:I.series)+", Version "+u((H=(U=t.evaluation_form[0])==null?void 0:U.cmo)==null?void 0:H.version),1)]),e("td",Ee,[((R=t.evaluation_form[0])==null?void 0:R.status)=="In progress"||((z=t.evaluation_form[0])==null?void 0:z.status)=="Deployed"?(a(),l("div",Pe," In Progress ")):((K=t.evaluation_form[0])==null?void 0:K.status)=="Submitted"?(a(),l("div",Ne," Ready for visit ")):((q=t.evaluation_form[0])==null?void 0:q.status)=="For re-evaluation"?(a(),l("div",Ye," For re-evaluation ")):((G=t.evaluation_form[0])==null?void 0:G.status)=="Monitored"?(a(),l("div",Oe," Monitored ")):E("",!0)])],2)}),128))]),_:1})]),modal:r(()=>[p(Y,{showModal:o(D),width:"md",height:"long",onClose:M,onSubmit:N,type:"deploy",title:"Deploy Compliance Tool"},{"custom-button":r(()=>[e("button",{disabled:o(s).program==null||o(s).cmo==null,onClick:P,class:A(["select-none text-white h-10 w-20 rounded border",[{"bg-gray-700":o(s).program==null||o(s).cmo==null},{"bg-blue-600 hover:bg-blue-700":o(s).program!=null&&o(s).cmo!=null}]])},[k.value?(a(),l("span",Je,We)):(a(),l("span",Xe,"Deploy"))],10,Ge)]),default:r(()=>{var t;return[e("div",je,[e("div",null,[Be,g(e("select",{id:"program",class:"w-full h-10 text-sm rounded border-gray-400 my-0.5","onUpdate:modelValue":d[2]||(d[2]=n=>o(s).program=n)},[Le,(a(!0),l(b,null,F(h.program_list,n=>(a(),l("option",{key:n.id,value:n},[w(u(n.program)+" ",1),n.major!=null?(a(),l("span",Ie," - "+u(n.major),1)):E("",!0)],8,$e))),128))],512),[[x,o(s).program]])]),e("div",Ue,[e("div",{class:A({"grayscale opacity-50 pointer-events-none":o(s).program==null})},[He,e("input",{id:"cmo",type:"text",disabled:"",class:"w-full text-sm rounded border-gray-400 my-0.5",value:((t=o(s).program)==null?void 0:t.active_cmo)!=null?"CMO "+o(s).program.active_cmo.number+", S. "+o(s).program.active_cmo.series+", Version "+o(s).program.active_cmo.version:"No Active CMO"},null,8,Re)],2)]),e("div",ze,[Ke,g(e("select",{"onUpdate:modelValue":d[3]||(d[3]=n=>o(s).effectivity=n),id:"toolEffectivity",class:"w-full text-sm rounded border-gray-400 my-0.5"},[(a(!0),l(b,null,F(i.academicYearDropdown,(n,S)=>(a(),l("option",{key:S,value:n},u(n),9,qe))),128))],512),[[x,o(s).effectivity]])])])]}),_:1},8,["showModal"])]),_:1},8,["hasTopButton","data_list"]),p(Y,{showModal:T.value,onClose:V,width:"sm",height:"long",title:"Filters"},{"custom-button":r(()=>[e("button",{onClick:Z,class:"text-white bg-green-600 hover:bg-green-700 w-20 rounded h-10"},[y.value?(a(),l("span",mt,ht)):(a(),l("span",ft,"Apply"))])]),default:r(()=>[e("div",null,[e("div",Ze,[et,g(e("select",{"onUpdate:modelValue":d[4]||(d[4]=t=>o(c).status=t),id:"status",class:"rounded border-gray-400"},lt,512),[[x,o(c).status]])]),e("div",nt,[it,g(e("select",{"onUpdate:modelValue":d[5]||(d[5]=t=>o(c).show=t),id:"show",class:"rounded border-gray-400"},pt,512),[[x,o(c).show]])])])]),_:1},8,["showModal"]),p(W,{showModal:_.value,width:"md",height:"short",onClose:P,title:"Confirm Deployment"},{message:r(()=>{var t,n;return[e("div",null,[w("Are you sure you want to deploy evaluation compliance tool for "),e("b",null,[w(u((t=o(s).program)==null?void 0:t.program),1),(n=o(s).program)!=null&&n.major?(a(),l("span",vt," - "+u(o(s).program.major),1)):E("",!0)]),w("?")])]}),buttons:r(()=>[e("button",{onClick:N,class:"select-none text-white bg-blue-600 hover:bg-blue-700 h-10 w-20 rounded border"},[k.value?(a(),l("span",gt,bt)):(a(),l("span",wt,"Confirm"))])]),_:1},8,["showModal"]),p(C,{message:i.$page.props.flash.success,type:"success"},null,8,["message"]),p(C,{message:i.$page.props.flash.failed,type:"failed"},null,8,["message"]),i.$page.props.errors.program?(a(),Q(C,{key:0,message:i.$page.props.errors.program,type:"failed"},null,8,["message"])):(a(),Q(C,{key:1,message:i.$page.props.errors.cmo,type:"failed"},null,8,["message"]))],64)}}});export{Ct as default};
